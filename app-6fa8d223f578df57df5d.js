(()=>{"use strict";var e={61810:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(23645),i=a.n(n)()((function(e){return e[1]}));i.push([e.id,"html,\nbody,\n#map {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n#map {\n  z-index: 10;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n}\n\n#loading-animation {\n  z-index: 25;\n  position: absolute;\n  top: 15px;\n  right: 20px;\n}\n\n.map-button {\n  z-index: 15;\n  position: absolute;\n}\n\n#map-button-zoom-in {\n  top: 20px;\n  left: 20px;\n}\n\n#map-button-zoom-out {\n  top: 60px;\n  left: 20px;\n}\n\n#map-button-position {\n  top: 100px;\n  left: 20px;\n}\n\n#map-button-search {\n  top: 140px;\n  left: 20px;\n}\n\n#map-button-info {\n  top: 180px;\n  left: 20px;\n}\n\n#map-button-settings {\n  top: 220px;\n  left: 20px;\n}\n\n.page {\n  z-index: 20;\n  position: absolute;\n  top: 0px;\n  background-color: #fff;\n  height: 100%;\n  width: 100%;\n}\n\n.pageHeader {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.pageHeaderText {\n  font-size: 20px;\n  font-weight: 500;\n}\n\n.pageContent {\n  height: 90%;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.page-right-visible {\n  -webkit-transition: right 0.5s ease;\n  -moz-transition: right 0.5s ease;\n  -o-transition: right 0.5s ease;\n  transition: right 0.5s ease;\n  right: 0px;\n}\n\n.page-right-closing {\n  -webkit-transition: right 0.5s ease;\n  -moz-transition: right 0.5s ease;\n  -o-transition: right 0.5s ease;\n  transition: right 0.5s ease;\n  right: -100%;\n}\n\n.page-right-hidden {\n  right: -100%;\n  width: 0px;\n}\n\n@media (min-width: 768px) {\n  .page {\n  }\n  .page-right-hidden {\n  }\n}\n\n@media (min-width: 992px) {\n  .page {\n    width: 500px;\n  }\n  .page-right-closing {\n    right: -500px;\n  }\n}\n\n@media (min-width: 1200px) {\n  .page {\n    width: 600px;\n  }\n  .page-right-closing {\n    right: -600px;\n  }\n}\n\n@media (min-width: 1400px) {\n  .page {\n    width: 700px;\n  }\n  .page-right-closing {\n    right: -700px;\n  }\n}\n\n.sub-layer-select-checkbox-container {\n  margin-left: 20px;\n}\n\n.feature-collapse-panel-heading h6 {\n  font-size: 14px;\n  line-height: 1.3;\n  margin-top: 5px;\n  font-weight: 400;\n}\n\n.feature-icon {\n  margin-right: 5px;\n}\n",""]);const r=i},57644:(e,t,a)=>{a(28594),a(13225);var n,i,r,s,l,u,o,c,m,p=a(70655),d=(a(12031),a(57801)),h=a(42758),k=a(98280),g=a(1908),v=a(18672),y=a(78426),f=a(16892),E=a(62914),L=a(28101),b=a(12014);!function(e){e.Maanmittauslaitos="Maanmittauslaitos",e.Museovirasto="Museovirasto",e.Ahvenanmaa="Ahvenanmaa",e.Models="Models",e.MaisemanMuisti="MaisemanMuisti"}(i||(i={})),function(e){e.Maastokartta="maastokartta",e.Taustakartta="taustakartta",e.Ortokuva="ortokuva"}(r||(r={})),(m=s||(s={})).Muinaisjaannokset_piste="Muinaisjaannokset_piste",m.Muinaisjaannokset_alue="Muinaisjaannokset_alue",m.Suojellut_rakennukset_piste="Suojellut_rakennukset_piste",m.Suojellut_rakennukset_alue="Suojellut_rakennukset_alue",m.RKY_alue="RKY_alue",m.RKY_piste="RKY_piste",m.RKY_viiva="RKY_viiva",m.Maailmanperinto_piste="Maailmanperinto_piste",m.Maailmanperinto_alue="Maailmanperinto_alue",(c=l||(l={})).Fornminnen="Fornminnen",c.MaritimtKulturarv="Maritimt kulturarv; Vrak",function(e){e.ModelLayer="ModelLayer"}(u||(u={})),function(e){e.MaisemanMuisti="MaisemanMuisti"}(o||(o={}));var j,M,w=((n={})[s.Muinaisjaannokset_piste]=7,n[s.Muinaisjaannokset_alue]=8,n[s.Suojellut_rakennukset_piste]=2,n[s.Suojellut_rakennukset_alue]=3,n[s.RKY_alue]=4,n[s.RKY_piste]=5,n[s.RKY_viiva]=6,n[s.Maailmanperinto_piste]=9,n[s.Maailmanperinto_alue]=10,n),S=function(e){switch(e){case l.Fornminnen:return 1;case l.MaritimtKulturarv:return 5}};!function(e){e["eiMääritelty"]="ei määritelty",e.alustenHylyt="alusten hylyt",e.asuinpaikat="asuinpaikat",e.hautapaikat="hautapaikat",e.kirkkorakenteet="kirkkorakenteet",e.kivirakenteet="kivirakenteet",e["kulkuväylät"]="kulkuväylät",e.kulttiJaTarinapaikat="kultti- ja tarinapaikat",e.luonnonmuodostumat="luonnonmuodostumat",e["löytöpaikat"]="löytöpaikat",e.maarakenteet="maarakenteet",e["muinaisjäännösryhmät"]="muinaisjäännösryhmät",e.puolustusvarustukset="puolustusvarustukset",e.puurakenteet="puurakenteet",e.raakaAineenHankintapaikat="raaka-aineen hankintapaikat",e.taideMuistomerkit="taide, muistomerkit",e.tapahtumapaikat="tapahtumapaikat",e.teollisuuskohteet="teollisuuskohteet",e["työJaValmistuspaikat"]="työ- ja valmistuspaikat"}(j||(j={})),function(e){e.moniperiodinen="moniperiodinen",e.esihistoriallinen="esihistoriallinen",e.kivikautinen="kivikautinen",e.varhaismetallikautinen="varhaismetallikautinen",e.pronssikautinen="pronssikautinen",e.rautakautinen="rautakautinen",e.keskiaikainen="keskiaikainen",e.historiallinen="historiallinen",e.moderni="moderni",e.ajoittamaton="ajoittamaton",e["eiMääritelty"]="ei määritelty"}(M||(M={}));const _=function(e,t,a){var n=this;this.loadMMLWmtsCapabilitiesAndAddLayers=function(e){fetch(n.settings.maanmittauslaitos.url.WMTSCapabilities).then((function(e){return e.text()})).then((function(t){return n.addWmtsLayers(t,e)}))},this.addWmtsLayers=function(e,t){var a=(new L.Z).read(e);n.maastokarttaLayerSource=new b.Z((0,b.B)(a,{layer:r.Maastokartta})),n.taustakarttaLayerSource=new b.Z((0,b.B)(a,{layer:r.Taustakartta})),n.ortokuvaLayerSource=new b.Z((0,b.B)(a,{layer:r.Ortokuva}));var i=t.maanmittauslaitos.selectedLayer;n.mmlMaastokarttaLayer=new E.Z({source:n.maastokarttaLayerSource,visible:i===r.Maastokartta}),n.mmlTaustakarttaLayer=new E.Z({source:n.taustakarttaLayerSource,visible:i===r.Taustakartta}),n.mmlOrtokuvaLayer=new E.Z({source:n.ortokuvaLayerSource,visible:i===r.Ortokuva}),n.updateLoadingAnimationOnLayerSourceTileLoad(n.maastokarttaLayerSource),n.updateLoadingAnimationOnLayerSourceTileLoad(n.taustakarttaLayerSource),n.updateLoadingAnimationOnLayerSourceTileLoad(n.ortokuvaLayerSource),n.onLayersCreatedCallbackFn(n.mmlMaastokarttaLayer,n.mmlTaustakarttaLayer,n.mmlOrtokuvaLayer)},this.updateLoadingAnimationOnLayerSourceTileLoad=function(e){e.on("tileloadstart",(function(e){n.showLoadingAnimationFn(!0)})),e.on("tileloadend",(function(e){n.showLoadingAnimationFn(!1)})),e.on("tileloaderror",(function(e){n.showLoadingAnimationFn(!1)}))},this.selectedMaanmittauslaitosLayerChanged=function(e){if(n.mmlMaastokarttaLayer&&n.mmlTaustakarttaLayer&&n.mmlOrtokuvaLayer){var t=e.maanmittauslaitos.selectedLayer;n.mmlMaastokarttaLayer.setVisible(t===r.Maastokartta),n.mmlTaustakarttaLayer.setVisible(t===r.Taustakartta),n.mmlOrtokuvaLayer.setVisible(t===r.Ortokuva)}},this.settings=e,this.showLoadingAnimationFn=t,this.onLayersCreatedCallbackFn=a,this.loadMMLWmtsCapabilitiesAndAddLayers(e)};var D=a(41274),T=a(21915);const A=function(e,t,a){var n=this;this.addLayer=function(){n.source=n.createSource(),n.layer=new E.Z({source:n.source,extent:[65741.9087,6606901.2261,180921.4173,6747168.5691]}),n.layer.setOpacity(.7),n.onLayerCreatedCallbackFn(n.layer)},this.toLayerIds=function(e){return e.map(S).sort((function(e,t){return e-t}))},this.getSourceLayersParams=function(){return n.settings.ahvenanmaa.selectedLayers.length>0?"show:"+n.toLayerIds(n.settings.ahvenanmaa.selectedLayers).join(","):"hide:"+n.toLayerIds(Object.values(l)).join(",")},this.createSource=function(){var e={urls:[n.settings.ahvenanmaa.url.export],params:{layers:n.getSourceLayersParams()}},t=new D.Z(e);return t.on("tileloadstart",(function(e){n.showLoadingAnimationFn(!0)})),t.on("tileloadend",(function(e){n.showLoadingAnimationFn(!1)})),t.on("tileloaderror",(function(e){n.showLoadingAnimationFn(!1)})),t},this.updateLayerSource=function(){n.layer&&(n.source=n.createSource(),n.layer.setSource(n.source))},this.selectedFeatureLayersChanged=function(e){n.settings=e,n.updateLayerSource()},this.identifyFeaturesAt=function(e,t,a){return(0,p.mG)(n,void 0,void 0,(function(){var n,i,r,s,l;return(0,p.Jh)(this,(function(u){switch(u.label){case 0:return(n=null===(l=this.layer)||void 0===l?void 0:l.getExtent())&&(0,T.b8)(n,e)?(i=new URLSearchParams({geometry:e.join(","),geometryType:"esriGeometryPoint",tolerance:"10",imageDisplay:t.join(",")+",96",mapExtent:a.join(","),layers:"visible:"+this.toLayerIds(this.settings.ahvenanmaa.selectedLayers).join(","),f:"json",returnGeometry:"true"}),(r=new URL(this.settings.ahvenanmaa.url.identify)).search=String(i),[4,fetch(String(r))]):[2,Promise.resolve({results:[]})];case 1:return[4,u.sent().json()];case 2:return s=u.sent(),[2,this.addTypeAndDatingToResult(s)]}}))}))},this.findFeatures=function(e){return(0,p.mG)(n,void 0,void 0,(function(){var t,a;return(0,p.Jh)(this,(function(n){switch(n.label){case 0:return t=new URLSearchParams({searchText:e,contains:"true",searchFields:"Fornlämnings ID, Namn , Beskrivning, Topografi",layers:this.toLayerIds(this.settings.ahvenanmaa.selectedLayers).join(","),f:"json",returnGeometry:"true",returnZ:"false"}),(a=new URL(this.settings.ahvenanmaa.url.find)).search=String(t),[4,fetch(String(a))];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))},this.addTypeAndDatingToResult=function(e){return(0,p.mG)(n,void 0,void 0,(function(){var t;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return[4,this.getTypeAndDatingData()];case 1:return t=a.sent(),[2,(0,p.pi)((0,p.pi)({},e),{results:e.results.map((function(e){if(e.layerName===l.Fornminnen){var a=t.get(e.attributes["Fornlämnings ID"]);if(a)return(0,p.pi)((0,p.pi)({},e),{attributes:(0,p.pi)((0,p.pi)({},e.attributes),{typeAndDating:a})})}return e}))})]}}))}))},this.getTypeAndDatingData=function(){return(0,p.mG)(n,void 0,void 0,(function(){var e;return(0,p.Jh)(this,(function(t){switch(t.label){case 0:if(this.typeAndDatingMap)return[2,this.typeAndDatingMap];e=new Map,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch(this.settings.ahvenanmaa.url.typeAndDating)];case 2:return[4,t.sent().json()];case 3:return t.sent().features.forEach((function(t){var a=t.properties.FornID,n=e.get(a);n?e.set(a,(0,p.pr)(n,[t.properties])):e.set(a,[t.properties])})),this.typeAndDatingMap=e,[2,e];case 4:return t.sent(),[2,e];case 5:return[2]}}))}))},this.getForminnenDataLatestUpdateDate=function(){return n.forminnenDataLatestUpdateDate?Promise.resolve(n.forminnenDataLatestUpdateDate):fetch(n.settings.ahvenanmaa.url.forminnenUpdateDate).then((function(e){return e.json()})).then(n.parseUpdatedDate).then((function(e){return n.forminnenDataLatestUpdateDate=e,e}))},this.getMaritimtKulturarvDataLatestUpdateDate=function(){return n.maritimtKulturarvDataLatestUpdateDate?Promise.resolve(n.maritimtKulturarvDataLatestUpdateDate):fetch(n.settings.ahvenanmaa.url.maritimtKulturarvUpdateDate).then((function(e){return e.json()})).then(n.parseUpdatedDate).then((function(e){return n.maritimtKulturarvDataLatestUpdateDate=e,e}))},this.parseUpdatedDate=function(e){var t,a,n=null==e?void 0:e.data,i=Array.isArray(n)&&n.length>0?null===(a=null===(t=n[0])||void 0===t?void 0:t.attributes)||void 0===a?void 0:a.modified:void 0;return i?Promise.resolve(new Date(i)):Promise.reject(new Error("Ahvenanmaan updated date not found"))},this.settings=e,this.showLoadingAnimationFn=t,this.onLayerCreatedCallbackFn=a,this.addLayer()},N=function(e,t,a){var n=this;this.addLayer=function(){n.source=n.createSource(),n.layer=new E.Z({source:n.source}),n.layer.setOpacity(.7),n.onLayerCreatedCallbackFn(n.layer)},this.createSource=function(){var e=new D.Z({urls:[n.settings.museovirasto.url.export],params:{layers:n.getSourceLayerSelectionSettings(),layerDefs:n.getSourceLayerDefinitionFilterParams()}});return e.on("tileloadstart",(function(e){n.showLoadingAnimationFn(!0)})),e.on("tileloadend",(function(e){n.showLoadingAnimationFn(!1)})),e.on("tileloaderror",(function(e){n.showLoadingAnimationFn(!1)})),e},this.updateLayerSource=function(){n.layer&&(n.source=n.createSource(),n.layer.setSource(n.source))},this.getSourceLayerSelectionSettings=function(){if(Object.values(s).length!==n.settings.museovirasto.selectedLayers.length){var e=n.toLayerIds(n.settings.museovirasto.selectedLayers);return e.length>0?"show:"+e.join(","):"show:-1"}},this.getSourceLayerDefinitionFilterParams=function(){var e=[],t=n.settings.museovirasto.selectedMuinaisjaannosTypes;if(t.length>0&&t.length!=Object.values(j).length){var a=t.sort().map((function(e){return"tyyppi LIKE '%"+e+"%'"})).join(" OR ");e.push("("+a+")")}0===t.length&&e.push("(tyyppi LIKE 'NONE')");var i=n.settings.museovirasto.selectedMuinaisjaannosDatings;if(i.length>0&&i.length!=Object.values(M).length&&(a=i.sort().map((function(e){return"ajoitus LIKE '%"+e+"%'"})).join(" OR "),e.push("("+a+")")),0===i.length&&e.push("(ajoitus LIKE 'NONE')"),e.length>0)return w[s.Muinaisjaannokset_piste]+":"+e.join(" AND ")},this.toLayerIds=function(e){return e.map((function(e){return w[e]})).sort((function(e,t){return e-t}))},this.selectedFeatureLayersChanged=function(e){n.settings=e,n.updateLayerSource()},this.selectedMuinaisjaannosTypesChanged=function(e){n.settings=e,n.updateLayerSource()},this.selectedMuinaisjaannosDatingsChanged=function(e){n.settings=e,n.updateLayerSource()},this.identifyFeaturesAt=function(e,t,a){var i=n.settings.museovirasto.selectedLayers.length>0?n.toLayerIds(n.settings.museovirasto.selectedLayers):[-1],r=new URLSearchParams({geometry:e.join(","),geometryType:"esriGeometryPoint",tolerance:"10",imageDisplay:t.join(",")+",96",mapExtent:a.join(","),layers:"visible:"+i.join(","),f:"json",returnGeometry:"true"}),s=new URL(n.settings.museovirasto.url.identify);return s.search=String(r),fetch(String(s)).then((function(e){return e.json()}))},this.findFeatures=function(e){var t=n.settings.museovirasto.selectedLayers;t.includes(s.Muinaisjaannokset_alue)&&(t=t.filter((function(e){return e!==s.Muinaisjaannokset_alue})));var a="Kohdenimi, Nimi, KOHDENIMI",i="true";isNaN(parseInt(e))||(a="mjtunnus, kohdeID, ID",i="false");var r=new URLSearchParams({searchText:e,contains:i,searchFields:a,layers:n.toLayerIds(t).join(","),f:"json",returnGeometry:"true",returnZ:"false"}),l=new URL(n.settings.museovirasto.url.find);return l.search=String(r),fetch(String(l)).then((function(e){return e.json()}))},this.getDataLatestUpdateDate=function(){return n.dataLatestUpdateDate?Promise.resolve(n.dataLatestUpdateDate):fetch(n.settings.museovirasto.url.updateDate).then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml")})).then(n.parseSuunnitteluaineistoUpdatedDate)},this.parseSuunnitteluaineistoUpdatedDate=function(e){var t;return e.querySelectorAll("entry").forEach((function(e){var a,n;"http://paikkatieto.nba.fi/aineistot/suunnitteluaineisto"===(null===(a=e.querySelector("id"))||void 0===a?void 0:a.textContent)&&(t=null===(n=e.querySelector("updated"))||void 0===n?void 0:n.textContent)})),t?(n.dataLatestUpdateDate=new Date(t),Promise.resolve(n.dataLatestUpdateDate)):Promise.reject(new Error("Museovirasto updated date not found"))},this.settings=e,this.showLoadingAnimationFn=t,this.onLayerCreatedCallbackFn=a,this.addLayer()};var F=a(91934),C=a(3871),K=a(98185),x=a(20767),P=a(9371),O=a(31219),R=a(8732),I=a(23068),U=a(52043);const Z=function(){var e=this;this.addCurrentPositionMarker=function(t){if(e.currentPositionFeature)e.currentPositionFeature.setGeometry(new U.Z(t));else{var a=new K.Z({color:"rgba(0, 0, 255, 1.0)"}),n=new x.Z({color:"rgba(255, 255, 255, 1.0)",width:3});e.currentPositionFeature=new I.Z({geometry:new U.Z(t)}),e.currentPositionFeature.setStyle(new O.ZP({image:new P.Z({fill:a,stroke:n,radius:7}),fill:a,stroke:n})),e.source.addFeature(e.currentPositionFeature)}},this.addSelectedLocationFeatureMarker=function(t){e.selectedLocationFeature?e.selectedLocationFeature.setGeometry(new U.Z(t)):(e.selectedLocationFeature=new I.Z({geometry:new U.Z(t)}),e.selectedLocationFeature.setStyle(new O.ZP({image:new R.Z({src:"images/map-pin.png",anchor:[.5,1]})})),e.source.addFeature(e.selectedLocationFeature))},this.getLayer=function(){return e.layer},this.source=new C.Z({}),this.layer=new F.Z({source:this.source})};var V=a(18663),G=a(15821),Y=function(e){return"kiinteä muinaisjäännös"===ie(e.attributes.laji)},H=function(e){return"muu kulttuuriperintökohde"===ie(e.attributes.laji)},z=function(e){switch(e.layerName){case s.Muinaisjaannokset_piste:case s.Muinaisjaannokset_alue:case s.RKY_alue:case s.RKY_piste:case s.RKY_viiva:case s.Suojellut_rakennukset_piste:case s.Suojellut_rakennukset_alue:return ie(e.attributes.kohdenimi);case s.Maailmanperinto_piste:case s.Maailmanperinto_alue:return ie(e.attributes.Nimi);case l.Fornminnen:return ie(e.attributes.Namn)||ie(e.attributes["Fornlämnings ID"]);case l.MaritimtKulturarv:return ie(e.attributes.Namn)||ie(e.attributes.FornID)}},J=function(e,t,a){switch(void 0===t&&(t=!1),void 0===a&&(a=!1),e.layerName){case s.Muinaisjaannokset_piste:if(Y(e))return a?"Kiinteä muinaisjäännös, Valtakunnallisesti merkittävä muinaisjäännös":"Kiinteä muinaisjäännös";if(H(e))return"Muu kulttuuriperintökohde";break;case s.Muinaisjaannokset_alue:if(Y(e))return"Kiinteä muinaisjäännös (alue)";if(H(e))return"Muu kulttuuriperintökohde (alue)";break;case s.RKY_alue:case s.RKY_piste:case s.RKY_viiva:return"Rakennettu kulttuuriympäristö";case s.Maailmanperinto_piste:case s.Maailmanperinto_alue:return"Maailmanperintökohde";case s.Suojellut_rakennukset_piste:case s.Suojellut_rakennukset_alue:return"Rakennusperintökohde";case l.Fornminnen:return"Ahvenanmaan muinaisjäännösrekisterin kohde";case l.MaritimtKulturarv:return"Ahvenamaan merellisen kulttuuriperintörekisterin kohde";default:return}},B=function(e,t){return void 0===t&&(t=!1),"images/"+e+(t?"_3d":"")+".png"},W=function(e,t,a){switch(void 0===t&&(t=!1),void 0===a&&(a=!1),e.layerName){case s.Muinaisjaannokset_piste:if(Y(e))return B(a?"maiseman-muisti":"muinaisjaannos_kohde",t);if(H(e))return B("muu_kulttuuriperintokohde_kohde",t);break;case s.Muinaisjaannokset_alue:if(Y(e))return B("muinaisjaannos_alue",t);if(H(e))return B("muu-kulttuuriperintokohde-alue",t);break;case s.RKY_alue:return B("rky_alue",t);case s.RKY_viiva:return B("rky_viiva",t);case s.RKY_piste:return B("rky_piste",t);case s.Maailmanperinto_alue:return B("maailmanperinto_alue",t);case s.Maailmanperinto_piste:return B("maailmanperinto_piste",t);case s.Suojellut_rakennukset_alue:return B("rakennusperintorekisteri_alue",t);case s.Suojellut_rakennukset_piste:return B("rakennusperintorekisteri_rakennus",t);case l.Fornminnen:return B("ahvenanmaa_muinaisjaannos",t);case l.MaritimtKulturarv:return B("ahvenanmaa_hylky",t);default:return}},q=function(e){switch(e.layerName){case s.Muinaisjaannokset_piste:case s.Muinaisjaannokset_alue:case s.RKY_alue:case s.RKY_viiva:case s.RKY_piste:case s.Maailmanperinto_alue:case s.Maailmanperinto_piste:case s.Suojellut_rakennukset_alue:case s.Suojellut_rakennukset_piste:case l.Fornminnen:case l.MaritimtKulturarv:return e.attributes.OBJECTID}},$=function(e,t){var a;switch(e.layerName){case s.Muinaisjaannokset_piste:a=e.attributes.mjtunnus;break;case s.Suojellut_rakennukset_piste:a=e.attributes.kohdeID;break;case s.RKY_alue:a=e.attributes.ID;break;case l.Fornminnen:case l.MaritimtKulturarv:a=e.attributes.OBJECTID}return t&&a?t.filter((function(t){return t.registryItem.type===e.layerName})).filter((function(e){return e.registryItem.id.toString()===a})):[]},Q=function(e,t){return t?t.filter((function(e){return e.registryItem.type===s.Muinaisjaannokset_piste})).filter((function(t){return t.registryItem.id===e.properties.id})):[]},X=function(e,t){var a;switch(e.layerName){case s.Muinaisjaannokset_piste:a=e.attributes.mjtunnus}return t&&a?t.filter((function(e){return e.properties.id.toString()===a})):[]},ee=function(e){switch(e.layerName){case s.Muinaisjaannokset_piste:case s.Muinaisjaannokset_alue:case s.Suojellut_rakennukset_alue:case s.Suojellut_rakennukset_piste:return"https://"+e.attributes.url;case s.RKY_alue:case s.RKY_viiva:case s.RKY_piste:return e.attributes.url;case s.Maailmanperinto_alue:case s.Maailmanperinto_piste:return function(e){var t=e.attributes.URL;if(t.startsWith("http://www.nba.fi/fi/ajankohtaista/kansainvalinen_toiminta/maailmanperintokohteet_suomessa")){var a=t.indexOf("#"),n="";-1!==a&&(n=t.substring(a)),t="https://www.museovirasto.fi/fi/tietoa-meista/kansainvalinen-toiminta/maailmanperintokohteet-suomessa"+n}return t}(e);case l.Fornminnen:return function(e){switch(e.attributes["Fornlämnings ID"].substring(0,2)){case"Br":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/BR%c3%84ND%c3%96.pdf";case"Ec":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/ECKER%c3%96.pdf";case"Fö":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/F%c3%96GL%c3%96.pdf";case"Fi":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/FINSTR%c3%96M.pdf";case"Ge":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/GETA.pdf";case"Ha":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/HAMMARLAND.pdf";case"Jo":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/JOMALA.pdf";case"Kö":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/K%c3%96KAR.pdf";case"Ku":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/KUMLINGE.pdf";case"Le":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/LEMLAND.pdf";case"Lu":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/LUMPARLAND.pdf";case"Ma":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/MARIEHAMN.pdf";case"Sa":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SALTVIK.pdf";case"So":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SOTTUNGA.pdf";case"Su":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SUND.pdf";case"Vå":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/V%c3%85RD%c3%96.pdf"}}(e)}},te=function(e){switch(e.geometryType){case"esriGeometryPolygon":return e.geometry.rings[0][0];case"esriGeometryPoint":return[e.geometry.x,e.geometry.y];case"esriGeometryPolyline":return e.geometry.paths[0][0]}},ae=function(e){switch(e){case 0:return"Uppgifter saknas";case 1:return"Agrara lämningar";case 2:return"Bebyggelselämningar";case 3:return"Befästningsanläggningar";case 4:return"Boplatser";case 5:return"Gravar";case 6:return"Industriell-/produktionsplatser";case 7:return"Jakt och fångst";case 8:return"Kommunikations-/maritima lämningar";case 9:return"Kult, offer och folktro";case 10:return"Ristningar och minnesmärken";case 11:return"Övriga lämningar";default:return}},ne=function(e){switch(e){case 0:return"Förhistorisk tid";case 1:return"Historisk tid";case 2:return"Stenålder";case 3:return"Bronsålder";case 4:return"Järnålder";case 5:return"Medeltid";case 6:return"Sentid";case 99:return"Uppgifter saknas";default:return}},ie=function(e){if(!e)return"";if("null"===(e=e.trim()).toLowerCase())return"";for(;","===e.substr(e.length-1,1);)e=e.substring(0,e.length-1).trim();return e};const re=function(){var e=this;this.fetchGeoJson=function(t){return(0,p.mG)(e,void 0,void 0,(function(){return(0,p.Jh)(this,(function(e){switch(e.label){case 0:return[4,fetch(t.models.url.geojson)];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},this.styleForFeature=function(t){var a;switch(null===(a=t.getGeometry())||void 0===a?void 0:a.getType()){case"Point":var n=t.getProperties();return n.registryItem.type===s.Muinaisjaannokset_piste?e.stylePointCircle:n.registryItem.type===s.Suojellut_rakennukset_piste?e.stylePointSquare:e.stylePointCircle;case"Polygon":return e.stylePolygon;default:return e.stylePointCircle}},this.createLayer=function(t){return(0,p.mG)(e,void 0,void 0,(function(){var e;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return[4,this.fetchGeoJson(t)];case 1:return e=a.sent(),this.source=new C.Z({features:(new G.Z).readFeatures(e)}),this.layer=new F.Z({source:this.source,visible:t.models.selectedLayers.length>0,style:this.styleForFeature}),[2,this.layer]}}))}))},this.selectedFeatureLayersChanged=function(t){var a;null===(a=e.layer)||void 0===a||a.setVisible(t.models.selectedLayers.length>0)},this.getLayer=function(){return e.layer},this.getDataLatestUpdateDate=function(t){return(0,p.mG)(e,void 0,void 0,(function(){return(0,p.Jh)(this,(function(e){switch(e.label){case 0:return this.dataLatestUpdateDate?[2,Promise.resolve(this.dataLatestUpdateDate)]:[4,this.fetchGeoJson(t)];case 1:return[2,(a=e.sent().features,n=a.map((function(e){return new Date(e.properties.createdDate).getTime()})),n=Array.from(new Set(n)),new Date(Math.max.apply(null,n)))]}var a,n}))}))},this.stylePointCircle=new O.ZP({image:new P.Z({stroke:new x.Z({color:"black",width:2}),radius:7})}),this.stylePointSquare=new O.ZP({image:new V.Z({stroke:new x.Z({color:"black",width:2}),points:4,radius:7,angle:Math.PI/4})}),this.stylePolygon=new O.ZP({stroke:new x.Z({color:"black",width:4}),fill:new K.Z({color:"rgba(255, 255, 255, 0.01)"})})},se=function(){var e=this;this.fetchGeoJson=function(t){return(0,p.mG)(e,void 0,void 0,(function(){return(0,p.Jh)(this,(function(e){switch(e.label){case 0:return[4,fetch(t.maisemanMuisti.url.geojson)];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},this.createLayer=function(t){return(0,p.mG)(e,void 0,void 0,(function(){var e;return(0,p.Jh)(this,(function(a){switch(a.label){case 0:return[4,this.fetchGeoJson(t)];case 1:return e=a.sent(),this.source=new C.Z({features:(new G.Z).readFeatures(e)}),this.layer=new F.Z({source:this.source,style:this.style,visible:t.maisemanMuisti.selectedLayers.length>0}),[2,this.layer]}}))}))},this.selectedFeatureLayersChanged=function(t){var a;null===(a=e.layer)||void 0===a||a.setVisible(t.maisemanMuisti.selectedLayers.length>0)},this.getLayer=function(){return e.layer},this.style=new O.ZP({image:new V.Z({fill:new K.Z({color:"#f1615b"}),stroke:new x.Z({color:"black",width:1}),points:5,radius:15,radius2:8,angle:0})})},le=function(e,t){var a=this;this.loadFeaturesOnClickedCoordinate=function(e){a.eventListeners.showLoadingAnimation(!0);var t=a.map.getSize();if(t){var n=a.ahvenanmaaTileLayer.identifyFeaturesAt(e.coordinate,t,a.map.getView().calculateExtent(t)),i=a.museovirastoTileLayer.identifyFeaturesAt(e.coordinate,t,a.map.getView().calculateExtent(t)),r=a.map.getFeaturesAtPixel(e.pixel,{layerFilter:function(e){return e===a.modelsLayer.getLayer()},hitTolerance:10}).map((function(e){return e.getProperties()})),s=a.map.getFeaturesAtPixel(e.pixel,{layerFilter:function(e){return e===a.maisemanMuistiLayer.getLayer()},hitTolerance:10}).map((function(e){var t,a=null===(t=e.getGeometry())||void 0===t?void 0:t.getExtent();return{type:"Feature",geometry:{type:"Point",coordinates:[a[0],a[1]]},properties:(0,p.pi)({},e.getProperties())}}));Promise.all([n,i]).then((function(e){var t=e[0],n=e[1];a.eventListeners.showLoadingAnimation(!1);var i=t.results.concat(n.results);a.eventListeners.featuresSelected(i,r,s)}))}},this.initGeolocation=function(){a.geolocation=new f.Z({projection:a.view.getProjection(),tracking:!0,trackingOptions:{enableHighAccuracy:!0}}),a.geolocation.once("change:position",a.centerToCurrentPositions),a.geolocation.on("change:position",a.geolocationChanged)},this.geolocationChanged=function(){var e,t=null===(e=a.geolocation)||void 0===e?void 0:e.getPosition();t&&a.positionAndSelectedLocation.addCurrentPositionMarker(t)},this.zoom=function(e){var t=a.view.getZoom();t&&a.view.animate({zoom:t+e,duration:250})},this.selectedFeatureLayersChanged=function(e,t){switch(t){case i.Museovirasto:a.museovirastoTileLayer.selectedFeatureLayersChanged(e);break;case i.Ahvenanmaa:a.ahvenanmaaTileLayer.selectedFeatureLayersChanged(e);break;case i.Models:a.modelsLayer.selectedFeatureLayersChanged(e);break;case i.MaisemanMuisti:a.maisemanMuistiLayer.selectedFeatureLayersChanged(e)}},this.selectedMuinaisjaannosTypesChanged=function(e){a.museovirastoTileLayer.selectedMuinaisjaannosTypesChanged(e)},this.selectedMuinaisjaannosDatingsChanged=function(e){a.museovirastoTileLayer.selectedMuinaisjaannosDatingsChanged(e)},this.searchFeatures=function(e){a.eventListeners.showLoadingAnimation(!0);var t=a.ahvenanmaaTileLayer.findFeatures(e),n=a.museovirastoTileLayer.findFeatures(e);Promise.all([t,n]).then((function(e){var t=e[0],n=e[1];a.eventListeners.showLoadingAnimation(!1);var i=t.results.concat(n.results);a.eventListeners.featureSearchReady(i)}))},this.selectedMaanmittauslaitosLayerChanged=function(e){a.maanmittauslaitosTileLayer.selectedMaanmittauslaitosLayerChanged(e)},this.setMapLocation=function(e){a.view.setCenter(e)},this.centerToCurrentPositions=function(){if(a.geolocation&&a.geolocation.getPosition()){var e=a.geolocation.getPosition();a.view.setCenter(e)}else a.initGeolocation()},this.showSelectedLocationMarker=function(e){a.positionAndSelectedLocation.addSelectedLocationFeatureMarker(e)},this.zoomIn=function(){a.zoom(1)},this.zoomOut=function(){a.zoom(-1)},this.fetchDataLatestUpdateDates=function(e){Promise.all([a.museovirastoTileLayer.getDataLatestUpdateDate(),a.ahvenanmaaTileLayer.getForminnenDataLatestUpdateDate(),a.ahvenanmaaTileLayer.getMaritimtKulturarvDataLatestUpdateDate(),a.modelsLayer.getDataLatestUpdateDate(e)]).then((function(e){var t=e[0],n=e[1],i=e[2],r=e[3];a.eventListeners.dataLatestUpdateDatesReady({museovirasto:t,ahvenanmaaForminnen:n,ahvenanmaaMaritimtKulturarv:i,models:r})})).catch((function(){return a.eventListeners.dataLatestUpdateDatesReady({museovirasto:null,ahvenanmaaForminnen:null,ahvenanmaaMaritimtKulturarv:null,models:null})}))},this.eventListeners=t,d.Z.defs("EPSG:3067","+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),(0,g.z)(d.Z),(0,v.U2)("EPSG:3067").setExtent([50199.4814,6582464.0358,761274.6247,7799839.8902]),this.view=new k.ZP({center:[385249.63630000036,6672695.7579],projection:"EPSG:3067",zoom:e.initialMapZoom,enableRotation:!1}),this.map=new h.Z({target:"map",view:this.view,controls:new y.Z}),this.maanmittauslaitosTileLayer=new _(e,t.showLoadingAnimation,(function(e,t,n){a.map.getLayers().insertAt(0,e),a.map.getLayers().insertAt(1,t),a.map.getLayers().insertAt(2,n)})),this.ahvenanmaaTileLayer=new A(e,t.showLoadingAnimation,(function(e){a.map.getLayers().insertAt(3,e)})),this.museovirastoTileLayer=new N(e,t.showLoadingAnimation,(function(e){a.map.getLayers().insertAt(4,e)})),this.maisemanMuistiLayer=new se,this.modelsLayer=new re,this.positionAndSelectedLocation=new Z,Promise.all([this.maisemanMuistiLayer.createLayer(e),this.modelsLayer.createLayer(e)]).then((function(e){var t=e[0],n=e[1];a.map.getLayers().insertAt(5,t),a.map.getLayers().insertAt(6,n),a.map.getLayers().insertAt(7,a.positionAndSelectedLocation.getLayer())})),this.map.on("singleclick",this.loadFeaturesOnClickedCoordinate)};a(14039);var ue=a(93379),oe=a.n(ue),ce=a(61810);oe()(ce.Z,{insert:"head",singleton:!1}),ce.Z.locals;var me,pe=a(67294),de=a(73935),he=function(e){var t=e.visible;return pe.createElement("div",{id:"loading-animation",className:t?"":"hidden"},pe.createElement("img",{src:"images/loading.gif"}))},ke=function(e){var t=e.onClick;return pe.createElement("div",{id:"map-button-zoom-in",className:"map-button"},pe.createElement("button",{type:"button",className:"btn btn-primary",title:"Lähennä",onClick:t},pe.createElement("span",{className:"glyphicon glyphicon-plus","aria-hidden":"true"})))},ge=function(e){var t=e.onClick;return pe.createElement("div",{id:"map-button-zoom-out",className:"map-button"},pe.createElement("button",{type:"button",className:"btn btn-primary",title:"Loitonna",onClick:t},pe.createElement("span",{className:"glyphicon glyphicon-minus","aria-hidden":"true"})))},ve=function(e){var t=e.onClick;return pe.createElement("div",{id:"map-button-position",className:"map-button"},pe.createElement("button",{type:"button",className:"btn btn-primary",title:"Keskitä kartta nykyiseen sijaintiisi",onClick:t},pe.createElement("span",{className:"glyphicon glyphicon-screenshot","aria-hidden":"true"})))},ye=function(e){var t=e.onClick;return pe.createElement("div",{id:"map-button-info",className:"map-button"},pe.createElement("button",{type:"button",className:"btn btn-primary",title:"Ohjeita sivuston käyttöön",onClick:t},pe.createElement("span",{className:"glyphicon glyphicon-info-sign","aria-hidden":"true"})))},fe=a(17563),Ee=function(){var e=window.location.hash.replace(";","&");return(0,fe.parse)(e,{parseNumbers:!0,arrayFormat:"comma"})},Le=function(e){return"#"+(0,fe.stringify)(e,{arrayFormat:"comma"})},be=function(e){return Le((0,p.pi)((0,p.pi)({},Ee()),{x:e[0],y:e[1]}))},je=function(){var e=Ee(),t=parseFloat(String(e.x)),a=parseFloat(String(e.y));return isNaN(t)||isNaN(a)?null:[t,a]},Me=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.permanentLink,i=e.featureName,r=e.featureTypeIconURL,s=e.featureTypeName,l=e.children,u=function(e){e.preventDefault(),a()};return pe.createElement("div",{className:"panel panel-default"},pe.createElement("div",{className:"panel-heading feature-collapse-panel-heading",role:"tab"},pe.createElement("h4",{className:"panel-title"},pe.createElement("a",{role:"button",href:"",onClick:u},i),pe.createElement("a",{className:"pull-right",href:n},pe.createElement("span",{className:"glyphicon glyphicon-link","aria-hidden":"true"}))),pe.createElement("h6",{className:"panel-title"},pe.createElement("a",{role:"button",href:"",onClick:u},pe.createElement("img",{className:"feature-icon",src:r}),pe.createElement("span",null,s)))),pe.createElement("div",{className:"panel-collapse collapse "+(t?"in":""),role:"tabpanel"},pe.createElement("div",{className:"panel-body"},l)))},we=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.has3dModels,r=e.hasMaisemanMuistiFeatures,s=e.children,l=te(n),u=l&&be(l),o=z(n),c=W(n,i,r),m=J(n,i,r);return pe.createElement(Me,{isOpen:t,onToggleOpen:a,permanentLink:u,featureName:o,featureTypeIconURL:c,featureTypeName:m},s)},Se=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.has3dModels,r=e.children,s=function(e){switch(e.geometry.type){case"Point":return e.geometry.coordinates;case"Polygon":return e.geometry.coordinates[0][0]}}(n),l=s&&be(s),u=n.properties.name+", "+n.properties.registerName,o=B("maiseman-muisti",i);return pe.createElement(Me,{isOpen:t,onToggleOpen:a,permanentLink:l,featureName:u,featureTypeIconURL:o,featureTypeName:"Kiinteä muinaisjäännös, Valtakunnallisesti merkittävä muinaisjäännös"},r)},_e=function(e){var t=e.label,a=e.value,n=e.children,i=ie(a);return n||i?pe.createElement("div",{className:"form-group"},pe.createElement("label",null,t),n||pe.createElement("p",null,i)):null},De=function(e){var t=function(e){switch(ie(e)){case"esihistoriallinen":return"8600 eaa. - 1200 jaa.";case"kivikautinen":return"8600 – 1500 eaa.";case"varhaismetallikautinen":return"1500 eaa. - 200 jaa.";case"pronssikautinen":return"1700 – 500 eaa.";case"rautakautinen":return"500 eaa. - 1200 jaa.";case"keskiaikainen":return"1200 - 1570 jaa.";case"historiallinen":return"1200 jaa. -";case"moderni":return"1800 jaa -";case"moniperiodinen":case"ajoittamaton":case"ei määritelty":default:return""}}(e.dating);return t?pe.createElement("span",{className:"label label-default"},t):null},Te=function(e){var t=e.url,a=e.registerName;return pe.createElement("p",{className:"well"},"Lisää tietoa kohteesta Museoviraston"," ",pe.createElement("a",{href:t,target:"_blank"},a),".")},Ae=function(e){var t=e.feature,a=ee(t),n=function(e){switch(e.layerName){case s.Muinaisjaannokset_piste:case s.Muinaisjaannokset_alue:return"Muinaisjäännösrekisteristä";case s.RKY_alue:case s.RKY_viiva:case s.RKY_piste:return"rky.fi rekisteristä";case s.Maailmanperinto_alue:case s.Maailmanperinto_piste:return"Museoviraston sivuilta";case s.Suojellut_rakennukset_alue:case s.Suojellut_rakennukset_piste:return"rakennusperintörekisteristä";case l.Fornminnen:return"Ahvenamaan muinaisjäännösrekisteri";case l.MaritimtKulturarv:return"Ahvenamaan merellinen kulttuuriperintörekisteri"}}(t);return a?pe.createElement(Te,{url:a,registerName:n}):null},Ne=function(){var e=pe.useState(!1),t=e[0],a=e[1];return pe.createElement("div",{className:"panel panel-default"},pe.createElement("div",{className:"panel-heading feature-collapse-panel-heading",role:"tab"},pe.createElement("a",{role:"button",href:"",onClick:function(e){e.preventDefault(),a(!t)}},pe.createElement("span",{className:"glyphicon glyphicon-info-sign","aria-hidden":"true"})," ","Lisätietoa 3D-malleista")),pe.createElement("div",{className:"panel-collapse collapse "+(t?"in":""),role:"tabpanel"},pe.createElement("div",{className:"panel-body"},pe.createElement("p",null,"Nämä 3D-mallit ovat"," ",pe.createElement("a",{href:"./3d/",target:"_blank"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia"," ",pe.createElement("a",{href:"https://sketchfab.com",target:"_blank"},"Sketchfab")," ","-palvelusta."),pe.createElement("p",null,"Mallit saa käynnistettyä nuolipainikkeesta. Käynnistymisen jälkeen mallin saa koko ruudun tilaan oikean alareunan"," ",pe.createElement("img",{src:"images/sketchfab-fullscreen.png"})," painikkeesta tai painamalla näppäimistöltä ",pe.createElement("kbd",null,"f")," painiketta."),pe.createElement("p",null,"Mallin ohjaus:"),pe.createElement("ul",null,pe.createElement("li",null,pe.createElement("b",null,"Kääntäminen:")," pidä vasen hiirenpainike pohjaan painettuna ja liikuta hiirtä. Kosketusnäytöillä pidä sormi painettuna ja liikuta sormea."),pe.createElement("li",null,pe.createElement("b",null,"Suurennus ja pienennys:")," käytä hiiren rullaa. Kosketusnäytöillä käytä kahden sormen nipistyselettä."),pe.createElement("li",null,pe.createElement("b",null,"Kohdistuksen siirtäminen:")," pidä oikea hiirenpainike pohjaan painettuna ja liikuta hiirtä. Kosketusnäytöillä pidä kaksi sormea painettuna ja liikuta sormia.")))))},Fe=function(e){var t=e.models,a=void 0===t?[]:t;return 0===a.length?null:pe.createElement(pe.Fragment,null,pe.createElement("br",null),pe.createElement("h4",null,"Kohteen 3D-mallit"),pe.createElement(Ne,null),a.map((function(e){return pe.createElement("div",{className:"form-group",key:e.model.url},pe.createElement("label",null,e.model.name),pe.createElement("iframe",{title:e.model.name,width:"100%",height:"400",src:e.model.url+"/embed",allow:"fullscreen",allowFullScreen:!0}))})))},Ce=function(e){var t=e.feature;return pe.createElement("div",{className:"form-group"},pe.createElement("label",null,"Maiseman muisti - Valtakunnallisesti merkittävät muinaisjäännökset (",pe.createElement("a",{href:"./maisemanmuisti/",target:"_blank"},"lisätietoa"),")"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/maiseman-muisti.png"}),pe.createElement("span",null,t.properties.name)))},Ke=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i,s=e.maisemanMuistiFeatures,l=void 0===s?[]:s;return pe.createElement(we,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0,hasMaisemanMuistiFeatures:l.length>0},pe.createElement("form",null,pe.createElement(_e,{label:"Kohdenimi",value:n.attributes.kohdenimi}),pe.createElement(_e,{label:"Kunta",value:n.attributes.kunta}),pe.createElement(_e,{label:"Ajoitus"},pe.createElement("p",null,pe.createElement("span",null,ie(n.attributes.ajoitus))," ",pe.createElement(De,{dating:n.attributes.ajoitus}))),pe.createElement(_e,{label:"Tyyppi",value:n.attributes.tyyppi}),pe.createElement(_e,{label:"Alatyyppi",value:n.attributes.alatyyppi}),pe.createElement(_e,{label:"Laji",value:n.attributes.laji}),l.length>0&&pe.createElement(Ce,{feature:l[0]}),pe.createElement(Ae,{feature:n}),t&&pe.createElement(Fe,{models:r})))},xe=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return pe.createElement(we,{isOpen:t,onToggleOpen:a,feature:n},pe.createElement("form",null,pe.createElement(_e,{label:"Kohdenimi",value:n.attributes.kohdenimi}),pe.createElement(_e,{label:"Kunta",value:n.attributes.kunta}),pe.createElement(_e,{label:"Laji",value:n.attributes.laji}),pe.createElement(Ae,{feature:n})))},Pe=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return pe.createElement(we,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},pe.createElement("form",null,pe.createElement(_e,{label:"Kohdenimi",value:n.attributes.kohdenimi}),n.layerName===s.RKY_alue&&pe.createElement(_e,{label:"Nimi",value:n.attributes.nimi}),pe.createElement(Ae,{feature:n}),t&&pe.createElement(Fe,{models:r})))},Oe=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return pe.createElement(we,{isOpen:t,onToggleOpen:a,feature:n},pe.createElement("form",null,pe.createElement(_e,{label:"Kohdenimi",value:n.attributes.Nimi}),pe.createElement(Ae,{feature:n})))},Re=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return pe.createElement(we,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},pe.createElement("form",null,pe.createElement(_e,{label:"Kohdenimi",value:n.attributes.kohdenimi}),n.layerName==s.Suojellut_rakennukset_piste&&pe.createElement(_e,{label:"Rakennusnimi",value:n.attributes.rakennusnimi}),pe.createElement(_e,{label:"Kunta",value:n.attributes.kunta}),pe.createElement(_e,{label:"Suojeluryhmä",value:n.attributes.suojeluryhmä}),pe.createElement(Ae,{feature:n}),t&&pe.createElement(Fe,{models:r})))},Ie=function(e){var t=e.feature,a=ee(t);return a?pe.createElement("p",{className:"well"},"Lisää tietoa kohteesta löytyy"," ",pe.createElement("a",{href:a,target:"_blank"},"kuntakohtaisesta Pdf-tiedostosta"),", josta voit etsiä kohteen tunnisteella"," ",pe.createElement("span",{className:"label label-default"},t.attributes["Fornlämnings ID"]),"."):null},Ue=function(e){var t,a,n=e.isOpen,i=e.onToggleOpen,r=e.feature,s=e.models,l=void 0===s?[]:s,u=r.attributes["Fornlämnings ID"],o=(null===(t=r.attributes.typeAndDating)||void 0===t?void 0:t.map((function(e){return e.Antal})).reduce((function(e,t){return e+t}),0))||0,c=(null===(a=r.attributes.typeAndDating)||void 0===a?void 0:a.map((function(e,t){var a=e.Typ,n=e.Und_typ,i=e.Typ_1,r=e.Undertyp;return[ae(a),n,ne(i),r].filter((function(e){return!!e})).join(", ")})).filter((function(e){return!!e})))||[];return pe.createElement(we,{isOpen:n,onToggleOpen:i,feature:r,has3dModels:l.length>0},pe.createElement("form",null,pe.createElement(_e,{label:"Nimi",value:r.attributes.Namn}),pe.createElement(_e,{label:"Kunta",value:r.attributes.Kommun}),pe.createElement(_e,{label:"Kylä",value:r.attributes.By}),pe.createElement(_e,{label:"Kuvaus",value:r.attributes.Beskrivning}),pe.createElement(_e,{label:"Sijainti",value:r.attributes.Topografi}),pe.createElement(_e,{label:"Tunniste",value:u}),pe.createElement(_e,{label:"Tyyppi ja ajoitus"},c.map((function(e,t){return pe.createElement("p",{key:u+"-"+t},e)}))),pe.createElement(_e,{label:"Kohteiden lukumäärä",value:String(o)}),pe.createElement(Ie,{feature:r}),n&&pe.createElement(Fe,{models:l})))};!function(e){e.Visible="Visible",e.Closing="Closing",e.Hidden="Hidden"}(me||(me={}));var Ze,Ve=function(e){var t=e.title,a=e.visibility,n=e.hidePage,i=e.children,r="";switch(a){case me.Visible:r="page-right-visible";break;case me.Closing:r="page-right-closing";break;case me.Hidden:r="page-right-hidden"}return pe.createElement("div",{className:"container page "+r},a!==me.Hidden&&pe.createElement("div",{className:"row pageHeader"},pe.createElement("div",{className:"col-xs-3"},pe.createElement("button",{className:"btn btn-primary btn-sm",onClick:n},pe.createElement("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"}),"Sulje")),pe.createElement("div",{className:"col-xs-9"},pe.createElement("span",{className:"pageHeaderText"},t))),a!==me.Hidden&&pe.createElement("div",{className:"pageContent"},i))},Ge=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return pe.createElement(we,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},pe.createElement("form",null,pe.createElement(_e,{label:"Nimi",value:n.attributes.Namn}),pe.createElement(_e,{label:"Kunta",value:n.attributes.Kommun}),pe.createElement(_e,{label:"Kylä",value:n.attributes.By}),pe.createElement(_e,{label:"Kuvaus",value:n.attributes.Beskrivning}),pe.createElement(_e,{label:"Tarkkuus",value:n.attributes.Precision}),pe.createElement(_e,{label:"Tunniste",value:n.attributes.FornID}),pe.createElement(_e,{label:"Laki",value:n.attributes.Lagrum}),t&&pe.createElement(Fe,{models:r})))},Ye=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return pe.createElement(Se,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},pe.createElement("form",null,pe.createElement(_e,{label:"Kohdenimi",value:n.properties.registerName}),pe.createElement(_e,{label:"Kunta",value:n.properties.municipality}),pe.createElement(_e,{label:"Maakunta",value:n.properties.region}),pe.createElement(_e,{label:"Ajoitus"},pe.createElement("p",null,pe.createElement("span",null,ie(n.properties.dating))," ",pe.createElement(De,{dating:n.properties.dating}))),pe.createElement(_e,{label:"Tyyppi",value:n.properties.type}),pe.createElement(_e,{label:"Alatyyppi",value:n.properties.subtype}),pe.createElement(Ce,{feature:n}),pe.createElement(Te,{url:"https://www.kyppi.fi/to.aspx?id=112."+n.properties.id,registerName:"Muinaisjäännösrekisteristä"}),t&&pe.createElement(Fe,{models:r})))},He=function(e){var t=e.feature,a=e.isOpen,n=e.onToggleOpen,i=e.models,r=e.maisemanMuistiFeatures,u={isOpen:a,onToggleOpen:n,models:$(t,i),maisemanMuistiFeatures:X(t,r)};switch(t.layerName){case s.Muinaisjaannokset_piste:return pe.createElement(Ke,(0,p.pi)({feature:t},u));case s.Muinaisjaannokset_alue:return pe.createElement(xe,(0,p.pi)({feature:t},u));case s.RKY_alue:case s.RKY_viiva:case s.RKY_piste:return pe.createElement(Pe,(0,p.pi)({feature:t},u));case s.Maailmanperinto_alue:case s.Maailmanperinto_piste:return pe.createElement(Oe,(0,p.pi)({feature:t},u));case s.Suojellut_rakennukset_alue:case s.Suojellut_rakennukset_piste:return pe.createElement(Re,(0,p.pi)({feature:t},u));case l.Fornminnen:return pe.createElement(Ue,(0,p.pi)({feature:t},u));case l.MaritimtKulturarv:return pe.createElement(Ge,(0,p.pi)({feature:t},u))}return null},ze=function(e){var t=e.visibility,a=e.hidePage,n=e.features,i=void 0===n?[]:n,r=e.models,l=void 0===r?[]:r,u=e.maisemanMuistiFeatures,o=void 0===u?[]:u,c=pe.useState(""),m=c[0],p=c[1],d=function(e){return p(m===e?"":e)};return pe.createElement(Ve,{title:"Valitut kohteet",visibility:t,hidePage:a},pe.createElement("div",{className:"panel-group",role:"tablist","aria-multiselectable":"true"}),i.map((function(e){var t=e.layerName+"-"+q(e);return pe.createElement(He,{key:t,isOpen:m===t,onToggleOpen:function(){return d(t)},feature:e,models:l,maisemanMuistiFeatures:o})})),o.map((function(e){if(i.some((function(t){return t.layerName===s.Muinaisjaannokset_piste&&t.attributes.mjtunnus===e.properties.id.toString()})))return null;var t="maisemanMuisti-"+e.properties.id.toString();return pe.createElement(Ye,{key:t,isOpen:m===t,onToggleOpen:function(){return d(t)},feature:e,models:Q(e,l)})})))},Je=function(e){var t=e.hidePage,a=e.feature,n=z(a),i=function(e){switch(e.layerName){case s.Muinaisjaannokset_piste:case s.Muinaisjaannokset_alue:case s.Suojellut_rakennukset_alue:case s.Suojellut_rakennukset_piste:return e.attributes.kunta;case l.Fornminnen:case l.MaritimtKulturarv:return e.attributes.Kommun;default:return}}(a),r=J(a),u=W(a),o=te(a),c=o&&be(o);return pe.createElement("a",{href:c,className:"list-group-item search-result-row",onClick:t},pe.createElement("h4",{className:"list-group-item-heading"},n),pe.createElement("p",{className:"list-group-item-text"},pe.createElement("img",{className:"feature-icon",src:u}),pe.createElement("span",null,r,i&&", "+i)))},Be=function(e){var t=e.hidePage,a=e.features;return a?pe.createElement(pe.Fragment,null,pe.createElement("h5",{id:"search-result-header"},pe.createElement("span",null,"Hakutulokset"),pe.createElement("small",null," (",a.length," kpl)")),pe.createElement("div",{className:"list-group"},a.map((function(e){return pe.createElement(Je,{key:e.layerName+"-"+q(e),feature:e,hidePage:t})})))):null},We=function(){return pe.createElement("div",{className:"alert alert-danger",role:"alert"},"Hakusanan pitää olla vähintään kolme merkkiä")},qe=function(e){var t=e.visibility,a=e.hidePage,n=e.searchFeatures,i=e.searchResultFeatures,r=pe.useState(""),s=r[0],l=r[1],u=pe.useState(!1),o=u[0],c=u[1],m=pe.useRef(null);return pe.useEffect((function(){t===me.Visible&&setTimeout((function(){var e;return null===(e=m.current)||void 0===e?void 0:e.focus()}),500)}),[t]),pe.createElement(Ve,{title:"Hae kohteita",visibility:t,hidePage:a},pe.createElement("form",{className:o?"has-error":void 0,onSubmit:function(e){e.stopPropagation(),e.preventDefault(),s.trim().length<3?c(!0):(c(!1),n(s))}},o&&pe.createElement(We,null),pe.createElement("span",{id:"helpBlock",className:"help-block"},"Voit hakea kohteen nimellä (esim. Turun linna) tai rekisterin tunnuksella (esim. 200284 tai Sa 14.1)"),pe.createElement("div",{className:"input-group"},pe.createElement("input",{type:"text",ref:m,className:"form-control",placeholder:"Kirjoita kohteen nimi tai sen osa",value:s,"aria-describedby":"helpBlock",onChange:function(e){return l(e.target.value)}}),pe.createElement("span",{className:"input-group-btn"},pe.createElement("button",{className:"btn btn-default",type:"submit"},"Hae")))),pe.createElement(Be,{features:i,hidePage:a}))},$e=function(e){var t=e.title,a=e.children;return pe.createElement("div",{className:"panel panel-default"},pe.createElement("div",{className:"panel-heading"},t),pe.createElement("div",{className:"panel-body"},a))},Qe=function(){return pe.createElement($e,{title:"Tietoa sivustosta"},pe.createElement("p",null,"Tällä sivustolla näet kartalla seuraavien rekisterien tiedot:"),pe.createElement("h5",null,"Museovirasto"),pe.createElement("ul",null,pe.createElement("li",null,pe.createElement("a",{href:"https://www.kyppi.fi/palveluikkuna/mjreki/read/asp/r_default.aspx",target:"_blank"},"Muinaisjäännösrekisteri")),pe.createElement("li",null,pe.createElement("a",{href:"https://www.kyppi.fi/palveluikkuna/rapea/read/asp/r_default.aspx",target:"_blank"},"Rakennusperintörekisteri")),pe.createElement("li",null,pe.createElement("a",{href:"https://www.museovirasto.fi/fi/tietoa-meista/kansainvalinen-toiminta/maailmanperintokohteet-suomessa",target:"_blank"},"Maailmanperintökohteet")),pe.createElement("li",null,pe.createElement("a",{href:"http://www.rky.fi/",target:"_blank"},"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"))),pe.createElement("h5",null,"Ahvenamaan paikallishallinto"),pe.createElement("ul",null,pe.createElement("li",null,pe.createElement("a",{href:"http://www.regeringen.ax/kulturarv/arkeologi-fornlamningar/fornlamningsregistret",target:"_blank"},"Muinaisjäännösrekisteri")),pe.createElement("li",null,pe.createElement("a",{href:"https://www.regeringen.ax/kulturarv/arkeologi-fornlamningar/marinarkeologi",target:"_blank"},"Merellisen kulttuuriperinnön rekisteri"))),pe.createElement("p",null,"Kaikki näytettävät kohteet ovat avointa dataa ja haettu rekisterin ylläpitäjän tarjoamasta karttapalvelusta."),pe.createElement("p",null,"Kohteista saa lisätietoikkunan näkyviin klikkaamalla kohdetta kartalla. Tästä näkymästä on myös linkki kohteen lisätietoihin rekisterin ylläpitäjän sivustolla. Kohteen otsikon vieressä olevasta kuvakkeesta (",pe.createElement("span",{className:"glyphicon glyphicon-link","aria-hidden":"true"}),") saa talteen pysyvän linkin kohteen sijaintiin kartalla."),pe.createElement("h5",null,"3D-mallit"),pe.createElement("p",null,"Joillekin kohteille on saataville myös 3D-malleja"," ",pe.createElement("a",{href:"./3d/",target:"_blank"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia"," ",pe.createElement("a",{href:"https://sketchfab.com",target:"_blank"},"Sketchfab")," ","-palvelusta."),pe.createElement("h5",null,"Paikannus"),pe.createElement("p",null,"Kartta keskitetään oletuksena nykyiseen sijaintiisi jos annat selaimelle luvan luovuttaa se tieto. Keskityksen nykyiseen sijaintiin voi suorittaa myös myöhemmin"," ",pe.createElement("span",{className:"glyphicon glyphicon-screenshot","aria-hidden":"true"})," ","painikkeesta."),pe.createElement("h5",null,"Haku"),pe.createElement("p",null,"Museoviraston rekisterien kohteita pystyy hakemaan nimen perusteella hakunäkymässä (",pe.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":"true"}),"). Hakutuloksen klikkaaminen keskittää kartan kohteeseen ja lisää siihen paikkamerkin ",pe.createElement("img",{src:"images/map-pin-small.png"}),"."),pe.createElement("h5",null,"Asetukset"),pe.createElement("p",null,"Pohjakartan voi vaihtaa taustakartan ja maastokartan välillä asetuksista (",pe.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"}),"). Samasta näkymästä voi piilottaa Museoviraston rekisterien kohteita tyypin ja muinaisjäännöksiä myös ajoituksen mukaan jos haluaa tarkastella esimerkiksi pelkästään muinaisjäännöksiä rautakaudelta."),pe.createElement("p",null,"Palautetta sivustosta otetaan mielellään vastaan osoitteeseen"," ",pe.createElement("a",{href:"mailto:antti.kekki@gmail.com"},"antti.kekki@gmail.com")))},Xe=function(){return pe.createElement($e,{title:"Karttasymbolit"},pe.createElement("div",null,pe.createElement("h5",null,"Museoviraston muinaisjäännösrekisteri"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/muinaisjaannos_kohde.png"}),pe.createElement("span",null,"Kiinteä muinaisjäännös")),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/muinaisjaannos_alue.png"}),pe.createElement("span",null,"Kiinteä muinaisjäännös (alue)")),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/muu_kulttuuriperintokohde_kohde.png"}),pe.createElement("span",null,"Muu kulttuuriperintökohde")),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/muu-kulttuuriperintokohde-alue.png"}),pe.createElement("span",null,"Muu kulttuuriperintökohde (alue)"))),pe.createElement("br",null),pe.createElement("div",null,pe.createElement("h5",null,"Ahvenanmaan muinaisjäännösrekisteri"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/ahvenanmaa_muinaisjaannos.png"}),pe.createElement("span",null,"Kohde"))),pe.createElement("br",null),pe.createElement("div",null,pe.createElement("h5",null,"Ahvenanmaan merellisen kulttuuriperinnön rekisteri"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/ahvenanmaa_hylky.png"}),pe.createElement("span",null,"Kohde"))),pe.createElement("br",null),pe.createElement("div",null,pe.createElement("h5",null,"Rakennusperintörekisteri"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/rakennusperintorekisteri_rakennus.png"}),pe.createElement("span",null,"Rakennus")),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/rakennusperintorekisteri_alue.png"}),pe.createElement("span",null,"Alue"))),pe.createElement("br",null),pe.createElement("div",null,pe.createElement("h5",null,"Maailmanperintökohteet"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/maailmanperinto_piste.png"}),pe.createElement("span",null,"Kohde")),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/maailmanperinto_alue.png"}),pe.createElement("span",null,"Alue"))),pe.createElement("br",null),pe.createElement("div",null,pe.createElement("h5",null,"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/rky_piste.png"}),pe.createElement("span",null,"Kohde")),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/rky_viiva.png"}),pe.createElement("span",null,"Viiva (esim. tie)")),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/rky_alue.png"}),pe.createElement("span",null,"Alue"))),pe.createElement("br",null),pe.createElement("div",null,pe.createElement("h5",null,"3D-mallit (",pe.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/3d_malli_circle.png"}),pe.createElement("img",{className:"feature-icon",src:"images/3d_malli_square.png"}),pe.createElement("span",null,"Kohde sisältää 3D-malleja"))),pe.createElement("br",null),pe.createElement("div",null,pe.createElement("h5",null,"Maiseman muisti - Valtakunnallisesti merkittävät muinaisjäännökset (",pe.createElement("a",{href:"./maisemanmuisti/",target:"_blank"},"lisätietoa"),")"),pe.createElement("p",null,pe.createElement("img",{className:"feature-icon",src:"images/maiseman-muisti.png"}),pe.createElement("span",null,"Valtakunnallisesti merkittävä muinaisjäännös"))))},et=function(){return pe.createElement($e,{title:"Avoin data, lisenssit ja lähdekoodi"},pe.createElement("p",null,"Museoviraston rekistereistä tietoa haetaan"," ",pe.createElement("a",{href:"https://www.avoindata.fi/data/fi/dataset/museoviraston-kulttuuriymparistoaineistot-suojellut-kohteet-wms-palvelu"},"avoimen rajapinnan")," ","kautta (paikkatietoaineisto on julkaistu"," ",pe.createElement("a",{href:"https://creativecommons.org/licenses/by/4.0/"},"Creative Commons CC By 4.0 -lisenssillä"),")."),pe.createElement("p",null,"Ahvenanmaan maakuntahallinnon rekisteristö tietoa haetaan"," ",pe.createElement("a",{href:"https://www.kartor.ax/datasets/fornminnen"},"avoimen rajapinnan")," ","kautta (paikkatietoaineisto on julkaistu"," ",pe.createElement("a",{href:"https://creativecommons.org/licenses/by/4.0/"},"Creative Commons CC By 4.0 -lisenssillä"),")."),pe.createElement("p",null,"Taustakarttana on"," ",pe.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/kartta-ja-paikkatietojen-rajapintapalvelut-17"},"Maanmittauslaitoksen")," ","tausta-, ortokuva- ja peruskartta (paikkatietoaineisto on julkaistu"," ",pe.createElement("a",{href:"https://www.maanmittauslaitos.fi/avoindata-lisenssi-cc40"},"Creative Commons Nimeä 4.0 Kansainvälinen -lisenssillä"),")."),pe.createElement("p",null,"Maiseman muisti - Valtakunnallisesti merkittävät muinaisjäännökset -kirjan paikkatieto on ",pe.createElement("a",{href:"./maisemanmuisti/"},"tietokannasta"),", johon on koottu kirjan listaamat 205 kohdetta. Kirjan sisällön tekijanoikeus on Museovirastolla."),pe.createElement("p",null,"3D-mallit ovat avoimesta ",pe.createElement("a",{href:"./3d/"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia. Mallien lisenssit on listattu tietokannassa mallikohtaisesti."),pe.createElement("p",null,"Tämän sivuston tekninen toteutus on"," ",pe.createElement("a",{href:"https://github.com/anttikekki/muinaismuistot"},"avointa lähdekoodia"),", lisenssinä on"," ",pe.createElement("a",{href:"https://github.com/anttikekki/muinaismuistot/blob/master/LICENSE"},"MIT"),"."))},tt=function(){return pe.createElement($e,{title:"Versiohistoria"},pe.createElement("h5",null,"Joulukuu 2020"),pe.createElement("p",null,"Lisätty Ahvenanmaan muinaisjäännösrekisterin kohteisiin tyyppi, ajoitus ja alakohteiden lukumäärä."),pe.createElement("p",null,"Haku toimii nyt myös Ahvenanmaan muinaisjäännösrekisterin kohteen tunnuksella (esim. Sa 14.1)."),pe.createElement("br",null),pe.createElement("h5",null,"Marraskuu 2020"),pe.createElement("p",null,"Lisätty"," ",pe.createElement("a",{href:"./maisemanmuisti/",target:"_blank"},"Maiseman muisti - Valtakunnallisesti merkittävät muinaisjäännökset")," ","-kirjan paikkatietoaineisto kartalle"," ",pe.createElement("img",{src:"images/maiseman-muisti.png"})," korostuksella."),pe.createElement("p",null,"Karttatasojen näkyvyyksien asetukset päivitetään nyt selaimen osoitepalkkiin jolloin sivun lataaminen uudelleen palauttaa samat asetukset."),pe.createElement("p",null,"Hakukenttä hyväksyy nyt myös kohteen tunnuksen Museoviraston rekistereissä."),pe.createElement("br",null),pe.createElement("h5",null,"Toukokuu 2020"),pe.createElement("p",null,"Päivitetty Museoviraston"," ",pe.createElement("a",{href:"http://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer",target:"_blank"},"paikkatietoaineiston")," ","WMS-karttatasojen nimet koska niistä poistuivat ääkköset."),pe.createElement("br",null),pe.createElement("h5",null,"Huhtikuu 2020"),pe.createElement("p",null,"Lisätty 3D-mallien"," ",pe.createElement("a",{href:"./3d/",target:"_blank"},"tietokanta")," ","ja karttaan ",pe.createElement("img",{src:"images/3d_malli_circle.png"}),pe.createElement("img",{src:"images/3d_malli_square.png"})," korostus kohteille, joille löytyy 3D-malleja."),pe.createElement("br",null),pe.createElement("h5",null,"Helmikuu 2020"),pe.createElement("p",null,'Lisätty kartta-aineistojen viimeisin päivitysaika näkyviin "Lisätietoja sivustosta" -sivulle.'),pe.createElement("p",null,"Paikannus päivittää nyt automaattisesti omaa sijaintia kartalla."),pe.createElement("br",null),pe.createElement("h5",null,"Elokuu 2019"),pe.createElement("p",null,"Siirrytty käyttämään Ahvenanmaan maakuntahallinnon uutta"," ",pe.createElement("a",{href:"https://www.kartor.ax/datasets/fornminnen"},"kartor.ax")," ","karttapalvelua. Samalla kohteiden haku alkoi toimimaan myös Ahvenanmaan kohteille."),pe.createElement("p",null,"Kartalle klikattujen kohteiden listassa näkyy nyt otsikossa kohteen nimi. Listassa voi nyt myös olla monta saman tyyppistä kohdetta."),pe.createElement("br",null),pe.createElement("h5",null,"Heinäkuu 2019"),pe.createElement("p",null,"Korjattu Museoviraston muinaisjäännösrekisterin pisteiden filtteröinti ajoituksen ja tyypin perusteella."),pe.createElement("br",null),pe.createElement("h5",null,"Joulukuu 2018"),pe.createElement("p",null,"Siirrytty käyttämään Maanmittauslaitoksen uutta"," ",pe.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/kartta-ja-paikkatietojen-rajapintapalvelut-17"},"karttapalvelua"),", jonka myötä taustakartan ulkonäkö muuttui selkeämmäksi ja"," ",pe.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/tuotekuvaukset/ortokuva"},"Ortokuvat")," ","saatiin käyttöön."),pe.createElement("p",null,"Siirrytty käyttämään Museoviraston uutta"," ",pe.createElement("a",{href:"https://www.avoindata.fi/data/fi/dataset/museoviraston-kulttuuriymparistoaineistot-suojellut-kohteet-wms-palvelu"},"karttapalvelua"),', jonka myötä saatiin käyttöön ruskeat "Muu kulttuuriperintökohde" -pisteet kartalle.'),pe.createElement("br",null),pe.createElement("h5",null,"Marraskuu 2017"),pe.createElement("p",null,"Lisätty kartalle Ahvenanmaan maakuntahallinnon"," ",pe.createElement("a",{href:"http://www.regeringen.ax/kulturarv/arkeologi-fornlamningar/fornlamningsregistret"},"muinaijäännösten rekisteri"),"."),pe.createElement("br",null),pe.createElement("h5",null,"Lokakuu 2015"),pe.createElement("p",null,"Ensimmäinen versio julkaistu."))},at=function(e){var t=e.date;return void 0===t?pe.createElement("p",null,"Tietoa selvitetään parhaillaan..."):null===t?pe.createElement("p",null,"Päivityshetkeä ei valitettavasti saatu selville"):pe.createElement("p",null,t.toLocaleDateString("fi"))},nt=function(e){var t=e.dataLatestUpdateDates;return pe.createElement($e,{title:"Aineisto päivitetty viimeksi"},pe.createElement("h5",null,"Museoviraston aineistot"),pe.createElement(at,{date:null==t?void 0:t.museovirasto}),pe.createElement("h5",null,"Ahvenamaan muinaisjäännösrekisteri"),pe.createElement(at,{date:null==t?void 0:t.ahvenanmaaForminnen}),pe.createElement("h5",null,"Ahvenamaan merellisen kulttuuriperinnön rekisteri"),pe.createElement(at,{date:null==t?void 0:t.ahvenanmaaMaritimtKulturarv}),pe.createElement("h5",null,"3D-mallit (",pe.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),pe.createElement(at,{date:null==t?void 0:t.models}))},it=function(e){var t=e.visibility,a=e.hidePage,n=e.dataLatestUpdateDates;return pe.createElement(Ve,{title:"Lisätietoja sivustosta",visibility:t,hidePage:a},pe.createElement(nt,{dataLatestUpdateDates:n}),pe.createElement(Qe,null),pe.createElement(Xe,null),pe.createElement(et,null),pe.createElement(tt,null))},rt=function(e){var t=e.onClick;return pe.createElement("div",{id:"map-button-search",className:"map-button"},pe.createElement("button",{type:"button",className:"btn btn-primary",title:"Hae kohteita",onClick:t},pe.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":"true"})))},st=function(e){var t=e.layer,a=e.selectedLayer,n=e.onSelectLayer,i=t===a;return pe.createElement("label",{className:"btn btn-default "+(i?"active":"")},pe.createElement("input",{type:"radio",name:"selectedMapLayer",checked:i,onChange:function(){return n(t)}}),t)},lt=function(e){var t=e.selectedLayer,a=e.onSelectLayer;return pe.createElement($e,{title:"Karttapohja"},pe.createElement("div",{className:"btn-group","data-toggle":"buttons"},Object.values(r).map((function(e){return pe.createElement(st,{key:e,layer:e,selectedLayer:t,onSelectLayer:a})}))))},ut=function(e){var t=e.label,a=e.layer,n=e.selectedLayers,i=e.onSelectLayer,r=n.includes(a);return pe.createElement("div",{className:"checkbox sub-layer-select-checkbox-container"},pe.createElement("label",null,pe.createElement("input",{type:"checkbox",onChange:function(){return i(a)},checked:r}),function(e){switch(e){case s.Muinaisjaannokset_piste:return["images/muinaisjaannos_kohde.png","images/muu_kulttuuriperintokohde_kohde.png"];case s.Muinaisjaannokset_alue:return["images/muinaisjaannos_alue.png","images/muu-kulttuuriperintokohde-alue.png"];case s.RKY_alue:return["images/rky_alue.png"];case s.RKY_viiva:return["images/rky_viiva.png"];case s.RKY_piste:return["images/rky_piste.png"];case s.Maailmanperinto_alue:return["images/maailmanperinto_alue.png"];case s.Maailmanperinto_piste:return["images/maailmanperinto_piste.png"];case s.Suojellut_rakennukset_alue:return["images/rakennusperintorekisteri_alue.png"];case s.Suojellut_rakennukset_piste:return["images/rakennusperintorekisteri_rakennus.png"];case l.Fornminnen:return["images/ahvenanmaa_muinaisjaannos.png"];case l.MaritimtKulturarv:return["images/ahvenanmaa_hylky.png"];case u.ModelLayer:return["images/3d_malli_circle.png","images/3d_malli_square.png"];case o.MaisemanMuisti:return["images/maiseman-muisti.png"]}}(a).map((function(e,t){return pe.createElement("img",{className:"feature-icon",key:t,src:e})})),pe.createElement("span",null,t)))},ot=function(e){var t=e.selectedMuseovirastoLayers,a=e.selectedAhvenanmaaLayers,n=e.selectedModelLayers,i=e.selectedMaisemanMuistiLayers,r=e.onSelectMuseovirastoLayer,c=e.onSelectAhvenanmaaLayer,m=e.onSelectModelLayer,p=e.onSelectMaisemanMuistiLayer;return pe.createElement($e,{title:"Kartalla näkyvät kohteet"},pe.createElement("form",null,pe.createElement("h5",null,"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"),pe.createElement(ut,{label:"Alueet",layer:s.RKY_alue,selectedLayers:t,onSelectLayer:r}),pe.createElement(ut,{label:"Viivat (esim. tie)",layer:s.RKY_viiva,selectedLayers:t,onSelectLayer:r}),pe.createElement(ut,{label:"Pisteet",layer:s.RKY_piste,selectedLayers:t,onSelectLayer:r}),pe.createElement("h5",null,"Maailmanperintökohteet"),pe.createElement(ut,{label:"Alueet",layer:s.Maailmanperinto_alue,selectedLayers:t,onSelectLayer:r}),pe.createElement(ut,{label:"Pisteet",layer:s.Maailmanperinto_piste,selectedLayers:t,onSelectLayer:r}),pe.createElement("h5",null,"Rakennusperintörekisteri"),pe.createElement(ut,{label:"Rakennetut alueet",layer:s.Suojellut_rakennukset_alue,selectedLayers:t,onSelectLayer:r}),pe.createElement(ut,{label:"Rakennukset",layer:s.Suojellut_rakennukset_piste,selectedLayers:t,onSelectLayer:r}),pe.createElement("h5",null,"Museoviraston muinaisjäännösrekisteri"),pe.createElement(ut,{label:"Alueet",layer:s.Muinaisjaannokset_alue,selectedLayers:t,onSelectLayer:r}),pe.createElement(ut,{label:"Pisteet",layer:s.Muinaisjaannokset_piste,selectedLayers:t,onSelectLayer:r}),pe.createElement("h5",null,"Ahvenamaan muinaisjäännösrekisteri"),pe.createElement(ut,{label:"Kohde",layer:l.Fornminnen,selectedLayers:a,onSelectLayer:c}),pe.createElement("h5",null,"Ahvenamaan merellisen kulttuuriperinnön rekisteri"),pe.createElement(ut,{label:"Kohde",layer:l.MaritimtKulturarv,selectedLayers:a,onSelectLayer:c}),pe.createElement("h5",null,"3D-mallit (",pe.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),pe.createElement(ut,{label:"3D-mallit",layer:u.ModelLayer,selectedLayers:n,onSelectLayer:m}),pe.createElement("h5",null,"Maiseman muisti - Valtakunnallisesti merkittävät muinaisjäännökset (",pe.createElement("a",{href:"./maisemanmuisti/",target:"_blank"},"lisätietoa"),")"),pe.createElement(ut,{label:"Valtakunnallisesti merkittävät muinaisjäännökset",layer:o.MaisemanMuisti,selectedLayers:i,onSelectLayer:p})))},ct=function(e){var t=e.selectedMuinaisjaannosTypes,a=e.onSelectTypes,n=pe.useMemo((function(){return Object.values(j)}),[]),i=Object.values(n).every((function(e){return t.includes(e)}));return pe.createElement("h5",null,pe.createElement("label",null,pe.createElement("input",{type:"checkbox",onChange:function(){return a(i?[]:n)},checked:i})," ","Tyyppi"))},mt=function(e){var t=e.type,a=e.selectedMuinaisjaannosTypes,n=e.onSelectType,i=a.includes(t);return pe.createElement("div",{className:"checkbox"},pe.createElement("label",null,pe.createElement("input",{type:"checkbox",onChange:function(){return n(t)},checked:i}),t))},pt=function(e){var t=e.selectedMuinaisjaannosDatings,a=e.onSelectDatings,n=pe.useMemo((function(){return Object.values(M)}),[]),i=Object.values(n).every((function(e){return t.includes(e)}));return pe.createElement("h5",null,pe.createElement("label",null,pe.createElement("input",{type:"checkbox",onChange:function(){return a(i?[]:n)},checked:i})," ","Ajoitus"))},dt=function(e){var t=e.dating,a=e.selectedMuinaisjaannosDatings,n=e.onSelectDating,i=a.includes(t);return pe.createElement("div",{className:"checkbox"},pe.createElement("label",null,pe.createElement("input",{type:"checkbox",onChange:function(){return n(t)},checked:i})," ",t))},ht=function(e){var t=e.selectedMuinaisjaannosTypes,a=e.selectedMuinaisjaannosDatings,n=e.onSelectMuinaisjaannosType,i=e.onSelectMuinaisjaannosDating;return pe.createElement($e,{title:"Kartalla näkyvät muinaisjäännökset"},pe.createElement("form",null,pe.createElement("div",{className:"well well-sm"},"Rajoitus toimii vain Museoviraston muijaisjäännöksien pisteille (",pe.createElement("img",{src:"images/muinaisjaannos_kohde.png"})," ja",pe.createElement("img",{src:"images/muu_kulttuuriperintokohde_kohde.png"}),") mutta ei alueille (",pe.createElement("img",{src:"images/muinaisjaannos_alue.png"})," ja",pe.createElement("img",{src:"images/muu-kulttuuriperintokohde-alue.png"}),"). Rajaus ei valitettavasti toimi Ahvenanmaan muinaisjäännöksiin."),pe.createElement(ct,{selectedMuinaisjaannosTypes:t,onSelectTypes:n}),Object.values(j).map((function(e){return pe.createElement(mt,{key:e,type:e,selectedMuinaisjaannosTypes:t,onSelectType:n})})),pe.createElement("br",null),pe.createElement(pt,{selectedMuinaisjaannosDatings:a,onSelectDatings:i}),Object.values(M).map((function(e){return pe.createElement(dt,{key:e,dating:e,selectedMuinaisjaannosDatings:a,onSelectDating:i})}))))},kt=function(e){var t=e.visibility,a=e.hidePage,n=e.settings,i=e.onSelectMaanmittauslaitosLayer,r=e.onSelectMuseovirastoLayer,s=e.onSelectAhvenanmaaLayer,l=e.onSelectModelLayer,u=e.onSelectMaisemanMuistiLayer,o=e.onSelectMuinaisjaannosType,c=e.onSelectMuinaisjaannosDating;return pe.createElement(Ve,{title:"Asetukset",visibility:t,hidePage:a},pe.createElement(lt,{selectedLayer:n.maanmittauslaitos.selectedLayer,onSelectLayer:i}),pe.createElement(ot,{selectedMuseovirastoLayers:n.museovirasto.selectedLayers,selectedAhvenanmaaLayers:n.ahvenanmaa.selectedLayers,selectedModelLayers:n.models.selectedLayers,selectedMaisemanMuistiLayers:n.maisemanMuisti.selectedLayers,onSelectMuseovirastoLayer:r,onSelectAhvenanmaaLayer:s,onSelectModelLayer:l,onSelectMaisemanMuistiLayer:u}),pe.createElement(ht,{selectedMuinaisjaannosTypes:n.museovirasto.selectedMuinaisjaannosTypes,selectedMuinaisjaannosDatings:n.museovirasto.selectedMuinaisjaannosDatings,onSelectMuinaisjaannosType:o,onSelectMuinaisjaannosDating:c}))},gt=function(e){var t=e.onClick;return pe.createElement("div",{id:"map-button-settings",className:"map-button"},pe.createElement("button",{type:"button",className:"btn btn-primary",title:"Kartan asetukset",onClick:t},pe.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"})))},vt={initialMapZoom:8,maanmittauslaitos:{selectedLayer:r.Taustakartta,url:{WMTSCapabilities:"https://avoin-karttakuva.maanmittauslaitos.fi/avoin/wmts/1.0.0/WMTSCapabilities.xml"}},museovirasto:{selectedLayers:Object.values(s),selectedMuinaisjaannosTypes:Object.values(j),selectedMuinaisjaannosDatings:Object.values(M),url:{export:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer/export",identify:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer/identify",find:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer/find",updateDate:"https://dkfgv6jxivsxz.cloudfront.net/MV_inspire_atom.xml"}},ahvenanmaa:{selectedLayers:Object.values(l),url:{export:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/export",identify:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/identify",find:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/find",typeAndDating:"https://opendata.arcgis.com/datasets/4fa828b46a0740b18960cf3e91d35431_2.geojson",forminnenUpdateDate:"https://opendata.arcgis.com/api/v3/datasets?filter%5Bslug%5D=aland%3A%3Afornminnen",maritimtKulturarvUpdateDate:"https://opendata.arcgis.com/api/v3/datasets?filter%5Bslug%5D=aland%3A%3Amaritimt-kulturarv-vrak"}},models:{selectedLayers:Object.values(u),url:{geojson:"./3d/3d.json"}},maisemanMuisti:{selectedLayers:Object.values(o),url:{geojson:"./maisemanmuisti/maisemanmuisti.json"}}},yt=function(e,t){return(0,p.pi)((0,p.pi)({},e),{maanmittauslaitos:(0,p.pi)((0,p.pi)({},e.maanmittauslaitos),{selectedLayer:t})})},ft=function(e,t){return(0,p.pi)((0,p.pi)({},e),{museovirasto:(0,p.pi)((0,p.pi)({},e.museovirasto),{selectedLayers:t})})},Et=function(e,t){return(0,p.pi)((0,p.pi)({},e),{ahvenanmaa:(0,p.pi)((0,p.pi)({},e.ahvenanmaa),{selectedLayers:t})})},Lt=function(e,t){return(0,p.pi)((0,p.pi)({},e),{models:(0,p.pi)((0,p.pi)({},e.models),{selectedLayers:t})})},bt=function(e,t){return(0,p.pi)((0,p.pi)({},e),{maisemanMuisti:(0,p.pi)((0,p.pi)({},e.maisemanMuisti),{selectedLayers:t})})},jt=function(e,t){return(0,p.pi)((0,p.pi)({},e),{museovirasto:(0,p.pi)((0,p.pi)({},e.museovirasto),{selectedMuinaisjaannosTypes:t})})},Mt=function(e,t){return(0,p.pi)((0,p.pi)({},e),{museovirasto:(0,p.pi)((0,p.pi)({},e.museovirasto),{selectedMuinaisjaannosDatings:t})})},wt="none",St=function(e,t){return Object.values(e).some((function(e){return e===t}))},_t=function(e,t,a,n){return a===wt?n(e,[]):St(t,a)?n(e,[a]):Array.isArray(a)&&function(e,t){return t.every((function(t){return St(e,t)}))}(t,a)?n(e,a):e},Dt=function(e,t,a,n){var i,r;return t.every((function(e){return a.includes(e)}))?(0,p.pi)((0,p.pi)({},e),{old:(0,p.pi)((0,p.pi)({},e.old),(i={},i[n]=void 0,i))}):(0,p.pi)((0,p.pi)({},e),{next:(0,p.pi)((0,p.pi)({},e.next),(r={},r[n]=a.length>0?a:[wt],r))})};!function(e){e.Search="searchPage",e.Info="infoPage",e.Settings="settingsPage",e.Details="detailsPage"}(Ze||(Ze={}));var Tt=function(e,t){return t.includes(e)?t.filter((function(t){return t!==e})):(0,p.pr)(t,[e])};const At=function(e,t){var a=this;this.pageClosingAnimationTimeoutID={},this.loadingAnimationCounter=0,this.onSearchFeatures=function(e){a.eventListeners.searchFeatures(e),a.searchResultFeatures=void 0,a.renderUI()},this.onSelectMaanmittauslaitosLayer=function(e){a.settings=yt(a.settings,e),a.eventListeners.selectedMaanmittauslaitosLayerChanged(a.settings),a.renderUI()},this.onSelectMuseovirastoLayer=function(e){a.settings=ft(a.settings,Tt(e,a.settings.museovirasto.selectedLayers)),a.eventListeners.selectedFeatureLayersChanged(a.settings,i.Museovirasto),a.renderUI()},this.onSelectAhvenanmaaLayer=function(e){a.settings=Et(a.settings,Tt(e,a.settings.ahvenanmaa.selectedLayers)),a.eventListeners.selectedFeatureLayersChanged(a.settings,i.Ahvenanmaa),a.renderUI()},this.onSelectModelLayer=function(e){a.settings=Lt(a.settings,Tt(e,a.settings.models.selectedLayers)),a.eventListeners.selectedFeatureLayersChanged(a.settings,i.Models),a.renderUI()},this.onSelectMaisemanMuistiLayer=function(e){a.settings=bt(a.settings,Tt(e,a.settings.maisemanMuisti.selectedLayers)),a.eventListeners.selectedFeatureLayersChanged(a.settings,i.MaisemanMuisti),a.renderUI()},this.onSelectMuinaisjaannosType=function(e){Array.isArray(e)?a.settings=jt(a.settings,e):a.settings=jt(a.settings,Tt(e,a.settings.museovirasto.selectedMuinaisjaannosTypes)),a.eventListeners.selectedMuinaisjaannosTypesChanged(a.settings),a.renderUI()},this.onSelectMuinaisjaannosDating=function(e){Array.isArray(e)?a.settings=Mt(a.settings,e):a.settings=Mt(a.settings,Tt(e,a.settings.museovirasto.selectedMuinaisjaannosDatings)),a.eventListeners.selectedMuinaisjaannosDatingsChanged(a.settings),a.renderUI()},this.renderUI=function(){var e=a.loadingAnimationCounter>0,t=a.eventListeners,n=t.zoomIn,i=t.zoomOut,r=t.centerToCurrentPositions;de.render(pe.createElement(pe.Fragment,null,pe.createElement(he,{visible:e}),pe.createElement(ke,{onClick:n}),pe.createElement(ge,{onClick:i}),pe.createElement(ve,{onClick:r}),pe.createElement(rt,{onClick:function(){return a.showPage(Ze.Search)}}),pe.createElement(ye,{onClick:function(){return a.showPage(Ze.Info)}}),pe.createElement(gt,{onClick:function(){return a.showPage(Ze.Settings)}}),pe.createElement(ze,{visibility:a.getPageVisibility(Ze.Details),hidePage:a.hidePage,features:a.selectedFeatures,models:a.selectedModels,maisemanMuistiFeatures:a.selectedMaisemanMuistiFeatures}),pe.createElement(qe,{visibility:a.getPageVisibility(Ze.Search),hidePage:a.hidePage,searchFeatures:a.onSearchFeatures,searchResultFeatures:a.searchResultFeatures}),pe.createElement(it,{visibility:a.getPageVisibility(Ze.Info),hidePage:a.hidePage,dataLatestUpdateDates:a.dataLatestUpdateDates}),pe.createElement(kt,{visibility:a.getPageVisibility(Ze.Settings),hidePage:a.hidePage,settings:a.settings,onSelectMaanmittauslaitosLayer:a.onSelectMaanmittauslaitosLayer,onSelectMuseovirastoLayer:a.onSelectMuseovirastoLayer,onSelectAhvenanmaaLayer:a.onSelectAhvenanmaaLayer,onSelectModelLayer:a.onSelectModelLayer,onSelectMaisemanMuistiLayer:a.onSelectMaisemanMuistiLayer,onSelectMuinaisjaannosType:a.onSelectMuinaisjaannosType,onSelectMuinaisjaannosDating:a.onSelectMuinaisjaannosDating})),document.getElementById("ui"))},this.getPageVisibility=function(e){return a.visiblePage===e?me.Visible:a.pageClosingAnimationTimeoutID[e]?me.Closing:me.Hidden},this.showPage=function(e){a.visiblePage!==e&&(a.abortClosingPage(e),a.visiblePage=e,e===Ze.Info&&a.eventListeners.fetchDataLatestUpdateDates(),a.renderUI())},this.hidePage=function(){a.visiblePage&&a.startClosingPage(a.visiblePage),a.visiblePage=void 0,a.renderUI()},this.startClosingPage=function(e){a.pageClosingAnimationTimeoutID[e]=window.setTimeout((function(){a.pageClosingAnimationTimeoutID[e]=void 0,a.renderUI()}),500)},this.abortClosingPage=function(e){a.pageClosingAnimationTimeoutID[e]&&(window.clearTimeout(a.pageClosingAnimationTimeoutID[e]),a.pageClosingAnimationTimeoutID[e]=void 0)},this.showLoadingAnimation=function(e){var t=a.loadingAnimationCounter;e?a.loadingAnimationCounter++:a.loadingAnimationCounter--,0===t&&1===a.loadingAnimationCounter&&(a.loadingAnimationTimeoutID=window.setTimeout((function(){a.loadingAnimationTimeoutID&&a.renderUI()}),300)),1===t&&0===a.loadingAnimationCounter&&(window.clearTimeout(a.loadingAnimationTimeoutID),a.loadingAnimationTimeoutID=void 0,a.renderUI())},this.featuresSelected=function(e,t,n){0===e.length&&0===n.length||(a.selectedFeatures=e,a.selectedModels=t,a.selectedMaisemanMuistiFeatures=n,a.visiblePage=Ze.Details,a.renderUI())},this.featureSearchReady=function(e){a.searchResultFeatures=e,a.renderUI()},this.dataLatestUpdateDatesReady=function(e){a.dataLatestUpdateDates=e,a.renderUI()},this.settings=e,this.eventListeners=t,this.renderUI()};new function(){var e=this;this.determineStartLocation=function(){je()?e.setMapLocationFromURLHash():e.map.centerToCurrentPositions()},this.setMapLocationFromURLHash=function(){var t=je();t&&(e.map.setMapLocation(t),e.map.showSelectedLocationMarker(t))},this.updateSettings=function(t){e.settings=t,function(e,t){var a={next:{},old:Ee()};a=e.maanmittauslaitos.selectedLayer===t.maanmittauslaitos.selectedLayer?(0,p.pi)((0,p.pi)({},a),{old:(0,p.pi)((0,p.pi)({},a.old),{mmlLayer:void 0})}):(0,p.pi)((0,p.pi)({},a),{next:(0,p.pi)((0,p.pi)({},a.next),{mmlLayer:t.maanmittauslaitos.selectedLayer})}),a=Dt(a,e.museovirasto.selectedLayers,t.museovirasto.selectedLayers,"museovirastoLayer"),a=Dt(a,e.museovirasto.selectedMuinaisjaannosTypes,t.museovirasto.selectedMuinaisjaannosTypes,"muinaisjaannosTypes"),a=Dt(a,e.museovirasto.selectedMuinaisjaannosDatings,t.museovirasto.selectedMuinaisjaannosDatings,"muinaisjaannosDatings"),a=Dt(a,e.ahvenanmaa.selectedLayers,t.ahvenanmaa.selectedLayers,"ahvenanmaaLayer"),a=Dt(a,e.models.selectedLayers,t.models.selectedLayers,"modelsLayer"),a=Dt(a,e.maisemanMuisti.selectedLayers,t.maisemanMuisti.selectedLayers,"maisemanMuistiLayer"),window.location.hash=Le((0,p.pi)((0,p.pi)({},a.old),a.next))}(vt,e.settings)},this.settings=function(e){var t=e,a=Ee(),n=a.zoom,i=a.mmlLayer,c=a.museovirastoLayer,m=a.muinaisjaannosTypes,d=a.muinaisjaannosDatings,h=a.ahvenanmaaLayer,k=a.modelsLayer,g=a.maisemanMuistiLayer;return void 0!==n&&(t=(0,p.pi)((0,p.pi)({},t),{initialMapZoom:n})),i&&St(r,i)&&(t=yt(t,i)),c&&(t=_t(t,s,c,ft)),m&&(t=_t(t,j,m,jt)),d&&(t=_t(t,M,d,Mt)),h&&(t=_t(t,l,h,Et)),k&&(t=_t(t,u,k,Lt)),g&&(t=_t(t,o,g,bt)),t}(vt),this.map=new le(this.settings,{featuresSelected:function(t,a,n){e.ui.featuresSelected(t,a,n)},showLoadingAnimation:function(t){e.ui.showLoadingAnimation(t)},featureSearchReady:function(t){e.ui.featureSearchReady(t)},dataLatestUpdateDatesReady:function(t){e.ui.dataLatestUpdateDatesReady(t)}}),this.ui=new At(this.settings,{searchFeatures:function(t){e.map.searchFeatures(t)},zoomIn:function(){e.map.zoomIn()},zoomOut:function(){e.map.zoomOut()},centerToCurrentPositions:function(){e.map.centerToCurrentPositions()},selectedMaanmittauslaitosLayerChanged:function(t){e.updateSettings(t),e.map.selectedMaanmittauslaitosLayerChanged(t)},selectedFeatureLayersChanged:function(t,a){e.updateSettings(t),e.map.selectedFeatureLayersChanged(t,a)},selectedMuinaisjaannosTypesChanged:function(t){e.updateSettings(t),e.map.selectedMuinaisjaannosTypesChanged(t)},selectedMuinaisjaannosDatingsChanged:function(t){e.updateSettings(t),e.map.selectedMuinaisjaannosDatingsChanged(t)},fetchDataLatestUpdateDates:function(){e.map.fetchDataLatestUpdateDates(e.settings)}}),window.onhashchange=function(){e.setMapLocationFromURLHash()},this.determineStartLocation()}}},t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={id:n,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.m=e,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={143:0},t=[[57644,551,36]],n=()=>{};function i(){for(var n,i=0;i<t.length;i++){for(var r=t[i],s=!0,l=1;l<r.length;l++){var u=r[l];0!==e[u]&&(s=!1)}s&&(t.splice(i--,1),n=a(a.s=r[0]))}return 0===t.length&&(a.x(),a.x=()=>{}),n}a.x=()=>{a.x=()=>{},s=s.slice();for(var e=0;e<s.length;e++)r(s[e]);return(n=i)()};var r=i=>{for(var r,s,[u,o,c,m]=i,p=0,d=[];p<u.length;p++)s=u[p],a.o(e,s)&&e[s]&&d.push(e[s][0]),e[s]=0;for(r in o)a.o(o,r)&&(a.m[r]=o[r]);for(c&&c(a),l(i);d.length;)d.shift()();return m&&t.push.apply(t,m),n()},s=self.webpackChunkmuinaismuistot=self.webpackChunkmuinaismuistot||[],l=s.push.bind(s);s.push=r})(),a.x()})();