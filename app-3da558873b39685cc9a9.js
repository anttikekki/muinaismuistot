!function(e){function t(t){for(var n,s,l=t[0],u=t[1],o=t[2],m=0,p=[];m<l.length;m++)s=l[m],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var u=a[l];0!==i[u]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={1:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window.webpackJsonp=window.webpackJsonp||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var c=u;r.push([516,0,3]),a()}({1:function(e,t,a){"use strict";var n,i,r,s;a.d(t,"b",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"g",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return c})),function(e){e.Maastokartta="maastokartta",e.Taustakartta="taustakartta",e.Ortokuva="ortokuva"}(i||(i={})),function(e){e["Muinaisjäännökset_piste"]="Muinaisjäännökset_piste",e["Muinaisjäännökset_alue"]="Muinaisjäännökset_alue",e.Suojellut_rakennukset_piste="Suojellut_rakennukset_piste",e.Suojellut_rakennukset_alue="Suojellut_rakennukset_alue",e.RKY_alue="RKY_alue",e.RKY_piste="RKY_piste",e.RKY_viiva="RKY_viiva",e["Maailmanperintö_piste"]="Maailmanperintö_piste",e["Maailmanperintö_alue"]="Maailmanperintö_alue"}(r||(r={})),function(e){e.Fornminnen="Fornminnen"}(s||(s={}));var l,u,o=((n={})[r.Muinaisjäännökset_piste]=0,n[r.Muinaisjäännökset_alue]=1,n[r.Suojellut_rakennukset_piste]=2,n[r.Suojellut_rakennukset_alue]=3,n[r.RKY_alue]=4,n[r.RKY_piste]=5,n[r.RKY_viiva]=6,n[r.Maailmanperintö_piste]=7,n[r.Maailmanperintö_alue]=8,n);!function(e){e["eiMääritelty"]="ei määritelty",e.alustenHylyt="alusten hylyt",e.asuinpaikat="asuinpaikat",e.hautapaikat="hautapaikat",e.kirkkorakenteet="kirkkorakenteet",e.kivirakenteet="kivirakenteet",e["kulkuväylät"]="kulkuväylät",e.kulttiJaTarinapaikat="kultti- ja tarinapaikat",e.luonnonmuodostumat="luonnonmuodostumat",e["löytöpaikat"]="löytöpaikat",e.maarakenteet="maarakenteet",e["muinaisjäännösryhmät"]="muinaisjäännösryhmät",e.puolustusvarustukset="puolustusvarustukset",e.puurakenteet="puurakenteet",e.raakaAineenHankintapaikat="raaka-aineen hankintapaikat",e.taideMuistomerkit="taide, muistomerkit",e.tapahtumapaikat="tapahtumapaikat",e.teollisuuskohteet="teollisuuskohteet",e["työJaValmistuspaikat"]="työ- ja valmistuspaikat"}(l||(l={})),function(e){e.moniperiodinen="moniperiodinen",e.esihistoriallinen="esihistoriallinen",e.kivikautinen="kivikautinen",e.varhaismetallikautinen="varhaismetallikautinen",e.pronssikautinen="pronssikautinen",e.rautakautinen="rautakautinen",e.keskiaikainen="keskiaikainen",e.historiallinen="historiallinen",e.moderni="moderni",e.ajoittamaton="ajoittamaton",e["eiMääritelty"]="ei määritelty"}(u||(u={}));var c={moniperiodinen:"",esihistoriallinen:"8600 eaa. - 1200 jaa.",kivikautinen:"8600 – 1500 eaa.",varhaismetallikautinen:"1500 eaa. - 200 jaa.",pronssikautinen:"1700 – 500 eaa.",rautakautinen:"500 eaa. - 1200 jaa.",keskiaikainen:"1200 - 1570 jaa.",historiallinen:"1200 jaa. -",moderni:"1800 jaa -",ajoittamaton:"","ei määritelty":""}},26:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return u})),a.d(t,"h",(function(){return o})),a.d(t,"a",(function(){return c})),a.d(t,"j",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"d",(function(){return d})),a.d(t,"i",(function(){return h})),a.d(t,"b",(function(){return k})),a.d(t,"k",(function(){return f})),a.d(t,"l",(function(){return g}));var n=a(1),i=function(e){return"kiinteä muinaisjäännös"===g(e.attributes.laji)},r=function(e){return"muu kulttuuriperintökohde"===g(e.attributes.laji)},s=function(e){switch(e.layerName){case n.f.Muinaisjäännökset_piste:case n.f.Muinaisjäännökset_alue:case n.f.RKY_alue:case n.f.RKY_piste:case n.f.RKY_viiva:case n.f.Suojellut_rakennukset_piste:case n.f.Suojellut_rakennukset_alue:return g(e.attributes.kohdenimi);case n.f.Maailmanperintö_piste:case n.f.Maailmanperintö_alue:return g(e.attributes.Nimi);case n.a.Fornminnen:return g(e.attributes.Namn)||g(e.attributes["Fornlämnings ID"])}},l=function(e){switch(e.layerName){case n.f.Muinaisjäännökset_piste:if(i(e))return"Kiinteä muinaisjäännös";if(r(e))return"Muu kulttuuriperintökohde";break;case n.f.Muinaisjäännökset_alue:if(i(e))return"Kiinteä muinaisjäännös (alue)";if(r(e))return"Muu kulttuuriperintökohde (alue)";break;case n.f.RKY_alue:case n.f.RKY_piste:case n.f.RKY_viiva:return"Rakennettu kulttuuriympäristö";case n.f.Maailmanperintö_piste:case n.f.Maailmanperintö_alue:return"Maailmanperintökohde";case n.f.Suojellut_rakennukset_piste:case n.f.Suojellut_rakennukset_alue:return"Rakennusperintökohde";case n.a.Fornminnen:return"Ahvenanmaan muinaisjäännösrekisterin kohde";default:return}},u=function(e,t){void 0===t&&(t=!1);var a=t?"_3d":"";switch(e.layerName){case n.f.Muinaisjäännökset_piste:if(i(e))return"images/muinaisjaannos_kohde"+a+".png";if(r(e))return"images/muu_kulttuuriperintokohde_kohde"+a+".png";break;case n.f.Muinaisjäännökset_alue:if(i(e))return"images/muinaisjaannos_alue.png";if(r(e))return"images/muu-kulttuuriperintokohde-alue.png";break;case n.f.RKY_alue:return"images/rky_alue.png";case n.f.RKY_viiva:return"images/rky_viiva.png";case n.f.RKY_piste:return"images/rky_piste.png";case n.f.Maailmanperintö_alue:return"images/maailmanperinto_alue.png";case n.f.Maailmanperintö_piste:return"images/maailmanperinto_piste.png";case n.f.Suojellut_rakennukset_alue:return"images/rakennusperintorekisteri_alue.png";case n.f.Suojellut_rakennukset_piste:return"images/rakennusperintorekisteri_rakennus.png";case n.a.Fornminnen:return"images/ahvenanmaa_muinaisjaannos.png";default:return}},o=function(e){switch(e){case n.f.Muinaisjäännökset_piste:return["images/muinaisjaannos_kohde.png","images/muu_kulttuuriperintokohde_kohde.png"];case n.f.Muinaisjäännökset_alue:return["images/muinaisjaannos_alue.png","images/muu-kulttuuriperintokohde-alue.png"];case n.f.RKY_alue:return["images/rky_alue.png"];case n.f.RKY_viiva:return["images/rky_viiva.png"];case n.f.RKY_piste:return["images/rky_piste.png"];case n.f.Maailmanperintö_alue:return["images/maailmanperinto_alue.png"];case n.f.Maailmanperintö_piste:return["images/maailmanperinto_piste.png"];case n.f.Suojellut_rakennukset_alue:return["images/rakennusperintorekisteri_alue.png"];case n.f.Suojellut_rakennukset_piste:return["images/rakennusperintorekisteri_rakennus.png"];case n.a.Fornminnen:return["images/ahvenanmaa_muinaisjaannos.png"]}},c=function(e){switch(e.layerName){case n.f.Muinaisjäännökset_piste:case n.f.Muinaisjäännökset_alue:case n.f.RKY_alue:case n.f.RKY_viiva:case n.f.RKY_piste:case n.f.Maailmanperintö_alue:case n.f.Maailmanperintö_piste:case n.f.Suojellut_rakennukset_alue:case n.f.Suojellut_rakennukset_piste:case n.a.Fornminnen:return e.attributes.OBJECTID}},m=function(e,t){var a;switch(e.layerName){case n.f.Muinaisjäännökset_piste:case n.f.Muinaisjäännökset_alue:a=e.attributes.mjtunnus}return t?t.filter((function(t){return t.registryItem.type===e.layerName})).filter((function(e){return e.registryItem.id.toString()===a})):[]},p=function(e){switch(e.layerName){case n.f.Muinaisjäännökset_piste:case n.f.Muinaisjäännökset_alue:case n.f.Suojellut_rakennukset_alue:case n.f.Suojellut_rakennukset_piste:return"https://"+e.attributes.url;case n.f.RKY_alue:case n.f.RKY_viiva:case n.f.RKY_piste:return e.attributes.url;case n.f.Maailmanperintö_alue:case n.f.Maailmanperintö_piste:return function(e){var t=e.attributes.URL;if(t.startsWith("http://www.nba.fi/fi/ajankohtaista/kansainvalinen_toiminta/maailmanperintokohteet_suomessa")){var a=t.indexOf("#"),n="";-1!==a&&(n=t.substring(a)),t="https://www.museovirasto.fi/fi/tietoa-meista/kansainvalinen-toiminta/maailmanperintokohteet-suomessa"+n}return t}(e);case n.a.Fornminnen:return function(e){switch(e.attributes["Fornlämnings ID"].substring(0,2)){case"Br":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/BR%c3%84ND%c3%96.pdf";case"Ec":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/ECKER%c3%96.pdf";case"Fö":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/F%c3%96GL%c3%96.pdf";case"Fi":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/FINSTR%c3%96M.pdf";case"Ge":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/GETA.pdf";case"Ha":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/HAMMARLAND.pdf";case"Jo":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/JOMALA.pdf";case"Kö":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/K%c3%96KAR.pdf";case"Ku":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/KUMLINGE.pdf";case"Le":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/LEMLAND.pdf";case"Lu":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/LUMPARLAND.pdf";case"Ma":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/MARIEHAMN.pdf";case"Sa":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SALTVIK.pdf";case"So":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SOTTUNGA.pdf";case"Su":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SUND.pdf";case"Vå":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/V%c3%85RD%c3%96.pdf"}}(e)}},d=function(e){switch(e.layerName){case n.f.Muinaisjäännökset_piste:case n.f.Muinaisjäännökset_alue:return"Muinaisjäännösrekisteristä";case n.f.RKY_alue:case n.f.RKY_viiva:case n.f.RKY_piste:return"rky.fi rekisteristä";case n.f.Maailmanperintö_alue:case n.f.Maailmanperintö_piste:return"Museoviraston sivuilta";case n.f.Suojellut_rakennukset_alue:case n.f.Suojellut_rakennukset_piste:return"rakennusperintörekisteristä";case n.a.Fornminnen:return"Ahvenamaan muinaisjäännösrekisteri"}},h=function(e){switch(e){case n.f.Muinaisjäännökset_piste:case n.f.Muinaisjäännökset_alue:return"Muinaisjäännösrekisteri";case n.f.RKY_alue:case n.f.RKY_viiva:case n.f.RKY_piste:return"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt";case n.f.Maailmanperintö_alue:case n.f.Maailmanperintö_piste:return"Maailmanperintökohteet";case n.f.Suojellut_rakennukset_alue:case n.f.Suojellut_rakennukset_piste:return"Rakennusperintörekisteri";case n.a.Fornminnen:return"Ahvenamaan muinaisjäännösrekisteri"}},k=function(e){switch(e.geometryType){case"esriGeometryPolygon":return e.geometry.rings[0][0];case"esriGeometryPoint":return[e.geometry.x,e.geometry.y];case"esriGeometryPolyline":return e.geometry.paths[0][0]}},f=function(e){return n.d[e]},g=function(e){if(null==e)return"";if("null"===(e=e.trim()).toLowerCase())return"";for(;","===e.substr(e.length-1,1);)e=e.substring(0,e.length-1).trim();return e}},510:function(e,t,a){var n=a(208),i=a(511);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1},s=(n(i,r),i.locals?i.locals:{});e.exports=s},511:function(e,t,a){(t=a(209)(!1)).push([e.i,"html,\nbody,\n#map {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n#map {\n  z-index: 10;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n}\n\n#loading-animation {\n  z-index: 25;\n  position: absolute;\n  top: 15px;\n  right: 20px;\n}\n\n.map-button {\n  z-index: 15;\n  position: absolute;\n}\n\n#map-button-zoom-in {\n  top: 20px;\n  left: 20px;\n}\n\n#map-button-zoom-out {\n  top: 60px;\n  left: 20px;\n}\n\n#map-button-position {\n  top: 100px;\n  left: 20px;\n}\n\n#map-button-search {\n  top: 140px;\n  left: 20px;\n}\n\n#map-button-info {\n  top: 180px;\n  left: 20px;\n}\n\n#map-button-settings {\n  top: 220px;\n  left: 20px;\n}\n\n.page {\n  z-index: 20;\n  position: absolute;\n  top: 0px;\n  background-color: #fff;\n  height: 100%;\n  width: 100%;\n}\n\n.pageHeader {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.pageHeaderText {\n  font-size: 20px;\n  font-weight: 500;\n}\n\n.pageContent {\n  height: 90%;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.page-right-visible {\n  -webkit-transition: right 0.5s ease;\n  -moz-transition: right 0.5s ease;\n  -o-transition: right 0.5s ease;\n  transition: right 0.5s ease;\n  right: 0px;\n}\n\n.page-right-closing {\n  -webkit-transition: right 0.5s ease;\n  -moz-transition: right 0.5s ease;\n  -o-transition: right 0.5s ease;\n  transition: right 0.5s ease;\n  right: -100%;\n}\n\n.page-right-hidden {\n  right: -100%;\n  width: 0px;\n}\n\n@media (min-width: 768px) {\n  .page {\n  }\n  .page-right-hidden {\n  }\n}\n\n@media (min-width: 992px) {\n  .page {\n    width: 500px;\n  }\n  .page-right-closing {\n    right: -500px;\n  }\n}\n\n@media (min-width: 1200px) {\n  .page {\n    width: 600px;\n  }\n  .page-right-closing {\n    right: -600px;\n  }\n}\n\n@media (min-width: 1400px) {\n  .page {\n    width: 700px;\n  }\n  .page-right-closing {\n    right: -700px;\n  }\n}\n\n.sub-layer-select-checkbox-container {\n  margin-left: 20px;\n}\n\n.feature-collapse-panel-heading h6 {\n  font-size: 14px;\n  line-height: 1.3;\n  margin-top: 5px;\n  font-weight: 400;\n}\n\n.feature-icon {\n  margin-right: 5px;\n}\n",""]),e.exports=t},516:function(e,t,a){"use strict";a.r(t);a(211),a(253),a(500);var n,i=a(210),r=a(258),s=a(178),l=a(257),u=a(6),o=a(43),c=a(256),m=a(101),p=a(260),d=a(114),h=a(1),k=function(e,t,a){var n=this;this.loadMMLWmtsCapabilitiesAndAddLayers=function(e){fetch("https://avoin-karttakuva.maanmittauslaitos.fi/avoin/wmts/1.0.0/WMTSCapabilities.xml").then((function(e){return e.text()})).then((function(t){return n.addWmtsLayers(t,e)}))},this.addWmtsLayers=function(e,t){var a=(new p.a).read(e);n.maastokarttaLayerSource=new d.a(Object(d.b)(a,{layer:h.b.Maastokartta})),n.taustakarttaLayerSource=new d.a(Object(d.b)(a,{layer:h.b.Taustakartta})),n.ortokuvaLayerSource=new d.a(Object(d.b)(a,{layer:h.b.Ortokuva}));var i=t.selectedMaanmittauslaitosLayer;n.mmlMaastokarttaLayer=new m.a({source:n.maastokarttaLayerSource,visible:i===h.b.Maastokartta}),n.mmlTaustakarttaLayer=new m.a({source:n.taustakarttaLayerSource,visible:i===h.b.Taustakartta}),n.mmlOrtokuvaLayer=new m.a({source:n.ortokuvaLayerSource,visible:i===h.b.Ortokuva}),n.updateLoadingAnimationOnLayerSourceTileLoad(n.maastokarttaLayerSource),n.updateLoadingAnimationOnLayerSourceTileLoad(n.taustakarttaLayerSource),n.updateLoadingAnimationOnLayerSourceTileLoad(n.ortokuvaLayerSource),n.onLayersCreatedCallbackFn(n.mmlMaastokarttaLayer,n.mmlTaustakarttaLayer,n.mmlOrtokuvaLayer)},this.updateLoadingAnimationOnLayerSourceTileLoad=function(e){e.on("tileloadstart",(function(e){n.showLoadingAnimationFn(!0)})),e.on("tileloadend",(function(e){n.showLoadingAnimationFn(!1)})),e.on("tileloaderror",(function(e){n.showLoadingAnimationFn(!1)}))},this.selectedMaanmittauslaitosLayerChanged=function(e){if(n.mmlMaastokarttaLayer&&n.mmlTaustakarttaLayer&&n.mmlOrtokuvaLayer){var t=e.selectedMaanmittauslaitosLayer;n.mmlMaastokarttaLayer.setVisible(t===h.b.Maastokartta),n.mmlTaustakarttaLayer.setVisible(t===h.b.Taustakartta),n.mmlOrtokuvaLayer.setVisible(t===h.b.Ortokuva)}},this.showLoadingAnimationFn=t,this.onLayersCreatedCallbackFn=a,this.loadMMLWmtsCapabilitiesAndAddLayers(e)},f=a(166),g=a(2),v=function(e,t){var a=this;this.addLayer=function(){a.source=a.createSource(),a.layer=new m.a({source:a.source,extent:[65741.9087,6606901.2261,180921.4173,6747168.5691]}),a.layer.setOpacity(.7),a.onLayerCreatedCallbackFn(a.layer)},this.createSource=function(){var e=new f.a({urls:["https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/export"],params:{layers:"show:1"}});return e.on("tileloadstart",(function(e){a.showLoadingAnimationFn(!0)})),e.on("tileloadend",(function(e){a.showLoadingAnimationFn(!1)})),e.on("tileloaderror",(function(e){a.showLoadingAnimationFn(!1)})),e},this.identifyFeaturesAt=function(e,t,n){if(!a.layer||!Object(g.f)(a.layer.getExtent(),e))return Promise.resolve({results:[]});var i=new URLSearchParams({geometry:e.join(","),geometryType:"esriGeometryPoint",tolerance:"10",imageDisplay:t.join(",")+",96",mapExtent:n.join(","),layers:"visible:1",f:"json",returnGeometry:"true"}),r=new URL("https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/identify");return r.search=String(i),fetch(String(r)).then((function(e){return e.json()}))},this.findFeatures=function(e){var t=new URLSearchParams({searchText:e,contains:"true",searchFields:"Namn , Beskrivning, Topografi",layers:"1",f:"json",returnGeometry:"true",returnZ:"false"}),a=new URL("https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/find");return a.search=String(t),fetch(String(a)).then((function(e){return e.json()}))},this.getDataLatestUpdateDate=function(){return a.dataLatestUpdateDate?Promise.resolve(a.dataLatestUpdateDate):fetch("https://opendata.arcgis.com/api/v3/datasets?filter%5Bslug%5D=aland%3A%3Afornminnen").then((function(e){return e.json()})).then(a.parseUpdatedDate)},this.parseUpdatedDate=function(e){var t,n,i,r=null===(t=e)||void 0===t?void 0:t.data,s=Array.isArray(r)&&r.length>0?null===(i=null===(n=r[0])||void 0===n?void 0:n.attributes)||void 0===i?void 0:i.modified:void 0;return s?(a.dataLatestUpdateDate=new Date(s),Promise.resolve(a.dataLatestUpdateDate)):Promise.reject(new Error("Ahvenanmaan updated date not found"))},this.showLoadingAnimationFn=e,this.onLayerCreatedCallbackFn=t,this.addLayer()},y=function(e,t,a){var n=this;this.addLayer=function(){n.source=n.createSource(),n.layer=new m.a({source:n.source}),n.layer.setOpacity(.7),n.onLayerCreatedCallbackFn(n.layer)},this.createSource=function(){var e=new f.a({urls:["https://d3u1wj9fwedfoy.cloudfront.net"],params:{layers:n.getSourceLayerSelectionSettings(),layerDefs:n.getSourceLayerDefinitionFilterParams()}});return e.on("tileloadstart",(function(e){n.showLoadingAnimationFn(!0)})),e.on("tileloadend",(function(e){n.showLoadingAnimationFn(!1)})),e.on("tileloaderror",(function(e){n.showLoadingAnimationFn(!1)})),e},this.updateMuinaismuistotLayerSource=function(){n.layer&&(n.source=n.createSource(),n.layer.setSource(n.source))},this.getSourceLayerSelectionSettings=function(){var e=Object.values(h.f);if(e.length!==n.settings.selectedMuseovirastoLayers.length){var t=n.toLayerIds(n.settings.selectedMuseovirastoLayers);return t.length>0?"show:"+t.join(","):"hide:"+n.toLayerIds(e).join(",")}},this.getSourceLayerDefinitionFilterParams=function(){var e=[],t=n.settings.selectedMuinaisjaannosTypes;if(t.length>0&&t.length!=Object.values(h.e).length){var a=t.sort().map((function(e){return"tyyppi LIKE '%"+e+"%'"})).join(" OR ");e.push("("+a+")")}var i=n.settings.selectedMuinaisjaannosDatings;if(i.length>0&&i.length!=Object.values(h.c).length&&(a=i.sort().map((function(e){return"ajoitus LIKE '%"+e+"%'"})).join(" OR "),e.push("("+a+")")),e.length>0)return h.g[h.f.Muinaisjäännökset_piste]+":"+e.join(" AND ")},this.toLayerIds=function(e){return e.map((function(e){return h.g[e]})).sort()},this.selectedFeatureLayersChanged=function(e){n.settings=e,n.updateMuinaismuistotLayerSource()},this.selectedMuinaisjaannosTypesChanged=function(e){n.settings=e,n.updateMuinaismuistotLayerSource()},this.selectedMuinaisjaannosDatingsChanged=function(e){n.settings=e,n.updateMuinaismuistotLayerSource()},this.identifyFeaturesAt=function(e,t,a){var i=new URLSearchParams({geometry:e.join(","),geometryType:"esriGeometryPoint",tolerance:"10",imageDisplay:t.join(",")+",96",mapExtent:a.join(","),layers:"visible:"+n.toLayerIds(n.settings.selectedMuseovirastoLayers).join(","),f:"json",returnGeometry:"true"}),r=new URL("https://d3t293l8mhxosa.cloudfront.net");return r.search=String(i),fetch(String(r)).then((function(e){return e.json()}))},this.findFeatures=function(e){var t=n.settings.selectedMuseovirastoLayers;t.includes(h.f.Muinaisjäännökset_alue)&&(t=t.filter((function(e){return e!==h.f.Muinaisjäännökset_alue})));var a=new URLSearchParams({searchText:e,contains:"true",searchFields:"Kohdenimi, Nimi, KOHDENIMI",layers:n.toLayerIds(t).join(","),f:"json",returnGeometry:"true",returnZ:"false"}),i=new URL("https://d3239kmqvyt2db.cloudfront.net");return i.search=String(a),fetch(String(i)).then((function(e){return e.json()}))},this.getDataLatestUpdateDate=function(){return n.dataLatestUpdateDate?Promise.resolve(n.dataLatestUpdateDate):fetch("https://dkfgv6jxivsxz.cloudfront.net/MV_inspire_atom.xml").then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml")})).then(n.parseSuunnitteluaineistoUpdatedDate)},this.parseSuunnitteluaineistoUpdatedDate=function(e){var t;return e.querySelectorAll("entry").forEach((function(e){var a,n;"http://paikkatieto.nba.fi/aineistot/suunnitteluaineisto"===(null===(a=e.querySelector("id"))||void 0===a?void 0:a.textContent)&&(t=null===(n=e.querySelector("updated"))||void 0===n?void 0:n.textContent)})),t?(n.dataLatestUpdateDate=new Date(t),Promise.resolve(n.dataLatestUpdateDate)):Promise.reject(new Error("Museovirasto updated date not found"))},this.settings=e,this.showLoadingAnimationFn=t,this.onLayerCreatedCallbackFn=a,this.addLayer()},E=a(175),b=a(177),j=a(121),w=a(89),L=a(111),M=a(100),_=a(261),S=a(140),C=a(73),D=function(e){var t=this;this.addCurrentPositionMarker=function(e){if(t.currentPositionFeature)t.currentPositionFeature.setGeometry(new C.a(e));else{var a=new j.a({color:"rgba(0, 0, 255, 1.0)"}),n=new w.a({color:"rgba(255, 255, 255, 1.0)",width:3});t.currentPositionFeature=new S.a({geometry:new C.a(e)}),t.currentPositionFeature.setStyle(new M.b({image:new L.a({fill:a,stroke:n,radius:7}),fill:a,stroke:n})),t.source.addFeature(t.currentPositionFeature)}},this.addSelectedLocationFeatureMarker=function(e){t.selectedLocationFeature?t.selectedLocationFeature.setGeometry(new C.a(e)):(t.selectedLocationFeature=new S.a({geometry:new C.a(e)}),t.selectedLocationFeature.setStyle(new M.b({image:new _.a({src:"images/map-pin.png"})})),t.source.addFeature(t.selectedLocationFeature))},this.onLayerCreatedCallbackFn=e,this.source=new b.a({}),this.layer=new E.a({source:this.source}),this.onLayerCreatedCallbackFn(this.layer)},N=a(33),O=a(259),x=function(e){var t=this;this.fetchGeoJson=function(){return Object(N.b)(t,void 0,void 0,(function(){return Object(N.c)(this,(function(e){switch(e.label){case 0:return[4,fetch("./3d/3d.json")];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},this.addFeaturesToLayer=function(e){t.source=new b.a({features:(new O.a).readFeatures(e)}),t.layer=new E.a({source:t.source,style:t.style}),t.onLayerCreatedCallbackFn(t.layer)},this.getLayer=function(){return t.layer},this.getDataLatestUpdateDate=function(){return Object(N.b)(t,void 0,void 0,(function(){var e,t;return Object(N.c)(this,(function(a){switch(a.label){case 0:return this.dataLatestUpdateDate?[2,Promise.resolve(this.dataLatestUpdateDate)]:[4,this.fetchGeoJson()];case 1:return e=a.sent(),t=e.features.map((function(e){return new Date(e.properties.createdDate).getTime()})),t=Array.from(new Set(t)),[2,new Date(Math.max.apply(null,t))]}}))}))},this.onLayerCreatedCallbackFn=e,this.style=new M.b({image:new L.a({stroke:new w.a({color:"black",width:2}),radius:7})}),this.fetchGeoJson().then(this.addFeaturesToLayer)},T=function(e,t){var a=this;this.loadFeaturesOnClickedCoordinate=function(e){a.eventListeners.showLoadingAnimation(!0);var t=a.ahvenanmaaTileLayer.identifyFeaturesAt(e.coordinate,a.map.getSize(),a.map.getView().calculateExtent(a.map.getSize())),n=a.museovirastoTileLayer.identifyFeaturesAt(e.coordinate,a.map.getSize(),a.map.getView().calculateExtent(a.map.getSize())),i=a.map.getFeaturesAtPixel(e.pixel,{layerFilter:function(e){return e===a.modelsLayer.getLayer()},hitTolerance:10}).map((function(e){return e.getProperties()}));Promise.all([t,n]).then((function(e){var t=e[0],n=e[1];a.eventListeners.showLoadingAnimation(!1);var r=t.results.concat(n.results);a.eventListeners.featuresSelected(r,i)}))},this.initGeolocation=function(){a.geolocation=new c.a({projection:a.view.getProjection(),tracking:!0,trackingOptions:{enableHighAccuracy:!0}}),a.geolocation.once("change:position",a.centerToCurrentPositions),a.geolocation.on("change:position",a.geolocationChanged)},this.geolocationChanged=function(){if(a.geolocation&&a.geolocation.getPosition()){var e=a.geolocation.getPosition();a.positionAndSelectedLocation.addCurrentPositionMarker(e)}},this.zoom=function(e){a.view.animate({zoom:a.view.getZoom()+e,duration:250})},this.selectedFeatureLayersChanged=function(e){a.museovirastoTileLayer.selectedFeatureLayersChanged(e)},this.selectedMuinaisjaannosTypesChanged=function(e){a.museovirastoTileLayer.selectedMuinaisjaannosTypesChanged(e)},this.selectedMuinaisjaannosDatingsChanged=function(e){a.museovirastoTileLayer.selectedMuinaisjaannosDatingsChanged(e)},this.searchFeatures=function(e){a.eventListeners.showLoadingAnimation(!0);var t=a.ahvenanmaaTileLayer.findFeatures(e),n=a.museovirastoTileLayer.findFeatures(e);Promise.all([t,n]).then((function(e){var t=e[0],n=e[1];a.eventListeners.showLoadingAnimation(!1);var i=t.results.concat(n.results);a.eventListeners.featureSearchReady(i)}))},this.selectedMaanmittauslaitosLayerChanged=function(e){a.maanmittauslaitosTileLayer.selectedMaanmittauslaitosLayerChanged(e)},this.setMapLocation=function(e){a.view.setCenter(e)},this.centerToCurrentPositions=function(){if(a.geolocation&&a.geolocation.getPosition()){var e=a.geolocation.getPosition();a.view.setCenter(e)}else a.initGeolocation()},this.showSelectedLocationMarker=function(e){a.positionAndSelectedLocation.addSelectedLocationFeatureMarker(e)},this.zoomIn=function(){a.zoom(1)},this.zoomOut=function(){a.zoom(-1)},this.fetchDataLatestUpdateDates=function(){Promise.all([a.museovirastoTileLayer.getDataLatestUpdateDate(),a.ahvenanmaaTileLayer.getDataLatestUpdateDate(),a.modelsLayer.getDataLatestUpdateDate()]).then((function(e){var t=e[0],n=e[1],i=e[2];a.eventListeners.dataLatestUpdateDatesReady({museovirasto:n,ahvenanmaa:t,models:i})})).catch((function(){return a.eventListeners.dataLatestUpdateDatesReady({museovirasto:null,ahvenanmaa:null,models:null})}))},this.eventListeners=t,i.a.defs("EPSG:3067","+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Object(l.a)(i.a),Object(u.i)("EPSG:3067").setExtent([50199.4814,6582464.0358,761274.6247,7799839.8902]),this.view=new s.a({center:[385249.63630000036,6672695.7579],projection:"EPSG:3067",zoom:8}),this.map=new r.a({target:"map",view:this.view,controls:new o.a}),this.maanmittauslaitosTileLayer=new k(e,t.showLoadingAnimation,(function(e,t,n){a.map.getLayers().insertAt(0,e),a.map.getLayers().insertAt(1,t),a.map.getLayers().insertAt(2,n)})),this.ahvenanmaaTileLayer=new v(t.showLoadingAnimation,(function(e){a.map.getLayers().insertAt(3,e)})),this.museovirastoTileLayer=new y(e,t.showLoadingAnimation,(function(e){a.map.getLayers().insertAt(4,e)})),this.positionAndSelectedLocation=new D((function(e){a.map.getLayers().insertAt(5,e)})),this.modelsLayer=new x((function(e){a.map.getLayers().insertAt(6,e)})),this.map.on("singleclick",this.loadFeaturesOnClickedCoordinate)},A=(a(254),a(510),a(0)),P=a(174),F=function(e){var t=e.visible;return A.createElement("div",{id:"loading-animation",className:t?"":"hidden"},A.createElement("img",{src:"images/loading.gif"}))},K=function(e){var t=e.onClick;return A.createElement("div",{id:"map-button-zoom-in",className:"map-button"},A.createElement("button",{type:"button",className:"btn btn-primary",title:"Lähennä",onClick:t},A.createElement("span",{className:"glyphicon glyphicon-plus","aria-hidden":"true"})))},R=function(e){var t=e.onClick;return A.createElement("div",{id:"map-button-zoom-out",className:"map-button"},A.createElement("button",{type:"button",className:"btn btn-primary",title:"Loitonna",onClick:t},A.createElement("span",{className:"glyphicon glyphicon-minus","aria-hidden":"true"})))},U=function(e){var t=e.onClick;return A.createElement("div",{id:"map-button-position",className:"map-button"},A.createElement("button",{type:"button",className:"btn btn-primary",title:"Keskitä kartta nykyiseen sijaintiisi",onClick:t},A.createElement("span",{className:"glyphicon glyphicon-screenshot","aria-hidden":"true"})))},I=function(e){var t=e.onClick;return A.createElement("div",{id:"map-button-info",className:"map-button"},A.createElement("button",{type:"button",className:"btn btn-primary",title:"Ohjeita sivuston käyttöön",onClick:t},A.createElement("span",{className:"glyphicon glyphicon-info-sign","aria-hidden":"true"})))},Y=a(26),z=function(e){return"#x="+e[0]+";y="+e[1]},H=function(){var e=window.location.hash.replace("#","").replace("x=","").replace("y=","").split(";");if(2!==e.length)return null;var t=parseFloat(e[0]),a=parseFloat(e[1]);return isNaN(t)||isNaN(a)?null:[t,a]},V=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.has3dModels,r=e.children,s=Object(Y.b)(n),l=s&&z(s),u=function(e){e.preventDefault(),a()};return A.createElement("div",{className:"panel panel-default"},A.createElement("div",{className:"panel-heading feature-collapse-panel-heading",role:"tab"},A.createElement("h4",{className:"panel-title"},A.createElement("a",{role:"button",href:"",onClick:u},Object(Y.c)(n)),A.createElement("a",{className:"pull-right",href:l},A.createElement("span",{className:"glyphicon glyphicon-link","aria-hidden":"true"}))),A.createElement("h6",{className:"panel-title"},A.createElement("a",{role:"button",href:"",onClick:u},A.createElement("img",{className:"feature-icon",src:Object(Y.f)(n,i)}),A.createElement("span",null,Object(Y.g)(n))))),A.createElement("div",{className:"panel-collapse collapse "+(t?"in":""),role:"tabpanel"},A.createElement("div",{className:"panel-body"},r)))},G=function(e){var t=e.label,a=e.value,n=e.children,i=Object(Y.l)(a);return n||i?A.createElement("div",{className:"form-group"},A.createElement("label",null,t),n||A.createElement("p",null,i)):null},J=function(e){var t=e.feature,a=Object(Y.k)(t.attributes.ajoitus);return a?A.createElement("span",{className:"label label-default"},a):null},B=function(e){var t=e.feature,a=Object(Y.e)(t),n=Object(Y.d)(t);return a?A.createElement("p",null,"Lisää tietoa kohteesta Museoviraston"," ",A.createElement("a",{href:a,target:"_blank"},n),"."):null},W=function(){var e=A.useState(!1),t=e[0],a=e[1];return A.createElement("div",{className:"panel panel-default"},A.createElement("div",{className:"panel-heading feature-collapse-panel-heading",role:"tab"},A.createElement("a",{role:"button",href:"",onClick:function(e){e.preventDefault(),a(!t)}},A.createElement("span",{className:"glyphicon glyphicon-info-sign","aria-hidden":"true"})," ","Lisätietoa 3D-malleista")),A.createElement("div",{className:"panel-collapse collapse "+(t?"in":""),role:"tabpanel"},A.createElement("div",{className:"panel-body"},A.createElement("p",null,"Nämä 3D-mallit ovat"," ",A.createElement("a",{href:"./3d/",target:"_blank"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia"," ",A.createElement("a",{href:"https://sketchfab.com",target:"_blank"},"Sketchfab")," ","-palvelusta."),A.createElement("p",null,"Mallit saa käynnistettyä nuolipainikkeesta. Käynnistymisen jälkeen mallin saa koko ruudun tilaan oikean alareunan"," ",A.createElement("img",{src:"images/sketchfab-fullscreen.png"})," painikkeesta tai painamalla näppäimistöltä ",A.createElement("kbd",null,"f")," painiketta."),A.createElement("p",null,"Mallin ohjaus:",A.createElement("ul",null,A.createElement("li",null,A.createElement("b",null,"Kääntäminen:")," pidä vasen hiirenpainike pohjaan painettuna ja liikuta hiirtä. Kosketusnäytöillä pidä sormi painettuna ja liikuta sormea."),A.createElement("li",null,A.createElement("b",null,"Suurennus ja pienennys:")," käytä hiiren rullaa. Kosketusnäytöillä käytä kahden sormen nipistyselettä."),A.createElement("li",null,A.createElement("b",null,"Kohdistuksen siirtäminen:")," pidä oikea hiirenpainike pohjaan painettuna ja liikuta hiirtä. Kosketusnäytöillä pidä kaksi sormea painettuna ja liikuta sormia."))))))},q=function(e){var t=e.models,a=void 0===t?[]:t;return 0===a.length?null:A.createElement(A.Fragment,null,A.createElement("h4",null,"Kohteen 3D-mallit"),A.createElement(W,null),a.map((function(e){return A.createElement("div",{className:"form-group"},A.createElement("label",null,e.model.name),A.createElement("iframe",{title:e.model.name,width:"100%",height:"400",src:e.model.url+"/embed",allow:"fullscreen",allowFullScreen:!0}))})))},Z=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return A.createElement(V,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},A.createElement("form",null,A.createElement(G,{label:"Kohdenimi",value:n.attributes.kohdenimi}),A.createElement(G,{label:"Kunta",value:n.attributes.kunta}),A.createElement(G,{label:"Ajoitus"},A.createElement("p",null,A.createElement("span",null,Object(Y.l)(n.attributes.ajoitus)),A.createElement(J,{feature:n}))),A.createElement(G,{label:"Tyyppi",value:n.attributes.tyyppi}),A.createElement(G,{label:"Alatyyppi",value:n.attributes.alatyyppi}),A.createElement(G,{label:"Laji",value:n.attributes.laji}),A.createElement(B,{feature:n}),t&&A.createElement(A.Fragment,null,A.createElement("br",null),A.createElement(q,{models:r}))))},Q=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return A.createElement(V,{isOpen:t,onToggleOpen:a,feature:n},A.createElement("form",null,A.createElement(G,{label:"Kohdenimi",value:n.attributes.kohdenimi}),A.createElement(G,{label:"Kunta",value:n.attributes.kunta}),A.createElement(G,{label:"Laji",value:n.attributes.laji}),A.createElement(B,{feature:n})))},X=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return A.createElement(V,{isOpen:t,onToggleOpen:a,feature:n},A.createElement("form",null,A.createElement(G,{label:"Kohdenimi",value:n.attributes.kohdenimi}),n.layerName===h.f.RKY_alue&&A.createElement(G,{label:"Nimi",value:n.attributes.nimi}),A.createElement(B,{feature:n})))},$=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return A.createElement(V,{isOpen:t,onToggleOpen:a,feature:n},A.createElement("form",null,A.createElement(G,{label:"Kohdenimi",value:n.attributes.Nimi}),A.createElement(B,{feature:n})))},ee=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return A.createElement(V,{isOpen:t,onToggleOpen:a,feature:n},A.createElement("form",null,A.createElement(G,{label:"Kohdenimi",value:n.attributes.kohdenimi}),n.layerName==h.f.Suojellut_rakennukset_piste&&A.createElement(G,{label:"Rakennusnimi",value:n.attributes.rakennusnimi}),A.createElement(G,{label:"Kunta",value:n.attributes.kunta}),A.createElement(G,{label:"Suojeluryhmä",value:n.attributes.suojeluryhmä}),A.createElement(B,{feature:n})))},te=function(e){var t=e.feature,a=Object(Y.e)(t);return a?A.createElement("p",null,"Lisää tietoa kohteesta löytyy"," ",A.createElement("a",{href:a,target:"_blank"},"kuntakohtaisesta Pdf-tiedostosta"),", josta voit etsiä kohteen tunnisteella"," ",A.createElement("span",{className:"label label-default"},t.attributes["Fornlämnings ID"]),"."):null},ae=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return A.createElement(V,{isOpen:t,onToggleOpen:a,feature:n},A.createElement("form",null,A.createElement(G,{label:"Nimi",value:n.attributes.Namn}),A.createElement(G,{label:"Kunta",value:n.attributes.Kommun}),A.createElement(G,{label:"Kylä",value:n.attributes.By}),A.createElement(G,{label:"Kuvaus",value:n.attributes.Beskrivning}),A.createElement(G,{label:"Sijainti",value:n.attributes.Topografi}),A.createElement(G,{label:"Tunniste",value:n.attributes["Fornlämnings ID"]}),A.createElement(te,{feature:n})))};!function(e){e.Visible="Visible",e.Closing="Closing",e.Hidden="Hidden"}(n||(n={}));var ne,ie=function(e){var t=e.title,a=e.visibility,i=e.hidePage,r=e.children,s="";switch(a){case n.Visible:s="page-right-visible";break;case n.Closing:s="page-right-closing";break;case n.Hidden:s="page-right-hidden"}return A.createElement("div",{className:"container page "+s},a!==n.Hidden&&A.createElement("div",{className:"row pageHeader"},A.createElement("div",{className:"col-xs-3"},A.createElement("button",{className:"btn btn-primary btn-sm",onClick:i},A.createElement("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"}),"Sulje")),A.createElement("div",{className:"col-xs-9"},A.createElement("span",{className:"pageHeaderText"},t))),a!==n.Hidden&&A.createElement("div",{className:"pageContent"},r))},re=function(e){var t=e.feature,a=e.id,n=e.onTogglePanelOpen,i=e.openPanelId,r=e.models,s={isOpen:i===a,onToggleOpen:function(){return n(a)},models:Object(Y.j)(t,r)};switch(t.layerName){case"Muinaisjäännökset_piste":return A.createElement(Z,Object(N.a)({feature:t},s));case"Muinaisjäännökset_alue":return A.createElement(Q,Object(N.a)({feature:t},s));case"RKY_alue":case"RKY_viiva":case"RKY_piste":return A.createElement(X,Object(N.a)({feature:t},s));case"Maailmanperintö_alue":case"Maailmanperintö_piste":return A.createElement($,Object(N.a)({feature:t},s));case"Suojellut_rakennukset_alue":case"Suojellut_rakennukset_piste":return A.createElement(ee,Object(N.a)({feature:t},s));case"Fornminnen":return A.createElement(ae,Object(N.a)({feature:t},s))}return null},se=function(e){return e.layerName+"-"+Object(Y.a)(e)},le=function(e){var t=e.visibility,a=e.hidePage,n=e.features,i=e.models,r=A.useState(""),s=r[0],l=r[1],u=function(e){return l(s===e?"":e)};return A.createElement(ie,{title:"Valitut kohteet",visibility:t,hidePage:a},A.createElement("div",{className:"panel-group",role:"tablist","aria-multiselectable":"true"}),n&&n.map((function(e){return A.createElement(re,{key:se(e),id:se(e),feature:e,onTogglePanelOpen:u,openPanelId:s,models:i})})))},ue=function(e){var t=e.hidePage,a=e.feature,n=Object(Y.c)(a),i=Object(Y.g)(a),r=Object(Y.f)(a),s=Object(Y.b)(a),l=s&&z(s);return A.createElement("a",{href:l,className:"list-group-item search-result-row",onClick:t},A.createElement("h4",{className:"list-group-item-heading"},n),A.createElement("p",{className:"list-group-item-text"},A.createElement("img",{className:"feature-icon",src:r}),A.createElement("span",null,i)))},oe=function(e){var t=e.hidePage,a=e.features;return a?A.createElement(A.Fragment,null,A.createElement("h5",{id:"search-result-header"},A.createElement("span",null,"Hakutulokset"),A.createElement("small",null," (",a.length," kpl)")),A.createElement("div",{className:"list-group"},a.map((function(e){return A.createElement(ue,{key:e.layerName+"-"+Object(Y.a)(e),feature:e,hidePage:t})})))):null},ce=function(){return A.createElement("div",{className:"alert alert-danger",role:"alert"},"Hakusanan pitää olla vähintään kolme merkkiä")},me=function(e){var t=e.visibility,a=e.hidePage,n=e.searchFeatures,i=e.searchResultFeatures,r=A.useState(""),s=r[0],l=r[1],u=A.useState(!1),o=u[0],c=u[1];return A.createElement(ie,{title:"Hae kohteita",visibility:t,hidePage:a},A.createElement("form",{className:o?"has-error":void 0,onSubmit:function(e){e.stopPropagation(),e.preventDefault(),s.trim().length<3?c(!0):(c(!1),n(s))}},o&&A.createElement(ce,null),A.createElement("div",{className:"input-group"},A.createElement("input",{type:"text",className:"form-control",placeholder:"Kirjoita kohteen nimi tai sen osa",value:s,onChange:function(e){return l(e.target.value)}}),A.createElement("span",{className:"input-group-btn"},A.createElement("button",{className:"btn btn-default",type:"submit"},"Hae")))),A.createElement(oe,{features:i,hidePage:a}))},pe=function(e){var t=e.title,a=e.children;return A.createElement("div",{className:"panel panel-default"},A.createElement("div",{className:"panel-heading"},t),A.createElement("div",{className:"panel-body"},a))},de=function(){return A.createElement(pe,{title:"Tietoa sivustosta"},A.createElement("p",null,"Tällä sivustolla näet kartalla seuraavien rekisterien tiedot:"),A.createElement("h5",null,"Museovirasto"),A.createElement("ul",null,A.createElement("li",null,A.createElement("a",{href:"https://www.kyppi.fi/palveluikkuna/mjreki/read/asp/r_default.aspx"},"Muinaisjäännösrekisteri")),A.createElement("li",null,A.createElement("a",{href:"https://www.kyppi.fi/palveluikkuna/rapea/read/asp/r_default.aspx"},"Rakennusperintörekisteri")),A.createElement("li",null,A.createElement("a",{href:"https://www.museovirasto.fi/fi/tietoa-meista/kansainvalinen-toiminta/maailmanperintokohteet-suomessa"},"Maailmanperintökohteet")),A.createElement("li",null,A.createElement("a",{href:"http://www.rky.fi/"},"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"))),A.createElement("h5",null,"Ahvenamaan paikallishallinto"),A.createElement("ul",null,A.createElement("li",null,A.createElement("a",{href:"http://www.regeringen.ax/kulturarv/arkeologi-fornlamningar/fornlamningsregistret"},"Muinaisjäännösrekisteri"))),A.createElement("p",null,"Kaikki näytettävät kohteet ovat avointa dataa ja haettu rekisterin ylläpitäjän tarjoamasta karttapalvelusta."),A.createElement("p",null,"Kohteista saa lisätietoikkunan näkyviin klikkaamalla kohdetta kartalla. Tästä näkymästä on myös linkki kohteen lisätietoihin rekisterin ylläpitäjän sivustolla. Kohteen otsikon vieressä olevasta kuvakkeesta (",A.createElement("span",{className:"glyphicon glyphicon-link","aria-hidden":"true"}),") saa talteen pysyvän linkin kohteen sijaintiin kartalla."),A.createElement("h5",null,"3D-mallit"),A.createElement("p",null,"Joillekin kohteille on saataville myös 3D-malleja"," ",A.createElement("a",{href:"./3d/",target:"_blank"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia"," ",A.createElement("a",{href:"https://sketchfab.com",target:"_blank"},"Sketchfab")," ","-palvelusta."),A.createElement("h5",null,"Paikannus"),A.createElement("p",null,"Kartta keskitetään oletuksena nykyiseen sijaintiisi jos annat selaimelle luvan luovuttaa se tieto. Keskityksen nykyiseen sijaintiin voi suorittaa myös myöhemmin"," ",A.createElement("span",{className:"glyphicon glyphicon-screenshot","aria-hidden":"true"})," ","painikkeesta."),A.createElement("h5",null,"Haku"),A.createElement("p",null,"Museoviraston rekisterien kohteita pystyy hakemaan nimen perusteella hakunäkymässä (",A.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":"true"}),"). Hakutuloksen klikkaaminen keskittää kartan kohteeseen ja lisää siihen paikkamerkin ",A.createElement("img",{src:"images/map-pin-small.png"}),"."),A.createElement("h5",null,"Asetukset"),A.createElement("p",null,"Pohjakartan voi vaihtaa taustakartan ja maastokartan välillä asetuksista (",A.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"}),"). Samasta näkymästä voi piilottaa Museoviraston rekisterien kohteita tyypin ja muinaisjäännöksiä myös ajoituksen mukaan jos haluaa tarkastella esimerkiksi pelkästään muinaisjäännöksiä rautakaudelta."),A.createElement("p",null,"Palautetta sivustosta otetaan mielellään vastaan osoitteeseen"," ",A.createElement("a",{href:"mailto:antti.kekki@gmail.com"},"antti.kekki@gmail.com")))},he=function(){return A.createElement(pe,{title:"Karttasymbolit"},A.createElement("div",null,A.createElement("h5",null,"Museoviraston muinaisjäännösrekisteri"),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/muinaisjaannos_kohde.png"}),A.createElement("span",null,"Kiinteä muinaisjäännös")),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/muinaisjaannos_alue.png"}),A.createElement("span",null,"Kiinteä muinaisjäännös (alue)")),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/muu_kulttuuriperintokohde_kohde.png"}),A.createElement("span",null,"Muu kulttuuriperintökohde")),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/muu-kulttuuriperintokohde-alue.png"}),A.createElement("span",null,"Muu kulttuuriperintökohde (alue)"))),A.createElement("br",null),A.createElement("div",null,A.createElement("h5",null,"Ahvenanmaan muinaisjäännösrekisteri"),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/ahvenanmaa_muinaisjaannos.png"}),A.createElement("span",null,"Kohde"))),A.createElement("br",null),A.createElement("div",null,A.createElement("h5",null,"Rakennusperintörekisteri"),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/rakennusperintorekisteri_rakennus.png"}),A.createElement("span",null,"Rakennus")),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/rakennusperintorekisteri_alue.png"}),A.createElement("span",null,"Alue"))),A.createElement("br",null),A.createElement("div",null,A.createElement("h5",null,"Maailmanperintökohteet"),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/maailmanperinto_piste.png"}),A.createElement("span",null,"Kohde")),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/maailmanperinto_alue.png"}),A.createElement("span",null,"Alue"))),A.createElement("br",null),A.createElement("div",null,A.createElement("h5",null,"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/rky_piste.png"}),A.createElement("span",null,"Kohde")),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/rky_viiva.png"}),A.createElement("span",null,"Viiva (esim. tie)")),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/rky_alue.png"}),A.createElement("span",null,"Alue"))),A.createElement("br",null),A.createElement("div",null,A.createElement("h5",null,"3D-mallit (",A.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),A.createElement("p",null,A.createElement("img",{className:"feature-icon",src:"images/3d_malli.png"}),A.createElement("span",null,"Kohde sisältää 3D-malleja"))))},ke=function(){return A.createElement(pe,{title:"Tietoa sivustosta"},A.createElement("p",null,"Museoviraston rekistereistä tietoa haetaan"," ",A.createElement("a",{href:"https://www.avoindata.fi/data/fi/dataset/museoviraston-kulttuuriymparistoaineistot-suojellut-kohteet-wms-palvelu"},"avoimen rajapinnan")," ","kautta (",A.createElement("a",{href:"https://creativecommons.org/licenses/by/4.0/"},"Creative Commons CC By 4.0 -lisenssillä"),")."),A.createElement("p",null,"Ahvenanmaan maakuntahallinnon rekisteristö tietoa haetaan"," ",A.createElement("a",{href:"https://www.kartor.ax/datasets/fornminnen"},"avoimen rajapinnan")," ","kautta (",A.createElement("a",{href:"https://creativecommons.org/licenses/by/4.0/"},"Creative Commons CC By 4.0 -lisenssillä"),")."),A.createElement("p",null,"Taustakarttana on"," ",A.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/kartta-ja-paikkatietojen-rajapintapalvelut-17"},"Maanmittauslaitoksen")," ","tausta-, ortokuva- ja peruskartta (",A.createElement("a",{href:"https://www.maanmittauslaitos.fi/avoindata-lisenssi-cc40"}," ","Creative Commons Nimeä 4.0 Kansainvälinen -lisenssillä"),")."),A.createElement("p",null,"3D-mallit ovat avoimesta ",A.createElement("a",{href:"./3d/"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia. Mallien lisenssit on listattu tietokannassa mallikohtaisesti."),A.createElement("p",null,"Tämän sivuston tekninen toteutus on"," ",A.createElement("a",{href:"https://github.com/anttikekki/muinaismuistot"},"avointa lähdekoodia"),", lisenssinä on"," ",A.createElement("a",{href:"https://github.com/anttikekki/muinaismuistot/blob/master/LICENSE"},"MIT"),"."))},fe=function(){return A.createElement(pe,{title:"Tietoa sivustosta"},A.createElement("h5",null,"Huhtikuu 2020"),A.createElement("p",null,"Lisätty 3D-mallien"," ",A.createElement("a",{href:"./3d/",target:"_blank"},"tietokanta")," ","ja karttaan ",A.createElement("img",{src:"images/3d_malli.png"})," korostus kohteille, joille löytyy 3D-malleja."),A.createElement("br",null),A.createElement("h5",null,"Helmikuu 2020"),A.createElement("p",null,'Lisätty kartta-aineistojen viimeisin päivitysaika näkyviin "Lisätietoja sivustosta" -sivulle.'),A.createElement("p",null,"Paikannus päivittää nyt automaattisesti omaa sijaintia kartalla."),A.createElement("br",null),A.createElement("h5",null,"Elokuu 2019"),A.createElement("p",null,"Siirrytty käyttämään Ahvenanmaan maakuntahallinnon uutta"," ",A.createElement("a",{href:"https://www.kartor.ax/datasets/fornminnen"},"kartor.ax")," ","karttapalvelua. Samalla kohteiden haku alkoi toimimaan myös Ahvenanmaan kohteille."),A.createElement("p",null,"Kartalle klikattujen kohteiden listassa näkyy nyt otsikossa kohteen nimi. Listassa voi nyt myös olla monta saman tyyppistä kohdetta."),A.createElement("br",null),A.createElement("h5",null,"Heinäkuu 2019"),A.createElement("p",null,"Korjattu Museoviraston muinaisjäännösrekisterin pisteiden filtteröinti ajoituksen ja tyypin perusteella."),A.createElement("br",null),A.createElement("h5",null,"Joulukuu 2018"),A.createElement("p",null,"Siirrytty käyttämään Maanmittauslaitoksen uutta"," ",A.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/kartta-ja-paikkatietojen-rajapintapalvelut-17"},"karttapalvelua"),", jonka myötä taustakartan ulkonäkö muuttui selkeämmäksi ja"," ",A.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/tuotekuvaukset/ortokuva"},"Ortokuvat")," ","saatiin käyttöön."),A.createElement("p",null,"Siirrytty käyttämään Museoviraston uuta"," ",A.createElement("a",{href:"https://www.avoindata.fi/data/fi/dataset/museoviraston-kulttuuriymparistoaineistot-suojellut-kohteet-wms-palvelu"},"karttapalvelua"),', jonka myötä saatiin käyttöön ruskeat "Muu kulttuuriperintökohde" -pisteet kartalle.'),A.createElement("br",null),A.createElement("h5",null,"Marraskuu 2017"),A.createElement("p",null,"Lisätty kartalle Ahvenanmaan maakuntahallinnon"," ",A.createElement("a",{href:"http://www.regeringen.ax/kulturarv/arkeologi-fornlamningar/fornlamningsregistret"},"muinaijäännösten rekisteri"),"."),A.createElement("br",null),A.createElement("h5",null,"Lokakuu 2015"),A.createElement("p",null,"Ensimmäinen versio julkaistu."))},ge=function(e){var t=e.date;return void 0===t?A.createElement("p",null,"Tietoa selvitetään parhaillaan..."):null===t?A.createElement("p",null,"Päivityshetkeä ei valitettavasti saatu selville"):A.createElement("p",null,t.toLocaleDateString("fi"))},ve=function(e){var t,a,n,i=e.dataLatestUpdateDates;return A.createElement(pe,{title:"Aineisto päivitetty viimeksi"},A.createElement("h5",null,"Museoviraston aineistot"),A.createElement(ge,{date:null===(t=i)||void 0===t?void 0:t.museovirasto}),A.createElement("h5",null,"Ahvenamaan paikallishallinnon aineistot"),A.createElement(ge,{date:null===(a=i)||void 0===a?void 0:a.ahvenanmaa}),A.createElement("h5",null,"3D-mallit (",A.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),A.createElement(ge,{date:null===(n=i)||void 0===n?void 0:n.models}))},ye=function(e){var t=e.visibility,a=e.hidePage,n=e.dataLatestUpdateDates;return A.createElement(ie,{title:"Lisätietoja sivustosta",visibility:t,hidePage:a},A.createElement(ve,{dataLatestUpdateDates:n}),A.createElement(de,null),A.createElement(he,null),A.createElement(ke,null),A.createElement(fe,null))},Ee=function(e){var t=e.onClick;return A.createElement("div",{id:"map-button-search",className:"map-button"},A.createElement("button",{type:"button",className:"btn btn-primary",title:"Hae kohteita",onClick:t},A.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":"true"})))},be=function(e){var t=e.layer,a=e.selectedLayer,n=e.onSelectLayer,i=t===a;return A.createElement("label",{className:"btn btn-default "+(i?"active":"")},A.createElement("input",{type:"radio",name:"selectedMapLayer",checked:i,onChange:function(){return n(t)}}),t)},je=function(e){var t=e.selectedLayer,a=e.onSelectLayer;return A.createElement(pe,{title:"Karttapohja"},A.createElement("div",{className:"btn-group","data-toggle":"buttons"},Object.values(h.b).map((function(e){return A.createElement(be,{key:e,layer:e,selectedLayer:t,onSelectLayer:a})}))))},we=function(e){var t=e.label,a=e.layer,n=e.selectedLayers,i=e.onSelectLayer,r=n.includes(a);return A.createElement("div",{className:"checkbox sub-layer-select-checkbox-container"},A.createElement("label",null,A.createElement("input",{type:"checkbox",onChange:function(){return i(a)},checked:r}),Object(Y.h)(a).map((function(e,t){return A.createElement("img",{className:"feature-icon",key:t,src:e})})),A.createElement("span",null,t)))},Le=function(e){var t={selectedLayers:e.selectedLayers,onSelectLayer:e.onSelectLayer};return A.createElement(pe,{title:"Kartalla näkyvät kohteet"},A.createElement("form",null,A.createElement("h5",null,"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"),A.createElement(we,Object(N.a)({label:"Alueet",layer:h.f.RKY_alue},t)),A.createElement(we,Object(N.a)({label:"Viivat (esim. tie)",layer:h.f.RKY_viiva},t)),A.createElement(we,Object(N.a)({label:"Pisteet",layer:h.f.RKY_piste},t)),A.createElement("h5",null,"Maailmanperintökohteet"),A.createElement(we,Object(N.a)({label:"Alueet",layer:h.f.Maailmanperintö_alue},t)),A.createElement(we,Object(N.a)({label:"Pisteet",layer:h.f.Maailmanperintö_piste},t)),A.createElement("h5",null,"Rakennusperintörekisteri"),A.createElement(we,Object(N.a)({label:"Rakennetut alueet",layer:h.f.Suojellut_rakennukset_alue},t)),A.createElement(we,Object(N.a)({label:"Rakennukset",layer:h.f.Suojellut_rakennukset_piste},t)),A.createElement("h5",null,"Museoviraston muinaisjäännösrekisteri"),A.createElement(we,Object(N.a)({label:"Alueet",layer:h.f.Muinaisjäännökset_alue},t)),A.createElement(we,Object(N.a)({label:"Pisteet",layer:h.f.Muinaisjäännökset_piste},t)),A.createElement("h5",null,"Ahvenamaan muinaisjäännösrekisteri"),A.createElement("div",{className:"checkbox sub-layer-select-checkbox-container"},A.createElement("label",null,A.createElement("input",{type:"checkbox",value:"",checked:!0,disabled:!0}),A.createElement("img",{src:"images/ahvenanmaa_muinaisjaannos.png"})," Kohde")),A.createElement("h5",null,"3D-mallit (",A.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),A.createElement("div",{className:"checkbox sub-layer-select-checkbox-container"},A.createElement("label",null,A.createElement("input",{type:"checkbox",value:"",checked:!0,disabled:!0}),A.createElement("img",{src:"images/3d_malli.png"})," 3D-mallit"))))},Me=function(e){var t=e.type,a=e.selectedMuinaisjaannosTypes,n=e.onSelectType,i=a.includes(t);return A.createElement("div",{className:"checkbox"},A.createElement("label",null,A.createElement("input",{type:"checkbox",onChange:function(){return n(t)},checked:i}),t))},_e=function(e){var t=e.dating,a=e.selectedMuinaisjaannosDatings,n=e.onSelectDating,i=a.includes(t);return A.createElement("div",{className:"checkbox"},A.createElement("label",null,A.createElement("input",{type:"checkbox",onChange:function(){return n(t)},checked:i}),t))},Se=function(e){var t=e.selectedMuinaisjaannosTypes,a=e.selectedMuinaisjaannosDatings,n=e.onSelectMuinaisjaannosType,i=e.onSelectMuinaisjaannosDating;return A.createElement(pe,{title:"Kartalla näkyvät muinaisjäännökset"},A.createElement("form",null,A.createElement("div",{className:"well well-sm"},"Rajoitus toimii vain Museoviraston muijaisjäännöksien pisteille (",A.createElement("img",{src:"images/muinaisjaannos_kohde.png"})," ja",A.createElement("img",{src:"images/muu_kulttuuriperintokohde_kohde.png"}),") mutta ei alueille (",A.createElement("img",{src:"images/muinaisjaannos_alue.png"})," ja",A.createElement("img",{src:"images/muu-kulttuuriperintokohde-alue.png"}),"). Rajaus ei valitettavasti toimi Ahvenanmaan muinaisjäännöksiin."),A.createElement("h5",null,"Tyyppi"),Object.values(h.e).map((function(e){return A.createElement(Me,{key:e,type:e,selectedMuinaisjaannosTypes:t,onSelectType:n})})),A.createElement("h5",null,"Ajoitus"),Object.values(h.c).map((function(e){return A.createElement(_e,{key:e,dating:e,selectedMuinaisjaannosDatings:a,onSelectDating:i})}))))},Ce=function(e){var t=e.visibility,a=e.hidePage,n=e.settings,i=e.onSelectMaanmittauslaitosLayer,r=e.onSelectMuseovirastoLayer,s=e.onSelectMuinaisjaannosType,l=e.onSelectMuinaisjaannosDating;return A.createElement(ie,{title:"Asetukset",visibility:t,hidePage:a},A.createElement(je,{selectedLayer:n.selectedMaanmittauslaitosLayer,onSelectLayer:i}),A.createElement(Le,{selectedLayers:n.selectedMuseovirastoLayers,onSelectLayer:r}),A.createElement(Se,{selectedMuinaisjaannosTypes:n.selectedMuinaisjaannosTypes,selectedMuinaisjaannosDatings:n.selectedMuinaisjaannosDatings,onSelectMuinaisjaannosType:s,onSelectMuinaisjaannosDating:l}))},De=function(e){var t=e.onClick;return A.createElement("div",{id:"map-button-settings",className:"map-button"},A.createElement("button",{type:"button",className:"btn btn-primary",title:"Kartan asetukset",onClick:t},A.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"})))};!function(e){e.Search="searchPage",e.Info="infoPage",e.Settings="settingsPage",e.Details="detailsPage"}(ne||(ne={}));var Ne=function(e,t){return t.includes(e)?t.filter((function(t){return t!==e})):Object(N.d)(t,[e])},Oe=function(e,t){var a=this;this.pageClosingAnimationTimeoutID={},this.loadingAnimationCounter=0,this.onSearchFeatures=function(e){a.eventListeners.searchFeatures(e),a.searchResultFeatures=void 0,a.renderUI()},this.onSelectMaanmittauslaitosLayer=function(e){a.settings.selectedMaanmittauslaitosLayer=e,a.eventListeners.selectedMaanmittauslaitosLayerChanged(a.settings),a.renderUI()},this.onSelectMuseovirastoLayer=function(e){a.settings.selectedMuseovirastoLayers=Ne(e,a.settings.selectedMuseovirastoLayers),a.eventListeners.selectedFeatureLayersChanged(a.settings),a.renderUI()},this.onSelectMuinaisjaannosType=function(e){a.settings.selectedMuinaisjaannosTypes=Ne(e,a.settings.selectedMuinaisjaannosTypes),a.eventListeners.selectedMuinaisjaannosTypesChanged(a.settings),a.renderUI()},this.onSelectMuinaisjaannosDating=function(e){a.settings.selectedMuinaisjaannosDatings=Ne(e,a.settings.selectedMuinaisjaannosDatings),a.eventListeners.selectedMuinaisjaannosDatingsChanged(a.settings),a.renderUI()},this.renderUI=function(){var e=a.loadingAnimationCounter>0,t=a.eventListeners,n=t.zoomIn,i=t.zoomOut,r=t.centerToCurrentPositions;P.render(A.createElement(A.Fragment,null,A.createElement(F,{visible:e}),A.createElement(K,{onClick:n}),A.createElement(R,{onClick:i}),A.createElement(U,{onClick:r}),A.createElement(Ee,{onClick:function(){return a.showPage(ne.Search)}}),A.createElement(I,{onClick:function(){return a.showPage(ne.Info)}}),A.createElement(De,{onClick:function(){return a.showPage(ne.Settings)}}),A.createElement(le,{visibility:a.getPageVisibility(ne.Details),hidePage:a.hidePage,features:a.selectedFeatures,models:a.selectedModels}),A.createElement(me,{visibility:a.getPageVisibility(ne.Search),hidePage:a.hidePage,searchFeatures:a.onSearchFeatures,searchResultFeatures:a.searchResultFeatures}),A.createElement(ye,{visibility:a.getPageVisibility(ne.Info),hidePage:a.hidePage,dataLatestUpdateDates:a.dataLatestUpdateDates}),A.createElement(Ce,{visibility:a.getPageVisibility(ne.Settings),hidePage:a.hidePage,settings:a.settings,onSelectMaanmittauslaitosLayer:a.onSelectMaanmittauslaitosLayer,onSelectMuseovirastoLayer:a.onSelectMuseovirastoLayer,onSelectMuinaisjaannosType:a.onSelectMuinaisjaannosType,onSelectMuinaisjaannosDating:a.onSelectMuinaisjaannosDating})),document.getElementById("ui"))},this.getPageVisibility=function(e){return a.visiblePage===e?n.Visible:a.pageClosingAnimationTimeoutID[e]?n.Closing:n.Hidden},this.showPage=function(e){a.visiblePage!==e&&(a.abortClosingPage(e),a.visiblePage=e,e===ne.Info&&a.eventListeners.fetchDataLatestUpdateDates(),a.renderUI())},this.hidePage=function(){a.visiblePage&&a.startClosingPage(a.visiblePage),a.visiblePage=void 0,a.renderUI()},this.startClosingPage=function(e){a.pageClosingAnimationTimeoutID[e]=window.setTimeout((function(){a.pageClosingAnimationTimeoutID[e]=void 0,a.renderUI()}),500)},this.abortClosingPage=function(e){a.pageClosingAnimationTimeoutID[e]&&(window.clearTimeout(a.pageClosingAnimationTimeoutID[e]),a.pageClosingAnimationTimeoutID[e]=void 0)},this.showLoadingAnimation=function(e){var t=a.loadingAnimationCounter;e?a.loadingAnimationCounter++:a.loadingAnimationCounter--,0===t&&1===a.loadingAnimationCounter&&(a.loadingAnimationTimeoutID=window.setTimeout((function(){a.loadingAnimationTimeoutID&&a.renderUI()}),300)),1===t&&0===a.loadingAnimationCounter&&(window.clearTimeout(a.loadingAnimationTimeoutID),a.loadingAnimationTimeoutID=void 0,a.renderUI())},this.featuresSelected=function(e,t){0!==e.length&&(a.selectedFeatures=e,a.selectedModels=t,a.visiblePage=ne.Details,a.renderUI())},this.featureSearchReady=function(e){a.searchResultFeatures=e,a.renderUI()},this.dataLatestUpdateDatesReady=function(e){a.dataLatestUpdateDates=e,a.renderUI()},this.settings=e,this.eventListeners=t,this.renderUI()},xe=function(){var e=this;this.determineStartLocation=function(){H()?e.setMapLocationFromURLHash():e.map.centerToCurrentPositions()},this.setMapLocationFromURLHash=function(){var t=H();t&&(e.map.setMapLocation(t),e.map.showSelectedLocationMarker(t))};var t={selectedMaanmittauslaitosLayer:h.b.Taustakartta,selectedMuseovirastoLayers:Object.values(h.f),selectedMuinaisjaannosTypes:Object.values(h.e),selectedMuinaisjaannosDatings:Object.values(h.c)};this.map=new T(t,{featuresSelected:function(t,a){e.ui.featuresSelected(t,a)},showLoadingAnimation:function(t){e.ui.showLoadingAnimation(t)},featureSearchReady:function(t){e.ui.featureSearchReady(t)},dataLatestUpdateDatesReady:function(t){e.ui.dataLatestUpdateDatesReady(t)}}),this.ui=new Oe(t,{searchFeatures:function(t){e.map.searchFeatures(t)},zoomIn:function(){e.map.zoomIn()},zoomOut:function(){e.map.zoomOut()},centerToCurrentPositions:function(){e.map.centerToCurrentPositions()},selectedMaanmittauslaitosLayerChanged:function(t){e.map.selectedMaanmittauslaitosLayerChanged(t)},selectedFeatureLayersChanged:function(t){e.map.selectedFeatureLayersChanged(t)},selectedMuinaisjaannosTypesChanged:function(t){e.map.selectedMuinaisjaannosTypesChanged(t)},selectedMuinaisjaannosDatingsChanged:function(t){e.map.selectedMuinaisjaannosDatingsChanged(t)},fetchDataLatestUpdateDates:function(){e.map.fetchDataLatestUpdateDates()}}),window.onhashchange=function(){e.setMapLocationFromURLHash()},this.determineStartLocation()};t.default=xe;new xe}});