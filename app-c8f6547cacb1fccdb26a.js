!function(e){function t(t){for(var n,s,l=t[0],o=t[1],u=t[2],m=0,p=[];m<l.length;m++)s=l[m],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,l=1;l<a.length;l++){var o=a[l];0!==i[o]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={1:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var l=window.webpackJsonp=window.webpackJsonp||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=o;r.push([518,0,3]),a()}({1:function(e,t,a){"use strict";var n,i,r,s,l,o;a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"h",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"j",(function(){return m})),a.d(t,"i",(function(){return p})),a.d(t,"g",(function(){return u})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return h})),function(e){e.Maanmittauslaitos="Maanmittauslaitos",e.Museovirasto="Museovirasto",e.Ahvenanmaa="Ahvenanmaa",e.Models="Models"}(i||(i={})),function(e){e.Maastokartta="maastokartta",e.Taustakartta="taustakartta",e.Ortokuva="ortokuva"}(r||(r={})),function(e){e.Muinaisjaannokset_piste="Muinaisjaannokset_piste",e.Muinaisjaannokset_alue="Muinaisjaannokset_alue",e.Suojellut_rakennukset_piste="Suojellut_rakennukset_piste",e.Suojellut_rakennukset_alue="Suojellut_rakennukset_alue",e.RKY_alue="RKY_alue",e.RKY_piste="RKY_piste",e.RKY_viiva="RKY_viiva",e.Maailmanperinto_piste="Maailmanperinto_piste",e.Maailmanperinto_alue="Maailmanperinto_alue"}(s||(s={})),function(e){e.Fornminnen="Fornminnen",e.MaritimtKulturarv="Maritimt kulturarv; Vrak"}(l||(l={})),function(e){e.ModelLayer="ModelLayer"}(o||(o={}));var u,c,m=((n={})[s.Muinaisjaannokset_piste]=7,n[s.Muinaisjaannokset_alue]=8,n[s.Suojellut_rakennukset_piste]=2,n[s.Suojellut_rakennukset_alue]=3,n[s.RKY_alue]=4,n[s.RKY_piste]=5,n[s.RKY_viiva]=6,n[s.Maailmanperinto_piste]=9,n[s.Maailmanperinto_alue]=10,n),p=function(e){switch(e){case l.Fornminnen:return 1;case l.MaritimtKulturarv:return 5}};!function(e){e["eiMääritelty"]="ei määritelty",e.alustenHylyt="alusten hylyt",e.asuinpaikat="asuinpaikat",e.hautapaikat="hautapaikat",e.kirkkorakenteet="kirkkorakenteet",e.kivirakenteet="kivirakenteet",e["kulkuväylät"]="kulkuväylät",e.kulttiJaTarinapaikat="kultti- ja tarinapaikat",e.luonnonmuodostumat="luonnonmuodostumat",e["löytöpaikat"]="löytöpaikat",e.maarakenteet="maarakenteet",e["muinaisjäännösryhmät"]="muinaisjäännösryhmät",e.puolustusvarustukset="puolustusvarustukset",e.puurakenteet="puurakenteet",e.raakaAineenHankintapaikat="raaka-aineen hankintapaikat",e.taideMuistomerkit="taide, muistomerkit",e.tapahtumapaikat="tapahtumapaikat",e.teollisuuskohteet="teollisuuskohteet",e["työJaValmistuspaikat"]="työ- ja valmistuspaikat"}(u||(u={})),function(e){e.moniperiodinen="moniperiodinen",e.esihistoriallinen="esihistoriallinen",e.kivikautinen="kivikautinen",e.varhaismetallikautinen="varhaismetallikautinen",e.pronssikautinen="pronssikautinen",e.rautakautinen="rautakautinen",e.keskiaikainen="keskiaikainen",e.historiallinen="historiallinen",e.moderni="moderni",e.ajoittamaton="ajoittamaton",e["eiMääritelty"]="ei määritelty"}(c||(c={}));var h={moniperiodinen:"",esihistoriallinen:"8600 eaa. - 1200 jaa.",kivikautinen:"8600 – 1500 eaa.",varhaismetallikautinen:"1500 eaa. - 200 jaa.",pronssikautinen:"1700 – 500 eaa.",rautakautinen:"500 eaa. - 1200 jaa.",keskiaikainen:"1200 - 1570 jaa.",historiallinen:"1200 jaa. -",moderni:"1800 jaa -",ajoittamaton:"","ei määritelty":""}},21:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"j",(function(){return u})),a.d(t,"a",(function(){return c})),a.d(t,"l",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"d",(function(){return h})),a.d(t,"k",(function(){return d})),a.d(t,"b",(function(){return k})),a.d(t,"i",(function(){return g})),a.d(t,"m",(function(){return v})),a.d(t,"n",(function(){return f})),a.d(t,"h",(function(){return y}));var n=a(1),i=function(e){return"kiinteä muinaisjäännös"===f(e.attributes.laji)},r=function(e){return"muu kulttuuriperintökohde"===f(e.attributes.laji)},s=function(e){switch(e.layerName){case n.h.Muinaisjaannokset_piste:case n.h.Muinaisjaannokset_alue:case n.h.RKY_alue:case n.h.RKY_piste:case n.h.RKY_viiva:case n.h.Suojellut_rakennukset_piste:case n.h.Suojellut_rakennukset_alue:return f(e.attributes.kohdenimi);case n.h.Maailmanperinto_piste:case n.h.Maailmanperinto_alue:return f(e.attributes.Nimi);case n.a.Fornminnen:return f(e.attributes.Namn)||f(e.attributes["Fornlämnings ID"]);case n.a.MaritimtKulturarv:return f(e.attributes.Namn)||f(e.attributes.FornID)}},l=function(e){switch(e.layerName){case n.h.Muinaisjaannokset_piste:if(i(e))return"Kiinteä muinaisjäännös";if(r(e))return"Muu kulttuuriperintökohde";break;case n.h.Muinaisjaannokset_alue:if(i(e))return"Kiinteä muinaisjäännös (alue)";if(r(e))return"Muu kulttuuriperintökohde (alue)";break;case n.h.RKY_alue:case n.h.RKY_piste:case n.h.RKY_viiva:return"Rakennettu kulttuuriympäristö";case n.h.Maailmanperinto_piste:case n.h.Maailmanperinto_alue:return"Maailmanperintökohde";case n.h.Suojellut_rakennukset_piste:case n.h.Suojellut_rakennukset_alue:return"Rakennusperintökohde";case n.a.Fornminnen:return"Ahvenanmaan muinaisjäännösrekisterin kohde";case n.a.MaritimtKulturarv:return"Ahvenamaan merellisen kulttuuriperintörekisterin kohde";default:return}},o=function(e,t){void 0===t&&(t=!1);var a=t?"_3d":"";switch(e.layerName){case n.h.Muinaisjaannokset_piste:if(i(e))return"images/muinaisjaannos_kohde"+a+".png";if(r(e))return"images/muu_kulttuuriperintokohde_kohde"+a+".png";break;case n.h.Muinaisjaannokset_alue:if(i(e))return"images/muinaisjaannos_alue"+a+".png";if(r(e))return"images/muu-kulttuuriperintokohde-alue"+a+".png";break;case n.h.RKY_alue:return"images/rky_alue"+a+".png";case n.h.RKY_viiva:return"images/rky_viiva"+a+".png";case n.h.RKY_piste:return"images/rky_piste"+a+".png";case n.h.Maailmanperinto_alue:return"images/maailmanperinto_alue"+a+".png";case n.h.Maailmanperinto_piste:return"images/maailmanperinto_piste"+a+".png";case n.h.Suojellut_rakennukset_alue:return"images/rakennusperintorekisteri_alue"+a+".png";case n.h.Suojellut_rakennukset_piste:return"images/rakennusperintorekisteri_rakennus"+a+".png";case n.a.Fornminnen:return"images/ahvenanmaa_muinaisjaannos"+a+".png";case n.a.MaritimtKulturarv:return"images/ahvenanmaa_hylky"+a+".png";default:return}},u=function(e){switch(e){case n.h.Muinaisjaannokset_piste:return["images/muinaisjaannos_kohde.png","images/muu_kulttuuriperintokohde_kohde.png"];case n.h.Muinaisjaannokset_alue:return["images/muinaisjaannos_alue.png","images/muu-kulttuuriperintokohde-alue.png"];case n.h.RKY_alue:return["images/rky_alue.png"];case n.h.RKY_viiva:return["images/rky_viiva.png"];case n.h.RKY_piste:return["images/rky_piste.png"];case n.h.Maailmanperinto_alue:return["images/maailmanperinto_alue.png"];case n.h.Maailmanperinto_piste:return["images/maailmanperinto_piste.png"];case n.h.Suojellut_rakennukset_alue:return["images/rakennusperintorekisteri_alue.png"];case n.h.Suojellut_rakennukset_piste:return["images/rakennusperintorekisteri_rakennus.png"];case n.a.Fornminnen:return["images/ahvenanmaa_muinaisjaannos.png"];case n.a.MaritimtKulturarv:return["images/ahvenanmaa_hylky.png"];case n.d.ModelLayer:return["images/3d_malli_circle.png","images/3d_malli_square.png"]}},c=function(e){switch(e.layerName){case n.h.Muinaisjaannokset_piste:case n.h.Muinaisjaannokset_alue:case n.h.RKY_alue:case n.h.RKY_viiva:case n.h.RKY_piste:case n.h.Maailmanperinto_alue:case n.h.Maailmanperinto_piste:case n.h.Suojellut_rakennukset_alue:case n.h.Suojellut_rakennukset_piste:case n.a.Fornminnen:case n.a.MaritimtKulturarv:return e.attributes.OBJECTID}},m=function(e,t){var a;switch(e.layerName){case n.h.Muinaisjaannokset_piste:a=e.attributes.mjtunnus;break;case n.h.Suojellut_rakennukset_piste:a=e.attributes.kohdeID;break;case n.h.RKY_alue:a=e.attributes.ID;break;case n.a.Fornminnen:case n.a.MaritimtKulturarv:a=e.attributes.OBJECTID}return t?t.filter((function(t){return t.registryItem.type===e.layerName})).filter((function(e){return e.registryItem.id.toString()===a})):[]},p=function(e){switch(e.layerName){case n.h.Muinaisjaannokset_piste:case n.h.Muinaisjaannokset_alue:case n.h.Suojellut_rakennukset_alue:case n.h.Suojellut_rakennukset_piste:return"https://"+e.attributes.url;case n.h.RKY_alue:case n.h.RKY_viiva:case n.h.RKY_piste:return e.attributes.url;case n.h.Maailmanperinto_alue:case n.h.Maailmanperinto_piste:return function(e){var t=e.attributes.URL;if(t.startsWith("http://www.nba.fi/fi/ajankohtaista/kansainvalinen_toiminta/maailmanperintokohteet_suomessa")){var a=t.indexOf("#"),n="";-1!==a&&(n=t.substring(a)),t="https://www.museovirasto.fi/fi/tietoa-meista/kansainvalinen-toiminta/maailmanperintokohteet-suomessa"+n}return t}(e);case n.a.Fornminnen:return function(e){switch(e.attributes["Fornlämnings ID"].substring(0,2)){case"Br":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/BR%c3%84ND%c3%96.pdf";case"Ec":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/ECKER%c3%96.pdf";case"Fö":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/F%c3%96GL%c3%96.pdf";case"Fi":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/FINSTR%c3%96M.pdf";case"Ge":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/GETA.pdf";case"Ha":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/HAMMARLAND.pdf";case"Jo":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/JOMALA.pdf";case"Kö":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/K%c3%96KAR.pdf";case"Ku":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/KUMLINGE.pdf";case"Le":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/LEMLAND.pdf";case"Lu":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/LUMPARLAND.pdf";case"Ma":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/MARIEHAMN.pdf";case"Sa":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SALTVIK.pdf";case"So":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SOTTUNGA.pdf";case"Su":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/SUND.pdf";case"Vå":return"http://www.kulturarv.ax/wp-content/uploads/2014/11/V%c3%85RD%c3%96.pdf"}}(e)}},h=function(e){switch(e.layerName){case n.h.Muinaisjaannokset_piste:case n.h.Muinaisjaannokset_alue:return"Muinaisjäännösrekisteristä";case n.h.RKY_alue:case n.h.RKY_viiva:case n.h.RKY_piste:return"rky.fi rekisteristä";case n.h.Maailmanperinto_alue:case n.h.Maailmanperinto_piste:return"Museoviraston sivuilta";case n.h.Suojellut_rakennukset_alue:case n.h.Suojellut_rakennukset_piste:return"rakennusperintörekisteristä";case n.a.Fornminnen:return"Ahvenamaan muinaisjäännösrekisteri";case n.a.MaritimtKulturarv:return"Ahvenamaan merellinen kulttuuriperintörekisteri"}},d=function(e){switch(e){case n.h.Muinaisjaannokset_piste:case n.h.Muinaisjaannokset_alue:return"Muinaisjäännösrekisteri";case n.h.RKY_alue:case n.h.RKY_viiva:case n.h.RKY_piste:return"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt";case n.h.Maailmanperinto_alue:case n.h.Maailmanperinto_piste:return"Maailmanperintökohteet";case n.h.Suojellut_rakennukset_alue:case n.h.Suojellut_rakennukset_piste:return"Rakennusperintörekisteri";case n.a.Fornminnen:return"Ahvenamaan muinaisjäännösrekisteri";case n.a.MaritimtKulturarv:return"Ahvenamaan merellinen kulttuuriperintörekisteri"}},k=function(e){switch(e.geometryType){case"esriGeometryPolygon":return e.geometry.rings[0][0];case"esriGeometryPoint":return[e.geometry.x,e.geometry.y];case"esriGeometryPolyline":return e.geometry.paths[0][0]}},g=function(e){switch(e.geometry.type){case"Point":return e.geometry.coordinates;case"Polygon":return e.geometry.coordinates[0][0]}},v=function(e){return n.f[e]},f=function(e){if(null==e)return"";if("null"===(e=e.trim()).toLowerCase())return"";for(;","===e.substr(e.length-1,1);)e=e.substring(0,e.length-1).trim();return e},y=function(e){var t=e.map((function(e){return new Date(e.properties.createdDate).getTime()}));return t=Array.from(new Set(t)),new Date(Math.max.apply(null,t))}},512:function(e,t,a){var n=a(210),i=a(513);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var r={insert:"head",singleton:!1};n(i,r);e.exports=i.locals||{}},513:function(e,t,a){(t=a(211)(!1)).push([e.i,"html,\nbody,\n#map {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n#map {\n  z-index: 10;\n  position: absolute;\n  left: 0px;\n  top: 0px;\n}\n\n#loading-animation {\n  z-index: 25;\n  position: absolute;\n  top: 15px;\n  right: 20px;\n}\n\n.map-button {\n  z-index: 15;\n  position: absolute;\n}\n\n#map-button-zoom-in {\n  top: 20px;\n  left: 20px;\n}\n\n#map-button-zoom-out {\n  top: 60px;\n  left: 20px;\n}\n\n#map-button-position {\n  top: 100px;\n  left: 20px;\n}\n\n#map-button-search {\n  top: 140px;\n  left: 20px;\n}\n\n#map-button-info {\n  top: 180px;\n  left: 20px;\n}\n\n#map-button-settings {\n  top: 220px;\n  left: 20px;\n}\n\n.page {\n  z-index: 20;\n  position: absolute;\n  top: 0px;\n  background-color: #fff;\n  height: 100%;\n  width: 100%;\n}\n\n.pageHeader {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n\n.pageHeaderText {\n  font-size: 20px;\n  font-weight: 500;\n}\n\n.pageContent {\n  height: 90%;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n}\n\n.page-right-visible {\n  -webkit-transition: right 0.5s ease;\n  -moz-transition: right 0.5s ease;\n  -o-transition: right 0.5s ease;\n  transition: right 0.5s ease;\n  right: 0px;\n}\n\n.page-right-closing {\n  -webkit-transition: right 0.5s ease;\n  -moz-transition: right 0.5s ease;\n  -o-transition: right 0.5s ease;\n  transition: right 0.5s ease;\n  right: -100%;\n}\n\n.page-right-hidden {\n  right: -100%;\n  width: 0px;\n}\n\n@media (min-width: 768px) {\n  .page {\n  }\n  .page-right-hidden {\n  }\n}\n\n@media (min-width: 992px) {\n  .page {\n    width: 500px;\n  }\n  .page-right-closing {\n    right: -500px;\n  }\n}\n\n@media (min-width: 1200px) {\n  .page {\n    width: 600px;\n  }\n  .page-right-closing {\n    right: -600px;\n  }\n}\n\n@media (min-width: 1400px) {\n  .page {\n    width: 700px;\n  }\n  .page-right-closing {\n    right: -700px;\n  }\n}\n\n.sub-layer-select-checkbox-container {\n  margin-left: 20px;\n}\n\n.feature-collapse-panel-heading h6 {\n  font-size: 14px;\n  line-height: 1.3;\n  margin-top: 5px;\n  font-weight: 400;\n}\n\n.feature-icon {\n  margin-right: 5px;\n}\n",""]),e.exports=t},518:function(e,t,a){"use strict";a.r(t),a.d(t,"initialSettings",(function(){return Te}));a(213),a(255),a(502);var n,i=a(212),r=a(260),s=a(180),l=a(259),o=a(6),u=a(43),c=a(258),m=a(103),p=a(262),h=a(116),d=a(1),k=function(e,t,a){var n=this;this.loadMMLWmtsCapabilitiesAndAddLayers=function(e){fetch(n.settings.maanmittauslaitos.url.WMTSCapabilities).then((function(e){return e.text()})).then((function(t){return n.addWmtsLayers(t,e)}))},this.addWmtsLayers=function(e,t){var a=(new p.a).read(e);n.maastokarttaLayerSource=new h.a(Object(h.b)(a,{layer:d.c.Maastokartta})),n.taustakarttaLayerSource=new h.a(Object(h.b)(a,{layer:d.c.Taustakartta})),n.ortokuvaLayerSource=new h.a(Object(h.b)(a,{layer:d.c.Ortokuva}));var i=t.maanmittauslaitos.selectedLayer;n.mmlMaastokarttaLayer=new m.a({source:n.maastokarttaLayerSource,visible:i===d.c.Maastokartta}),n.mmlTaustakarttaLayer=new m.a({source:n.taustakarttaLayerSource,visible:i===d.c.Taustakartta}),n.mmlOrtokuvaLayer=new m.a({source:n.ortokuvaLayerSource,visible:i===d.c.Ortokuva}),n.updateLoadingAnimationOnLayerSourceTileLoad(n.maastokarttaLayerSource),n.updateLoadingAnimationOnLayerSourceTileLoad(n.taustakarttaLayerSource),n.updateLoadingAnimationOnLayerSourceTileLoad(n.ortokuvaLayerSource),n.onLayersCreatedCallbackFn(n.mmlMaastokarttaLayer,n.mmlTaustakarttaLayer,n.mmlOrtokuvaLayer)},this.updateLoadingAnimationOnLayerSourceTileLoad=function(e){e.on("tileloadstart",(function(e){n.showLoadingAnimationFn(!0)})),e.on("tileloadend",(function(e){n.showLoadingAnimationFn(!1)})),e.on("tileloaderror",(function(e){n.showLoadingAnimationFn(!1)}))},this.selectedMaanmittauslaitosLayerChanged=function(e){if(n.mmlMaastokarttaLayer&&n.mmlTaustakarttaLayer&&n.mmlOrtokuvaLayer){var t=e.maanmittauslaitos.selectedLayer;n.mmlMaastokarttaLayer.setVisible(t===d.c.Maastokartta),n.mmlTaustakarttaLayer.setVisible(t===d.c.Taustakartta),n.mmlOrtokuvaLayer.setVisible(t===d.c.Ortokuva)}},this.settings=e,this.showLoadingAnimationFn=t,this.onLayersCreatedCallbackFn=a,this.loadMMLWmtsCapabilitiesAndAddLayers(e)},g=a(167),v=a(2),f=function(e,t,a){var n=this;this.addLayer=function(){n.source=n.createSource(),n.layer=new m.a({source:n.source,extent:[65741.9087,6606901.2261,180921.4173,6747168.5691]}),n.layer.setOpacity(.7),n.onLayerCreatedCallbackFn(n.layer)},this.toLayerIds=function(e){return e.map(d.i).sort((function(e,t){return e-t}))},this.getSourceLayersParams=function(){return n.settings.ahvenanmaa.selectedLayers.length>0?"show:"+n.toLayerIds(n.settings.ahvenanmaa.selectedLayers).join(","):"hide:"+n.toLayerIds(Object.values(d.a)).join(",")},this.createSource=function(){var e={urls:[n.settings.ahvenanmaa.url.export],params:{layers:n.getSourceLayersParams()}},t=new g.a(e);return t.on("tileloadstart",(function(e){n.showLoadingAnimationFn(!0)})),t.on("tileloadend",(function(e){n.showLoadingAnimationFn(!1)})),t.on("tileloaderror",(function(e){n.showLoadingAnimationFn(!1)})),t},this.updateLayerSource=function(){n.layer&&(n.source=n.createSource(),n.layer.setSource(n.source))},this.selectedFeatureLayersChanged=function(e){n.settings=e,n.updateLayerSource()},this.identifyFeaturesAt=function(e,t,a){if(!n.layer||!Object(v.f)(n.layer.getExtent(),e))return Promise.resolve({results:[]});var i=new URLSearchParams({geometry:e.join(","),geometryType:"esriGeometryPoint",tolerance:"10",imageDisplay:t.join(",")+",96",mapExtent:a.join(","),layers:"visible:"+n.toLayerIds(n.settings.ahvenanmaa.selectedLayers).join(","),f:"json",returnGeometry:"true"}),r=new URL(n.settings.ahvenanmaa.url.identify);return r.search=String(i),fetch(String(r)).then((function(e){return e.json()}))},this.findFeatures=function(e){var t=new URLSearchParams({searchText:e,contains:"true",searchFields:"Namn , Beskrivning, Topografi",layers:n.toLayerIds(n.settings.ahvenanmaa.selectedLayers).join(","),f:"json",returnGeometry:"true",returnZ:"false"}),a=new URL(n.settings.ahvenanmaa.url.find);return a.search=String(t),fetch(String(a)).then((function(e){return e.json()}))},this.getForminnenDataLatestUpdateDate=function(){return n.forminnenDataLatestUpdateDate?Promise.resolve(n.forminnenDataLatestUpdateDate):fetch(n.settings.ahvenanmaa.url.forminnenUpdateDate).then((function(e){return e.json()})).then(n.parseUpdatedDate).then((function(e){return n.forminnenDataLatestUpdateDate=e,e}))},this.getMaritimtKulturarvDataLatestUpdateDate=function(){return n.maritimtKulturarvDataLatestUpdateDate?Promise.resolve(n.maritimtKulturarvDataLatestUpdateDate):fetch(n.settings.ahvenanmaa.url.maritimtKulturarvUpdateDate).then((function(e){return e.json()})).then(n.parseUpdatedDate).then((function(e){return n.maritimtKulturarvDataLatestUpdateDate=e,e}))},this.parseUpdatedDate=function(e){var t,a,n=null==e?void 0:e.data,i=Array.isArray(n)&&n.length>0?null===(a=null===(t=n[0])||void 0===t?void 0:t.attributes)||void 0===a?void 0:a.modified:void 0;return i?Promise.resolve(new Date(i)):Promise.reject(new Error("Ahvenanmaan updated date not found"))},this.settings=e,this.showLoadingAnimationFn=t,this.onLayerCreatedCallbackFn=a,this.addLayer()},y=function(e,t,a){var n=this;this.addLayer=function(){n.source=n.createSource(),n.layer=new m.a({source:n.source}),n.layer.setOpacity(.7),n.onLayerCreatedCallbackFn(n.layer)},this.createSource=function(){var e=new g.a({urls:[n.settings.museovirasto.url.export],params:{layers:n.getSourceLayerSelectionSettings(),layerDefs:n.getSourceLayerDefinitionFilterParams()}});return e.on("tileloadstart",(function(e){n.showLoadingAnimationFn(!0)})),e.on("tileloadend",(function(e){n.showLoadingAnimationFn(!1)})),e.on("tileloaderror",(function(e){n.showLoadingAnimationFn(!1)})),e},this.updateLayerSource=function(){n.layer&&(n.source=n.createSource(),n.layer.setSource(n.source))},this.getSourceLayerSelectionSettings=function(){var e=Object.values(d.h);if(e.length!==n.settings.museovirasto.selectedLayers.length){var t=n.toLayerIds(n.settings.museovirasto.selectedLayers);return t.length>0?"show:"+t.join(","):"hide:"+n.toLayerIds(e).join(",")}},this.getSourceLayerDefinitionFilterParams=function(){var e=[],t=n.settings.museovirasto.selectedMuinaisjaannosTypes;if(t.length>0&&t.length!=Object.values(d.g).length){var a=t.sort().map((function(e){return"tyyppi LIKE '%"+e+"%'"})).join(" OR ");e.push("("+a+")")}var i=n.settings.museovirasto.selectedMuinaisjaannosDatings;if(i.length>0&&i.length!=Object.values(d.e).length&&(a=i.sort().map((function(e){return"ajoitus LIKE '%"+e+"%'"})).join(" OR "),e.push("("+a+")")),e.length>0)return d.j[d.h.Muinaisjaannokset_piste]+":"+e.join(" AND ")},this.toLayerIds=function(e){return e.map((function(e){return d.j[e]})).sort((function(e,t){return e-t}))},this.selectedFeatureLayersChanged=function(e){n.settings=e,n.updateLayerSource()},this.selectedMuinaisjaannosTypesChanged=function(e){n.settings=e,n.updateLayerSource()},this.selectedMuinaisjaannosDatingsChanged=function(e){n.settings=e,n.updateLayerSource()},this.identifyFeaturesAt=function(e,t,a){var i=new URLSearchParams({geometry:e.join(","),geometryType:"esriGeometryPoint",tolerance:"10",imageDisplay:t.join(",")+",96",mapExtent:a.join(","),layers:"visible:"+n.toLayerIds(n.settings.museovirasto.selectedLayers).join(","),f:"json",returnGeometry:"true"}),r=new URL(n.settings.museovirasto.url.identify);return r.search=String(i),fetch(String(r)).then((function(e){return e.json()}))},this.findFeatures=function(e){var t=n.settings.museovirasto.selectedLayers;t.includes(d.h.Muinaisjaannokset_alue)&&(t=t.filter((function(e){return e!==d.h.Muinaisjaannokset_alue})));var a=new URLSearchParams({searchText:e,contains:"true",searchFields:"Kohdenimi, Nimi, KOHDENIMI",layers:n.toLayerIds(t).join(","),f:"json",returnGeometry:"true",returnZ:"false"}),i=new URL(n.settings.museovirasto.url.find);return i.search=String(a),fetch(String(i)).then((function(e){return e.json()}))},this.getDataLatestUpdateDate=function(){return n.dataLatestUpdateDate?Promise.resolve(n.dataLatestUpdateDate):fetch(n.settings.museovirasto.url.updateDate).then((function(e){return e.text()})).then((function(e){return(new DOMParser).parseFromString(e,"text/xml")})).then(n.parseSuunnitteluaineistoUpdatedDate)},this.parseSuunnitteluaineistoUpdatedDate=function(e){var t;return e.querySelectorAll("entry").forEach((function(e){var a,n;"http://paikkatieto.nba.fi/aineistot/suunnitteluaineisto"===(null===(a=e.querySelector("id"))||void 0===a?void 0:a.textContent)&&(t=null===(n=e.querySelector("updated"))||void 0===n?void 0:n.textContent)})),t?(n.dataLatestUpdateDate=new Date(t),Promise.resolve(n.dataLatestUpdateDate)):Promise.reject(new Error("Museovirasto updated date not found"))},this.settings=e,this.showLoadingAnimationFn=t,this.onLayerCreatedCallbackFn=a,this.addLayer()},b=a(177),E=a(179),j=a(102),L=a(81),w=a(113),M=a(85),_=a(263),S=a(141),O=a(74),D=function(e){var t=this;this.addCurrentPositionMarker=function(e){if(t.currentPositionFeature)t.currentPositionFeature.setGeometry(new O.a(e));else{var a=new j.a({color:"rgba(0, 0, 255, 1.0)"}),n=new L.a({color:"rgba(255, 255, 255, 1.0)",width:3});t.currentPositionFeature=new S.a({geometry:new O.a(e)}),t.currentPositionFeature.setStyle(new M.b({image:new w.a({fill:a,stroke:n,radius:7}),fill:a,stroke:n})),t.source.addFeature(t.currentPositionFeature)}},this.addSelectedLocationFeatureMarker=function(e){t.selectedLocationFeature?t.selectedLocationFeature.setGeometry(new O.a(e)):(t.selectedLocationFeature=new S.a({geometry:new O.a(e)}),t.selectedLocationFeature.setStyle(new M.b({image:new _.a({src:"images/map-pin.png"})})),t.source.addFeature(t.selectedLocationFeature))},this.onLayerCreatedCallbackFn=e,this.source=new E.a({}),this.layer=new b.a({source:this.source}),this.onLayerCreatedCallbackFn(this.layer)},C=a(18),A=a(169),P=a(261),T=a(21),K=function(e,t){var a=this;this.fetchGeoJson=function(){return Object(C.b)(a,void 0,void 0,(function(){return Object(C.c)(this,(function(e){switch(e.label){case 0:return[4,fetch(this.settings.models.url.geojson)];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},this.addFeaturesToLayer=function(e){a.source=new E.a({features:(new P.a).readFeatures(e)}),a.layer=new b.a({source:a.source,style:function(e){switch(e.getGeometry().getType()){case"Point":var t=e.getProperties();return t.registryItem.type===d.h.Muinaisjaannokset_piste?a.stylePointCircle:t.registryItem.type===d.h.Suojellut_rakennukset_piste?a.stylePointSquare:a.stylePointCircle;case"Polygon":return a.stylePolygon;default:return a.stylePointCircle}}}),a.onLayerCreatedCallbackFn(a.layer)},this.selectedFeatureLayersChanged=function(e){var t;a.settings=e,null===(t=a.layer)||void 0===t||t.setVisible(e.models.selectedLayers.length>0)},this.getLayer=function(){return a.layer},this.getDataLatestUpdateDate=function(){return Object(C.b)(a,void 0,void 0,(function(){var e;return Object(C.c)(this,(function(t){switch(t.label){case 0:return this.dataLatestUpdateDate?[2,Promise.resolve(this.dataLatestUpdateDate)]:[4,this.fetchGeoJson()];case 1:return e=t.sent(),[2,Object(T.h)(e.features)]}}))}))},this.settings=e,this.onLayerCreatedCallbackFn=t,this.stylePointCircle=new M.b({image:new w.a({stroke:new L.a({color:"black",width:2}),radius:7})}),this.stylePointSquare=new M.b({image:new A.a({stroke:new L.a({color:"black",width:2}),points:4,radius:7,angle:Math.PI/4})}),this.stylePolygon=new M.b({stroke:new L.a({color:"black",width:4}),fill:new j.a({color:"rgba(255, 255, 255, 0.01)"})}),this.fetchGeoJson().then(this.addFeaturesToLayer)},N=function(e,t){var a=this;this.loadFeaturesOnClickedCoordinate=function(e){a.eventListeners.showLoadingAnimation(!0);var t=a.ahvenanmaaTileLayer.identifyFeaturesAt(e.coordinate,a.map.getSize(),a.map.getView().calculateExtent(a.map.getSize())),n=a.museovirastoTileLayer.identifyFeaturesAt(e.coordinate,a.map.getSize(),a.map.getView().calculateExtent(a.map.getSize())),i=a.map.getFeaturesAtPixel(e.pixel,{layerFilter:function(e){return e===a.modelsLayer.getLayer()},hitTolerance:10}).map((function(e){return e.getProperties()}));Promise.all([t,n]).then((function(e){var t=e[0],n=e[1];a.eventListeners.showLoadingAnimation(!1);var r=t.results.concat(n.results);a.eventListeners.featuresSelected(r,i)}))},this.initGeolocation=function(){a.geolocation=new c.a({projection:a.view.getProjection(),tracking:!0,trackingOptions:{enableHighAccuracy:!0}}),a.geolocation.once("change:position",a.centerToCurrentPositions),a.geolocation.on("change:position",a.geolocationChanged)},this.geolocationChanged=function(){if(a.geolocation&&a.geolocation.getPosition()){var e=a.geolocation.getPosition();a.positionAndSelectedLocation.addCurrentPositionMarker(e)}},this.zoom=function(e){a.view.animate({zoom:a.view.getZoom()+e,duration:250})},this.selectedFeatureLayersChanged=function(e,t){switch(t){case d.b.Museovirasto:a.museovirastoTileLayer.selectedFeatureLayersChanged(e);break;case d.b.Ahvenanmaa:a.ahvenanmaaTileLayer.selectedFeatureLayersChanged(e);break;case d.b.Models:a.modelsLayer.selectedFeatureLayersChanged(e)}},this.selectedMuinaisjaannosTypesChanged=function(e){a.museovirastoTileLayer.selectedMuinaisjaannosTypesChanged(e)},this.selectedMuinaisjaannosDatingsChanged=function(e){a.museovirastoTileLayer.selectedMuinaisjaannosDatingsChanged(e)},this.searchFeatures=function(e){a.eventListeners.showLoadingAnimation(!0);var t=a.ahvenanmaaTileLayer.findFeatures(e),n=a.museovirastoTileLayer.findFeatures(e);Promise.all([t,n]).then((function(e){var t=e[0],n=e[1];a.eventListeners.showLoadingAnimation(!1);var i=t.results.concat(n.results);a.eventListeners.featureSearchReady(i)}))},this.selectedMaanmittauslaitosLayerChanged=function(e){a.maanmittauslaitosTileLayer.selectedMaanmittauslaitosLayerChanged(e)},this.setMapLocation=function(e){a.view.setCenter(e)},this.centerToCurrentPositions=function(){if(a.geolocation&&a.geolocation.getPosition()){var e=a.geolocation.getPosition();a.view.setCenter(e)}else a.initGeolocation()},this.showSelectedLocationMarker=function(e){a.positionAndSelectedLocation.addSelectedLocationFeatureMarker(e)},this.zoomIn=function(){a.zoom(1)},this.zoomOut=function(){a.zoom(-1)},this.fetchDataLatestUpdateDates=function(){Promise.all([a.museovirastoTileLayer.getDataLatestUpdateDate(),a.ahvenanmaaTileLayer.getForminnenDataLatestUpdateDate(),a.ahvenanmaaTileLayer.getMaritimtKulturarvDataLatestUpdateDate(),a.modelsLayer.getDataLatestUpdateDate()]).then((function(e){var t=e[0],n=e[1],i=e[2],r=e[3];a.eventListeners.dataLatestUpdateDatesReady({museovirasto:t,ahvenanmaaForminnen:n,ahvenanmaaMaritimtKulturarv:i,models:r})})).catch((function(){return a.eventListeners.dataLatestUpdateDatesReady({museovirasto:null,ahvenanmaaForminnen:null,ahvenanmaaMaritimtKulturarv:null,models:null})}))},this.eventListeners=t,i.a.defs("EPSG:3067","+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Object(l.a)(i.a),Object(o.i)("EPSG:3067").setExtent([50199.4814,6582464.0358,761274.6247,7799839.8902]),this.view=new s.a({center:[385249.63630000036,6672695.7579],projection:"EPSG:3067",zoom:8,enableRotation:!1}),this.map=new r.a({target:"map",view:this.view,controls:new u.a}),this.maanmittauslaitosTileLayer=new k(e,t.showLoadingAnimation,(function(e,t,n){a.map.getLayers().insertAt(0,e),a.map.getLayers().insertAt(1,t),a.map.getLayers().insertAt(2,n)})),this.ahvenanmaaTileLayer=new f(e,t.showLoadingAnimation,(function(e){a.map.getLayers().insertAt(3,e)})),this.museovirastoTileLayer=new y(e,t.showLoadingAnimation,(function(e){a.map.getLayers().insertAt(4,e)})),this.positionAndSelectedLocation=new D((function(e){a.map.getLayers().insertAt(5,e)})),this.modelsLayer=new K(e,(function(e){a.map.getLayers().insertAt(6,e)})),this.map.on("singleclick",this.loadFeaturesOnClickedCoordinate)},F=(a(256),a(512),a(0)),x=a(176),R=function(e){var t=e.visible;return F.createElement("div",{id:"loading-animation",className:t?"":"hidden"},F.createElement("img",{src:"images/loading.gif"}))},U=function(e){var t=e.onClick;return F.createElement("div",{id:"map-button-zoom-in",className:"map-button"},F.createElement("button",{type:"button",className:"btn btn-primary",title:"Lähennä",onClick:t},F.createElement("span",{className:"glyphicon glyphicon-plus","aria-hidden":"true"})))},I=function(e){var t=e.onClick;return F.createElement("div",{id:"map-button-zoom-out",className:"map-button"},F.createElement("button",{type:"button",className:"btn btn-primary",title:"Loitonna",onClick:t},F.createElement("span",{className:"glyphicon glyphicon-minus","aria-hidden":"true"})))},Y=function(e){var t=e.onClick;return F.createElement("div",{id:"map-button-position",className:"map-button"},F.createElement("button",{type:"button",className:"btn btn-primary",title:"Keskitä kartta nykyiseen sijaintiisi",onClick:t},F.createElement("span",{className:"glyphicon glyphicon-screenshot","aria-hidden":"true"})))},V=function(e){var t=e.onClick;return F.createElement("div",{id:"map-button-info",className:"map-button"},F.createElement("button",{type:"button",className:"btn btn-primary",title:"Ohjeita sivuston käyttöön",onClick:t},F.createElement("span",{className:"glyphicon glyphicon-info-sign","aria-hidden":"true"})))},z=a(84),H=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.has3dModels,r=e.children,s=Object(T.b)(n),l=s&&Object(z.a)(s),o=function(e){e.preventDefault(),a()};return F.createElement("div",{className:"panel panel-default"},F.createElement("div",{className:"panel-heading feature-collapse-panel-heading",role:"tab"},F.createElement("h4",{className:"panel-title"},F.createElement("a",{role:"button",href:"",onClick:o},Object(T.c)(n)),F.createElement("a",{className:"pull-right",href:l},F.createElement("span",{className:"glyphicon glyphicon-link","aria-hidden":"true"}))),F.createElement("h6",{className:"panel-title"},F.createElement("a",{role:"button",href:"",onClick:o},F.createElement("img",{className:"feature-icon",src:Object(T.f)(n,i)}),F.createElement("span",null,Object(T.g)(n))))),F.createElement("div",{className:"panel-collapse collapse "+(t?"in":""),role:"tabpanel"},F.createElement("div",{className:"panel-body"},r)))},G=function(e){var t=e.label,a=e.value,n=e.children,i=Object(T.n)(a);return n||i?F.createElement("div",{className:"form-group"},F.createElement("label",null,t),n||F.createElement("p",null,i)):null},B=function(e){var t=e.feature,a=Object(T.m)(t.attributes.ajoitus);return a?F.createElement("span",{className:"label label-default"},a):null},J=function(e){var t=e.feature,a=Object(T.e)(t),n=Object(T.d)(t);return a?F.createElement("p",null,"Lisää tietoa kohteesta Museoviraston"," ",F.createElement("a",{href:a,target:"_blank"},n),"."):null},W=function(){var e=F.useState(!1),t=e[0],a=e[1];return F.createElement("div",{className:"panel panel-default"},F.createElement("div",{className:"panel-heading feature-collapse-panel-heading",role:"tab"},F.createElement("a",{role:"button",href:"",onClick:function(e){e.preventDefault(),a(!t)}},F.createElement("span",{className:"glyphicon glyphicon-info-sign","aria-hidden":"true"})," ","Lisätietoa 3D-malleista")),F.createElement("div",{className:"panel-collapse collapse "+(t?"in":""),role:"tabpanel"},F.createElement("div",{className:"panel-body"},F.createElement("p",null,"Nämä 3D-mallit ovat"," ",F.createElement("a",{href:"./3d/",target:"_blank"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia"," ",F.createElement("a",{href:"https://sketchfab.com",target:"_blank"},"Sketchfab")," ","-palvelusta."),F.createElement("p",null,"Mallit saa käynnistettyä nuolipainikkeesta. Käynnistymisen jälkeen mallin saa koko ruudun tilaan oikean alareunan"," ",F.createElement("img",{src:"images/sketchfab-fullscreen.png"})," painikkeesta tai painamalla näppäimistöltä ",F.createElement("kbd",null,"f")," painiketta."),F.createElement("p",null,"Mallin ohjaus:"),F.createElement("ul",null,F.createElement("li",null,F.createElement("b",null,"Kääntäminen:")," pidä vasen hiirenpainike pohjaan painettuna ja liikuta hiirtä. Kosketusnäytöillä pidä sormi painettuna ja liikuta sormea."),F.createElement("li",null,F.createElement("b",null,"Suurennus ja pienennys:")," käytä hiiren rullaa. Kosketusnäytöillä käytä kahden sormen nipistyselettä."),F.createElement("li",null,F.createElement("b",null,"Kohdistuksen siirtäminen:")," pidä oikea hiirenpainike pohjaan painettuna ja liikuta hiirtä. Kosketusnäytöillä pidä kaksi sormea painettuna ja liikuta sormia.")))))},q=function(e){var t=e.models,a=void 0===t?[]:t;return 0===a.length?null:F.createElement(F.Fragment,null,F.createElement("br",null),F.createElement("h4",null,"Kohteen 3D-mallit"),F.createElement(W,null),a.map((function(e){return F.createElement("div",{className:"form-group",key:e.model.url},F.createElement("label",null,e.model.name),F.createElement("iframe",{title:e.model.name,width:"100%",height:"400",src:e.model.url+"/embed",allow:"fullscreen",allowFullScreen:!0}))})))},Z=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return F.createElement(H,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},F.createElement("form",null,F.createElement(G,{label:"Kohdenimi",value:n.attributes.kohdenimi}),F.createElement(G,{label:"Kunta",value:n.attributes.kunta}),F.createElement(G,{label:"Ajoitus"},F.createElement("p",null,F.createElement("span",null,Object(T.n)(n.attributes.ajoitus)),F.createElement(B,{feature:n}))),F.createElement(G,{label:"Tyyppi",value:n.attributes.tyyppi}),F.createElement(G,{label:"Alatyyppi",value:n.attributes.alatyyppi}),F.createElement(G,{label:"Laji",value:n.attributes.laji}),F.createElement(J,{feature:n}),t&&F.createElement(q,{models:r})))},Q=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return F.createElement(H,{isOpen:t,onToggleOpen:a,feature:n},F.createElement("form",null,F.createElement(G,{label:"Kohdenimi",value:n.attributes.kohdenimi}),F.createElement(G,{label:"Kunta",value:n.attributes.kunta}),F.createElement(G,{label:"Laji",value:n.attributes.laji}),F.createElement(J,{feature:n})))},X=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return F.createElement(H,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},F.createElement("form",null,F.createElement(G,{label:"Kohdenimi",value:n.attributes.kohdenimi}),n.layerName===d.h.RKY_alue&&F.createElement(G,{label:"Nimi",value:n.attributes.nimi}),F.createElement(J,{feature:n}),t&&F.createElement(q,{models:r})))},$=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature;return F.createElement(H,{isOpen:t,onToggleOpen:a,feature:n},F.createElement("form",null,F.createElement(G,{label:"Kohdenimi",value:n.attributes.Nimi}),F.createElement(J,{feature:n})))},ee=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return F.createElement(H,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},F.createElement("form",null,F.createElement(G,{label:"Kohdenimi",value:n.attributes.kohdenimi}),n.layerName==d.h.Suojellut_rakennukset_piste&&F.createElement(G,{label:"Rakennusnimi",value:n.attributes.rakennusnimi}),F.createElement(G,{label:"Kunta",value:n.attributes.kunta}),F.createElement(G,{label:"Suojeluryhmä",value:n.attributes.suojeluryhmä}),F.createElement(J,{feature:n}),t&&F.createElement(q,{models:r})))},te=function(e){var t=e.feature,a=Object(T.e)(t);return a?F.createElement("p",null,"Lisää tietoa kohteesta löytyy"," ",F.createElement("a",{href:a,target:"_blank"},"kuntakohtaisesta Pdf-tiedostosta"),", josta voit etsiä kohteen tunnisteella"," ",F.createElement("span",{className:"label label-default"},t.attributes["Fornlämnings ID"]),"."):null},ae=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return F.createElement(H,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},F.createElement("form",null,F.createElement(G,{label:"Nimi",value:n.attributes.Namn}),F.createElement(G,{label:"Kunta",value:n.attributes.Kommun}),F.createElement(G,{label:"Kylä",value:n.attributes.By}),F.createElement(G,{label:"Kuvaus",value:n.attributes.Beskrivning}),F.createElement(G,{label:"Sijainti",value:n.attributes.Topografi}),F.createElement(G,{label:"Tunniste",value:n.attributes["Fornlämnings ID"]}),F.createElement(te,{feature:n}),t&&F.createElement(q,{models:r})))};!function(e){e.Visible="Visible",e.Closing="Closing",e.Hidden="Hidden"}(n||(n={}));var ne,ie=function(e){var t=e.title,a=e.visibility,i=e.hidePage,r=e.children,s="";switch(a){case n.Visible:s="page-right-visible";break;case n.Closing:s="page-right-closing";break;case n.Hidden:s="page-right-hidden"}return F.createElement("div",{className:"container page "+s},a!==n.Hidden&&F.createElement("div",{className:"row pageHeader"},F.createElement("div",{className:"col-xs-3"},F.createElement("button",{className:"btn btn-primary btn-sm",onClick:i},F.createElement("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"}),"Sulje")),F.createElement("div",{className:"col-xs-9"},F.createElement("span",{className:"pageHeaderText"},t))),a!==n.Hidden&&F.createElement("div",{className:"pageContent"},r))},re=function(e){var t=e.isOpen,a=e.onToggleOpen,n=e.feature,i=e.models,r=void 0===i?[]:i;return F.createElement(H,{isOpen:t,onToggleOpen:a,feature:n,has3dModels:r.length>0},F.createElement("form",null,F.createElement(G,{label:"Nimi",value:n.attributes.Namn}),F.createElement(G,{label:"Kunta",value:n.attributes.Kommun}),F.createElement(G,{label:"Kylä",value:n.attributes.By}),F.createElement(G,{label:"Kuvaus",value:n.attributes.Beskrivning}),F.createElement(G,{label:"Tarkkuus",value:n.attributes.Precision}),F.createElement(G,{label:"Tunniste",value:n.attributes.FornID}),F.createElement(G,{label:"Laki",value:n.attributes.Lagrum}),t&&F.createElement(q,{models:r})))},se=function(e){var t=e.feature,a=e.id,n=e.onTogglePanelOpen,i=e.openPanelId,r=e.models,s={isOpen:i===a,onToggleOpen:function(){return n(a)},models:Object(T.l)(t,r)};switch(t.layerName){case d.h.Muinaisjaannokset_piste:return F.createElement(Z,Object(C.a)({feature:t},s));case d.h.Muinaisjaannokset_alue:return F.createElement(Q,Object(C.a)({feature:t},s));case d.h.RKY_alue:case d.h.RKY_viiva:case d.h.RKY_piste:return F.createElement(X,Object(C.a)({feature:t},s));case d.h.Maailmanperinto_alue:case d.h.Maailmanperinto_piste:return F.createElement($,Object(C.a)({feature:t},s));case d.h.Suojellut_rakennukset_alue:case d.h.Suojellut_rakennukset_piste:return F.createElement(ee,Object(C.a)({feature:t},s));case d.a.Fornminnen:return F.createElement(ae,Object(C.a)({feature:t},s));case d.a.MaritimtKulturarv:return F.createElement(re,Object(C.a)({feature:t},s))}return null},le=function(e){return e.layerName+"-"+Object(T.a)(e)},oe=function(e){var t=e.visibility,a=e.hidePage,n=e.features,i=e.models,r=F.useState(""),s=r[0],l=r[1],o=function(e){return l(s===e?"":e)};return F.createElement(ie,{title:"Valitut kohteet",visibility:t,hidePage:a},F.createElement("div",{className:"panel-group",role:"tablist","aria-multiselectable":"true"}),n&&n.map((function(e){return F.createElement(se,{key:le(e),id:le(e),feature:e,onTogglePanelOpen:o,openPanelId:s,models:i})})))},ue=function(e){var t=e.hidePage,a=e.feature,n=Object(T.c)(a),i=Object(T.g)(a),r=Object(T.f)(a),s=Object(T.b)(a),l=s&&Object(z.a)(s);return F.createElement("a",{href:l,className:"list-group-item search-result-row",onClick:t},F.createElement("h4",{className:"list-group-item-heading"},n),F.createElement("p",{className:"list-group-item-text"},F.createElement("img",{className:"feature-icon",src:r}),F.createElement("span",null,i)))},ce=function(e){var t=e.hidePage,a=e.features;return a?F.createElement(F.Fragment,null,F.createElement("h5",{id:"search-result-header"},F.createElement("span",null,"Hakutulokset"),F.createElement("small",null," (",a.length," kpl)")),F.createElement("div",{className:"list-group"},a.map((function(e){return F.createElement(ue,{key:e.layerName+"-"+Object(T.a)(e),feature:e,hidePage:t})})))):null},me=function(){return F.createElement("div",{className:"alert alert-danger",role:"alert"},"Hakusanan pitää olla vähintään kolme merkkiä")},pe=function(e){var t=e.visibility,a=e.hidePage,i=e.searchFeatures,r=e.searchResultFeatures,s=F.useState(""),l=s[0],o=s[1],u=F.useState(!1),c=u[0],m=u[1],p=F.useRef(null);F.useEffect((function(){t===n.Visible&&setTimeout((function(){var e;return null===(e=p.current)||void 0===e?void 0:e.focus()}),500)}),[t]);return F.createElement(ie,{title:"Hae kohteita",visibility:t,hidePage:a},F.createElement("form",{className:c?"has-error":void 0,onSubmit:function(e){e.stopPropagation(),e.preventDefault(),l.trim().length<3?m(!0):(m(!1),i(l))}},c&&F.createElement(me,null),F.createElement("div",{className:"input-group"},F.createElement("input",{type:"text",ref:p,className:"form-control",placeholder:"Kirjoita kohteen nimi tai sen osa",value:l,onChange:function(e){return o(e.target.value)}}),F.createElement("span",{className:"input-group-btn"},F.createElement("button",{className:"btn btn-default",type:"submit"},"Hae")))),F.createElement(ce,{features:r,hidePage:a}))},he=function(e){var t=e.title,a=e.children;return F.createElement("div",{className:"panel panel-default"},F.createElement("div",{className:"panel-heading"},t),F.createElement("div",{className:"panel-body"},a))},de=function(){return F.createElement(he,{title:"Tietoa sivustosta"},F.createElement("p",null,"Tällä sivustolla näet kartalla seuraavien rekisterien tiedot:"),F.createElement("h5",null,"Museovirasto"),F.createElement("ul",null,F.createElement("li",null,F.createElement("a",{href:"https://www.kyppi.fi/palveluikkuna/mjreki/read/asp/r_default.aspx",target:"_blank"},"Muinaisjäännösrekisteri")),F.createElement("li",null,F.createElement("a",{href:"https://www.kyppi.fi/palveluikkuna/rapea/read/asp/r_default.aspx",target:"_blank"},"Rakennusperintörekisteri")),F.createElement("li",null,F.createElement("a",{href:"https://www.museovirasto.fi/fi/tietoa-meista/kansainvalinen-toiminta/maailmanperintokohteet-suomessa",target:"_blank"},"Maailmanperintökohteet")),F.createElement("li",null,F.createElement("a",{href:"http://www.rky.fi/",target:"_blank"},"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"))),F.createElement("h5",null,"Ahvenamaan paikallishallinto"),F.createElement("ul",null,F.createElement("li",null,F.createElement("a",{href:"http://www.regeringen.ax/kulturarv/arkeologi-fornlamningar/fornlamningsregistret",target:"_blank"},"Muinaisjäännösrekisteri")),F.createElement("li",null,F.createElement("a",{href:"https://www.regeringen.ax/kulturarv/arkeologi-fornlamningar/marinarkeologi",target:"_blank"},"Merellisen kulttuuriperinnön rekisteri"))),F.createElement("p",null,"Kaikki näytettävät kohteet ovat avointa dataa ja haettu rekisterin ylläpitäjän tarjoamasta karttapalvelusta."),F.createElement("p",null,"Kohteista saa lisätietoikkunan näkyviin klikkaamalla kohdetta kartalla. Tästä näkymästä on myös linkki kohteen lisätietoihin rekisterin ylläpitäjän sivustolla. Kohteen otsikon vieressä olevasta kuvakkeesta (",F.createElement("span",{className:"glyphicon glyphicon-link","aria-hidden":"true"}),") saa talteen pysyvän linkin kohteen sijaintiin kartalla."),F.createElement("h5",null,"3D-mallit"),F.createElement("p",null,"Joillekin kohteille on saataville myös 3D-malleja"," ",F.createElement("a",{href:"./3d/",target:"_blank"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia"," ",F.createElement("a",{href:"https://sketchfab.com",target:"_blank"},"Sketchfab")," ","-palvelusta."),F.createElement("h5",null,"Paikannus"),F.createElement("p",null,"Kartta keskitetään oletuksena nykyiseen sijaintiisi jos annat selaimelle luvan luovuttaa se tieto. Keskityksen nykyiseen sijaintiin voi suorittaa myös myöhemmin"," ",F.createElement("span",{className:"glyphicon glyphicon-screenshot","aria-hidden":"true"})," ","painikkeesta."),F.createElement("h5",null,"Haku"),F.createElement("p",null,"Museoviraston rekisterien kohteita pystyy hakemaan nimen perusteella hakunäkymässä (",F.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":"true"}),"). Hakutuloksen klikkaaminen keskittää kartan kohteeseen ja lisää siihen paikkamerkin ",F.createElement("img",{src:"images/map-pin-small.png"}),"."),F.createElement("h5",null,"Asetukset"),F.createElement("p",null,"Pohjakartan voi vaihtaa taustakartan ja maastokartan välillä asetuksista (",F.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"}),"). Samasta näkymästä voi piilottaa Museoviraston rekisterien kohteita tyypin ja muinaisjäännöksiä myös ajoituksen mukaan jos haluaa tarkastella esimerkiksi pelkästään muinaisjäännöksiä rautakaudelta."),F.createElement("p",null,"Palautetta sivustosta otetaan mielellään vastaan osoitteeseen"," ",F.createElement("a",{href:"mailto:antti.kekki@gmail.com"},"antti.kekki@gmail.com")))},ke=function(){return F.createElement(he,{title:"Karttasymbolit"},F.createElement("div",null,F.createElement("h5",null,"Museoviraston muinaisjäännösrekisteri"),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/muinaisjaannos_kohde.png"}),F.createElement("span",null,"Kiinteä muinaisjäännös")),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/muinaisjaannos_alue.png"}),F.createElement("span",null,"Kiinteä muinaisjäännös (alue)")),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/muu_kulttuuriperintokohde_kohde.png"}),F.createElement("span",null,"Muu kulttuuriperintökohde")),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/muu-kulttuuriperintokohde-alue.png"}),F.createElement("span",null,"Muu kulttuuriperintökohde (alue)"))),F.createElement("br",null),F.createElement("div",null,F.createElement("h5",null,"Ahvenanmaan muinaisjäännösrekisteri"),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/ahvenanmaa_muinaisjaannos.png"}),F.createElement("span",null,"Kohde"))),F.createElement("br",null),F.createElement("div",null,F.createElement("h5",null,"Ahvenanmaan merellisen kulttuuriperinnön rekisteri"),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/ahvenanmaa_hylky.png"}),F.createElement("span",null,"Kohde"))),F.createElement("br",null),F.createElement("div",null,F.createElement("h5",null,"Rakennusperintörekisteri"),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/rakennusperintorekisteri_rakennus.png"}),F.createElement("span",null,"Rakennus")),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/rakennusperintorekisteri_alue.png"}),F.createElement("span",null,"Alue"))),F.createElement("br",null),F.createElement("div",null,F.createElement("h5",null,"Maailmanperintökohteet"),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/maailmanperinto_piste.png"}),F.createElement("span",null,"Kohde")),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/maailmanperinto_alue.png"}),F.createElement("span",null,"Alue"))),F.createElement("br",null),F.createElement("div",null,F.createElement("h5",null,"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/rky_piste.png"}),F.createElement("span",null,"Kohde")),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/rky_viiva.png"}),F.createElement("span",null,"Viiva (esim. tie)")),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/rky_alue.png"}),F.createElement("span",null,"Alue"))),F.createElement("br",null),F.createElement("div",null,F.createElement("h5",null,"3D-mallit (",F.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),F.createElement("p",null,F.createElement("img",{className:"feature-icon",src:"images/3d_malli_circle.png"}),F.createElement("img",{className:"feature-icon",src:"images/3d_malli_square.png"}),F.createElement("span",null,"Kohde sisältää 3D-malleja"))))},ge=function(){return F.createElement(he,{title:"Avoin data, lisenssit ja lähdekoodi"},F.createElement("p",null,"Museoviraston rekistereistä tietoa haetaan"," ",F.createElement("a",{href:"https://www.avoindata.fi/data/fi/dataset/museoviraston-kulttuuriymparistoaineistot-suojellut-kohteet-wms-palvelu"},"avoimen rajapinnan")," ","kautta (",F.createElement("a",{href:"https://creativecommons.org/licenses/by/4.0/"},"Creative Commons CC By 4.0 -lisenssillä"),")."),F.createElement("p",null,"Ahvenanmaan maakuntahallinnon rekisteristö tietoa haetaan"," ",F.createElement("a",{href:"https://www.kartor.ax/datasets/fornminnen"},"avoimen rajapinnan")," ","kautta (",F.createElement("a",{href:"https://creativecommons.org/licenses/by/4.0/"},"Creative Commons CC By 4.0 -lisenssillä"),")."),F.createElement("p",null,"Taustakarttana on"," ",F.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/kartta-ja-paikkatietojen-rajapintapalvelut-17"},"Maanmittauslaitoksen")," ","tausta-, ortokuva- ja peruskartta (",F.createElement("a",{href:"https://www.maanmittauslaitos.fi/avoindata-lisenssi-cc40"}," ","Creative Commons Nimeä 4.0 Kansainvälinen -lisenssillä"),")."),F.createElement("p",null,"3D-mallit ovat avoimesta ",F.createElement("a",{href:"./3d/"},"tietokannasta"),", joka listaa harrastajien sekä virallisen toimijoiden (museot, Museovirasto, Ahvenanmaan paikallioshallinto) tekemiä 3D-mallinnuksia. Mallien lisenssit on listattu tietokannassa mallikohtaisesti."),F.createElement("p",null,"Tämän sivuston tekninen toteutus on"," ",F.createElement("a",{href:"https://github.com/anttikekki/muinaismuistot"},"avointa lähdekoodia"),", lisenssinä on"," ",F.createElement("a",{href:"https://github.com/anttikekki/muinaismuistot/blob/master/LICENSE"},"MIT"),"."))},ve=function(){return F.createElement(he,{title:"Versiohistoria"},F.createElement("h5",null,"Toukokuu 2020"),F.createElement("p",null,"Päivitetty Museoviraston"," ",F.createElement("a",{href:"http://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer",target:"_blank"},"paikkatietoaineiston")," ","WMS-karttatasojen nimet koska niistä poistuivat ääkköset."),F.createElement("br",null),F.createElement("h5",null,"Huhtikuu 2020"),F.createElement("p",null,"Lisätty 3D-mallien"," ",F.createElement("a",{href:"./3d/",target:"_blank"},"tietokanta")," ","ja karttaan ",F.createElement("img",{src:"images/3d_malli_circle.png"}),F.createElement("img",{src:"images/3d_malli_square.png"})," korostus kohteille, joille löytyy 3D-malleja."),F.createElement("br",null),F.createElement("h5",null,"Helmikuu 2020"),F.createElement("p",null,'Lisätty kartta-aineistojen viimeisin päivitysaika näkyviin "Lisätietoja sivustosta" -sivulle.'),F.createElement("p",null,"Paikannus päivittää nyt automaattisesti omaa sijaintia kartalla."),F.createElement("br",null),F.createElement("h5",null,"Elokuu 2019"),F.createElement("p",null,"Siirrytty käyttämään Ahvenanmaan maakuntahallinnon uutta"," ",F.createElement("a",{href:"https://www.kartor.ax/datasets/fornminnen"},"kartor.ax")," ","karttapalvelua. Samalla kohteiden haku alkoi toimimaan myös Ahvenanmaan kohteille."),F.createElement("p",null,"Kartalle klikattujen kohteiden listassa näkyy nyt otsikossa kohteen nimi. Listassa voi nyt myös olla monta saman tyyppistä kohdetta."),F.createElement("br",null),F.createElement("h5",null,"Heinäkuu 2019"),F.createElement("p",null,"Korjattu Museoviraston muinaisjäännösrekisterin pisteiden filtteröinti ajoituksen ja tyypin perusteella."),F.createElement("br",null),F.createElement("h5",null,"Joulukuu 2018"),F.createElement("p",null,"Siirrytty käyttämään Maanmittauslaitoksen uutta"," ",F.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/kartta-ja-paikkatietojen-rajapintapalvelut-17"},"karttapalvelua"),", jonka myötä taustakartan ulkonäkö muuttui selkeämmäksi ja"," ",F.createElement("a",{href:"https://www.maanmittauslaitos.fi/kartat-ja-paikkatieto/asiantuntevalle-kayttajalle/tuotekuvaukset/ortokuva"},"Ortokuvat")," ","saatiin käyttöön."),F.createElement("p",null,"Siirrytty käyttämään Museoviraston uutta"," ",F.createElement("a",{href:"https://www.avoindata.fi/data/fi/dataset/museoviraston-kulttuuriymparistoaineistot-suojellut-kohteet-wms-palvelu"},"karttapalvelua"),', jonka myötä saatiin käyttöön ruskeat "Muu kulttuuriperintökohde" -pisteet kartalle.'),F.createElement("br",null),F.createElement("h5",null,"Marraskuu 2017"),F.createElement("p",null,"Lisätty kartalle Ahvenanmaan maakuntahallinnon"," ",F.createElement("a",{href:"http://www.regeringen.ax/kulturarv/arkeologi-fornlamningar/fornlamningsregistret"},"muinaijäännösten rekisteri"),"."),F.createElement("br",null),F.createElement("h5",null,"Lokakuu 2015"),F.createElement("p",null,"Ensimmäinen versio julkaistu."))},fe=function(e){var t=e.date;return void 0===t?F.createElement("p",null,"Tietoa selvitetään parhaillaan..."):null===t?F.createElement("p",null,"Päivityshetkeä ei valitettavasti saatu selville"):F.createElement("p",null,t.toLocaleDateString("fi"))},ye=function(e){var t=e.dataLatestUpdateDates;return F.createElement(he,{title:"Aineisto päivitetty viimeksi"},F.createElement("h5",null,"Museoviraston aineistot"),F.createElement(fe,{date:null==t?void 0:t.museovirasto}),F.createElement("h5",null,"Ahvenamaan muinaisjäännösrekisteri"),F.createElement(fe,{date:null==t?void 0:t.ahvenanmaaForminnen}),F.createElement("h5",null,"Ahvenamaan merellisen kulttuuriperinnön rekisteri"),F.createElement(fe,{date:null==t?void 0:t.ahvenanmaaMaritimtKulturarv}),F.createElement("h5",null,"3D-mallit (",F.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),F.createElement(fe,{date:null==t?void 0:t.models}))},be=function(e){var t=e.visibility,a=e.hidePage,n=e.dataLatestUpdateDates;return F.createElement(ie,{title:"Lisätietoja sivustosta",visibility:t,hidePage:a},F.createElement(ye,{dataLatestUpdateDates:n}),F.createElement(de,null),F.createElement(ke,null),F.createElement(ge,null),F.createElement(ve,null))},Ee=function(e){var t=e.onClick;return F.createElement("div",{id:"map-button-search",className:"map-button"},F.createElement("button",{type:"button",className:"btn btn-primary",title:"Hae kohteita",onClick:t},F.createElement("span",{className:"glyphicon glyphicon-search","aria-hidden":"true"})))},je=function(e){var t=e.layer,a=e.selectedLayer,n=e.onSelectLayer,i=t===a;return F.createElement("label",{className:"btn btn-default "+(i?"active":"")},F.createElement("input",{type:"radio",name:"selectedMapLayer",checked:i,onChange:function(){return n(t)}}),t)},Le=function(e){var t=e.selectedLayer,a=e.onSelectLayer;return F.createElement(he,{title:"Karttapohja"},F.createElement("div",{className:"btn-group","data-toggle":"buttons"},Object.values(d.c).map((function(e){return F.createElement(je,{key:e,layer:e,selectedLayer:t,onSelectLayer:a})}))))},we=function(e){var t=e.label,a=e.layer,n=e.selectedLayers,i=e.onSelectLayer,r=n.includes(a);return F.createElement("div",{className:"checkbox sub-layer-select-checkbox-container"},F.createElement("label",null,F.createElement("input",{type:"checkbox",onChange:function(){return i(a)},checked:r}),Object(T.j)(a).map((function(e,t){return F.createElement("img",{className:"feature-icon",key:t,src:e})})),F.createElement("span",null,t)))},Me=function(e){var t=e.selectedMuseovirastoLayers,a=e.selectedAhvenanmaaLayers,n=e.selectedModelLayers,i=e.onSelectMuseovirastoLayer,r=e.onSelectAhvenanmaaLayer,s=e.onSelectModelLayer;return F.createElement(he,{title:"Kartalla näkyvät kohteet"},F.createElement("form",null,F.createElement("h5",null,"Valtakunnallisesti merkittävät rakennetut kulttuuriympäristöt"),F.createElement(we,{label:"Alueet",layer:d.h.RKY_alue,selectedLayers:t,onSelectLayer:i}),F.createElement(we,{label:"Viivat (esim. tie)",layer:d.h.RKY_viiva,selectedLayers:t,onSelectLayer:i}),F.createElement(we,{label:"Pisteet",layer:d.h.RKY_piste,selectedLayers:t,onSelectLayer:i}),F.createElement("h5",null,"Maailmanperintökohteet"),F.createElement(we,{label:"Alueet",layer:d.h.Maailmanperinto_alue,selectedLayers:t,onSelectLayer:i}),F.createElement(we,{label:"Pisteet",layer:d.h.Maailmanperinto_piste,selectedLayers:t,onSelectLayer:i}),F.createElement("h5",null,"Rakennusperintörekisteri"),F.createElement(we,{label:"Rakennetut alueet",layer:d.h.Suojellut_rakennukset_alue,selectedLayers:t,onSelectLayer:i}),F.createElement(we,{label:"Rakennukset",layer:d.h.Suojellut_rakennukset_piste,selectedLayers:t,onSelectLayer:i}),F.createElement("h5",null,"Museoviraston muinaisjäännösrekisteri"),F.createElement(we,{label:"Alueet",layer:d.h.Muinaisjaannokset_alue,selectedLayers:t,onSelectLayer:i}),F.createElement(we,{label:"Pisteet",layer:d.h.Muinaisjaannokset_piste,selectedLayers:t,onSelectLayer:i}),F.createElement("h5",null,"Ahvenamaan muinaisjäännösrekisteri"),F.createElement(we,{label:"Kohde",layer:d.a.Fornminnen,selectedLayers:a,onSelectLayer:r}),F.createElement("h5",null,"Ahvenamaan merellisen kulttuuriperinnön rekisteri"),F.createElement(we,{label:"Kohde",layer:d.a.MaritimtKulturarv,selectedLayers:a,onSelectLayer:r}),F.createElement("h5",null,"3D-mallit (",F.createElement("a",{href:"./3d/",target:"_blank"},"lisätietoa"),")"),F.createElement(we,{label:"3D-mallit",layer:d.d.ModelLayer,selectedLayers:n,onSelectLayer:s})))},_e=function(e){var t=e.type,a=e.selectedMuinaisjaannosTypes,n=e.onSelectType,i=a.includes(t);return F.createElement("div",{className:"checkbox"},F.createElement("label",null,F.createElement("input",{type:"checkbox",onChange:function(){return n(t)},checked:i}),t))},Se=function(e){var t=e.dating,a=e.selectedMuinaisjaannosDatings,n=e.onSelectDating,i=a.includes(t);return F.createElement("div",{className:"checkbox"},F.createElement("label",null,F.createElement("input",{type:"checkbox",onChange:function(){return n(t)},checked:i}),t))},Oe=function(e){var t=e.selectedMuinaisjaannosTypes,a=e.selectedMuinaisjaannosDatings,n=e.onSelectMuinaisjaannosType,i=e.onSelectMuinaisjaannosDating;return F.createElement(he,{title:"Kartalla näkyvät muinaisjäännökset"},F.createElement("form",null,F.createElement("div",{className:"well well-sm"},"Rajoitus toimii vain Museoviraston muijaisjäännöksien pisteille (",F.createElement("img",{src:"images/muinaisjaannos_kohde.png"})," ja",F.createElement("img",{src:"images/muu_kulttuuriperintokohde_kohde.png"}),") mutta ei alueille (",F.createElement("img",{src:"images/muinaisjaannos_alue.png"})," ja",F.createElement("img",{src:"images/muu-kulttuuriperintokohde-alue.png"}),"). Rajaus ei valitettavasti toimi Ahvenanmaan muinaisjäännöksiin."),F.createElement("h5",null,"Tyyppi"),Object.values(d.g).map((function(e){return F.createElement(_e,{key:e,type:e,selectedMuinaisjaannosTypes:t,onSelectType:n})})),F.createElement("h5",null,"Ajoitus"),Object.values(d.e).map((function(e){return F.createElement(Se,{key:e,dating:e,selectedMuinaisjaannosDatings:a,onSelectDating:i})}))))},De=function(e){var t=e.visibility,a=e.hidePage,n=e.settings,i=e.onSelectMaanmittauslaitosLayer,r=e.onSelectMuseovirastoLayer,s=e.onSelectAhvenanmaaLayer,l=e.onSelectModelLayer,o=e.onSelectMuinaisjaannosType,u=e.onSelectMuinaisjaannosDating;return F.createElement(ie,{title:"Asetukset",visibility:t,hidePage:a},F.createElement(Le,{selectedLayer:n.maanmittauslaitos.selectedLayer,onSelectLayer:i}),F.createElement(Me,{selectedMuseovirastoLayers:n.museovirasto.selectedLayers,selectedAhvenanmaaLayers:n.ahvenanmaa.selectedLayers,selectedModelLayers:n.models.selectedLayers,onSelectMuseovirastoLayer:r,onSelectAhvenanmaaLayer:s,onSelectModelLayer:l}),F.createElement(Oe,{selectedMuinaisjaannosTypes:n.museovirasto.selectedMuinaisjaannosTypes,selectedMuinaisjaannosDatings:n.museovirasto.selectedMuinaisjaannosDatings,onSelectMuinaisjaannosType:o,onSelectMuinaisjaannosDating:u}))},Ce=function(e){var t=e.onClick;return F.createElement("div",{id:"map-button-settings",className:"map-button"},F.createElement("button",{type:"button",className:"btn btn-primary",title:"Kartan asetukset",onClick:t},F.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"})))};!function(e){e.Search="searchPage",e.Info="infoPage",e.Settings="settingsPage",e.Details="detailsPage"}(ne||(ne={}));var Ae=function(e,t){return t.includes(e)?t.filter((function(t){return t!==e})):Object(C.d)(t,[e])},Pe=function(e,t){var a=this;this.pageClosingAnimationTimeoutID={},this.loadingAnimationCounter=0,this.onSearchFeatures=function(e){a.eventListeners.searchFeatures(e),a.searchResultFeatures=void 0,a.renderUI()},this.onSelectMaanmittauslaitosLayer=function(e){a.settings=Object(C.a)(Object(C.a)({},a.settings),{maanmittauslaitos:Object(C.a)(Object(C.a)({},a.settings.maanmittauslaitos),{selectedLayer:e})}),a.eventListeners.selectedMaanmittauslaitosLayerChanged(a.settings),a.renderUI()},this.onSelectMuseovirastoLayer=function(e){a.settings=Object(C.a)(Object(C.a)({},a.settings),{museovirasto:Object(C.a)(Object(C.a)({},a.settings.museovirasto),{selectedLayers:Ae(e,a.settings.museovirasto.selectedLayers)})}),a.eventListeners.selectedFeatureLayersChanged(a.settings,d.b.Museovirasto),a.renderUI()},this.onSelectAhvenanmaaLayer=function(e){a.settings=Object(C.a)(Object(C.a)({},a.settings),{ahvenanmaa:Object(C.a)(Object(C.a)({},a.settings.ahvenanmaa),{selectedLayers:Ae(e,a.settings.ahvenanmaa.selectedLayers)})}),a.eventListeners.selectedFeatureLayersChanged(a.settings,d.b.Ahvenanmaa),a.renderUI()},this.onSelectModelLayer=function(e){a.settings=Object(C.a)(Object(C.a)({},a.settings),{models:Object(C.a)(Object(C.a)({},a.settings.models),{selectedLayers:Ae(e,a.settings.models.selectedLayers)})}),a.eventListeners.selectedFeatureLayersChanged(a.settings,d.b.Models),a.renderUI()},this.onSelectMuinaisjaannosType=function(e){a.settings=Object(C.a)(Object(C.a)({},a.settings),{museovirasto:Object(C.a)(Object(C.a)({},a.settings.museovirasto),{selectedMuinaisjaannosTypes:Ae(e,a.settings.museovirasto.selectedMuinaisjaannosTypes)})}),a.eventListeners.selectedMuinaisjaannosTypesChanged(a.settings),a.renderUI()},this.onSelectMuinaisjaannosDating=function(e){a.settings=Object(C.a)(Object(C.a)({},a.settings),{museovirasto:Object(C.a)(Object(C.a)({},a.settings.museovirasto),{selectedMuinaisjaannosDatings:Ae(e,a.settings.museovirasto.selectedMuinaisjaannosDatings)})}),a.eventListeners.selectedMuinaisjaannosDatingsChanged(a.settings),a.renderUI()},this.renderUI=function(){var e=a.loadingAnimationCounter>0,t=a.eventListeners,n=t.zoomIn,i=t.zoomOut,r=t.centerToCurrentPositions;x.render(F.createElement(F.Fragment,null,F.createElement(R,{visible:e}),F.createElement(U,{onClick:n}),F.createElement(I,{onClick:i}),F.createElement(Y,{onClick:r}),F.createElement(Ee,{onClick:function(){return a.showPage(ne.Search)}}),F.createElement(V,{onClick:function(){return a.showPage(ne.Info)}}),F.createElement(Ce,{onClick:function(){return a.showPage(ne.Settings)}}),F.createElement(oe,{visibility:a.getPageVisibility(ne.Details),hidePage:a.hidePage,features:a.selectedFeatures,models:a.selectedModels}),F.createElement(pe,{visibility:a.getPageVisibility(ne.Search),hidePage:a.hidePage,searchFeatures:a.onSearchFeatures,searchResultFeatures:a.searchResultFeatures}),F.createElement(be,{visibility:a.getPageVisibility(ne.Info),hidePage:a.hidePage,dataLatestUpdateDates:a.dataLatestUpdateDates}),F.createElement(De,{visibility:a.getPageVisibility(ne.Settings),hidePage:a.hidePage,settings:a.settings,onSelectMaanmittauslaitosLayer:a.onSelectMaanmittauslaitosLayer,onSelectMuseovirastoLayer:a.onSelectMuseovirastoLayer,onSelectAhvenanmaaLayer:a.onSelectAhvenanmaaLayer,onSelectModelLayer:a.onSelectModelLayer,onSelectMuinaisjaannosType:a.onSelectMuinaisjaannosType,onSelectMuinaisjaannosDating:a.onSelectMuinaisjaannosDating})),document.getElementById("ui"))},this.getPageVisibility=function(e){return a.visiblePage===e?n.Visible:a.pageClosingAnimationTimeoutID[e]?n.Closing:n.Hidden},this.showPage=function(e){a.visiblePage!==e&&(a.abortClosingPage(e),a.visiblePage=e,e===ne.Info&&a.eventListeners.fetchDataLatestUpdateDates(),a.renderUI())},this.hidePage=function(){a.visiblePage&&a.startClosingPage(a.visiblePage),a.visiblePage=void 0,a.renderUI()},this.startClosingPage=function(e){a.pageClosingAnimationTimeoutID[e]=window.setTimeout((function(){a.pageClosingAnimationTimeoutID[e]=void 0,a.renderUI()}),500)},this.abortClosingPage=function(e){a.pageClosingAnimationTimeoutID[e]&&(window.clearTimeout(a.pageClosingAnimationTimeoutID[e]),a.pageClosingAnimationTimeoutID[e]=void 0)},this.showLoadingAnimation=function(e){var t=a.loadingAnimationCounter;e?a.loadingAnimationCounter++:a.loadingAnimationCounter--,0===t&&1===a.loadingAnimationCounter&&(a.loadingAnimationTimeoutID=window.setTimeout((function(){a.loadingAnimationTimeoutID&&a.renderUI()}),300)),1===t&&0===a.loadingAnimationCounter&&(window.clearTimeout(a.loadingAnimationTimeoutID),a.loadingAnimationTimeoutID=void 0,a.renderUI())},this.featuresSelected=function(e,t){0!==e.length&&(a.selectedFeatures=e,a.selectedModels=t,a.visiblePage=ne.Details,a.renderUI())},this.featureSearchReady=function(e){a.searchResultFeatures=e,a.renderUI()},this.dataLatestUpdateDatesReady=function(e){a.dataLatestUpdateDates=e,a.renderUI()},this.settings=e,this.eventListeners=t,this.renderUI()},Te={maanmittauslaitos:{selectedLayer:d.c.Taustakartta,url:{WMTSCapabilities:"https://avoin-karttakuva.maanmittauslaitos.fi/avoin/wmts/1.0.0/WMTSCapabilities.xml"}},museovirasto:{selectedLayers:Object.values(d.h),selectedMuinaisjaannosTypes:Object.values(d.g),selectedMuinaisjaannosDatings:Object.values(d.e),url:{export:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer/export",identify:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer/identify",find:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer/find",updateDate:"https://dkfgv6jxivsxz.cloudfront.net/MV_inspire_atom.xml"}},ahvenanmaa:{selectedLayers:Object.values(d.a),url:{export:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/export",identify:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/identify",find:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/find",forminnenUpdateDate:"https://opendata.arcgis.com/api/v3/datasets?filter%5Bslug%5D=aland%3A%3Afornminnen",maritimtKulturarvUpdateDate:"https://opendata.arcgis.com/api/v3/datasets?filter%5Bslug%5D=aland%3A%3Amaritimt-kulturarv-vrak"}},models:{selectedLayers:Object.values(d.d),url:{geojson:"./3d/3d.json"}}},Ke=function(){var e=this;this.determineStartLocation=function(){Object(z.b)()?e.setMapLocationFromURLHash():e.map.centerToCurrentPositions()},this.setMapLocationFromURLHash=function(){var t=Object(z.b)();t&&(e.map.setMapLocation(t),e.map.showSelectedLocationMarker(t))},this.map=new N(Te,{featuresSelected:function(t,a){e.ui.featuresSelected(t,a)},showLoadingAnimation:function(t){e.ui.showLoadingAnimation(t)},featureSearchReady:function(t){e.ui.featureSearchReady(t)},dataLatestUpdateDatesReady:function(t){e.ui.dataLatestUpdateDatesReady(t)}}),this.ui=new Pe(Te,{searchFeatures:function(t){e.map.searchFeatures(t)},zoomIn:function(){e.map.zoomIn()},zoomOut:function(){e.map.zoomOut()},centerToCurrentPositions:function(){e.map.centerToCurrentPositions()},selectedMaanmittauslaitosLayerChanged:function(t){e.map.selectedMaanmittauslaitosLayerChanged(t)},selectedFeatureLayersChanged:function(t,a){e.map.selectedFeatureLayersChanged(t,a)},selectedMuinaisjaannosTypesChanged:function(t){e.map.selectedMuinaisjaannosTypesChanged(t)},selectedMuinaisjaannosDatingsChanged:function(t){e.map.selectedMuinaisjaannosDatingsChanged(t)},fetchDataLatestUpdateDates:function(){e.map.fetchDataLatestUpdateDates()}}),window.onhashchange=function(){e.setMapLocationFromURLHash()},this.determineStartLocation()};t.default=Ke;new Ke},84:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));var n=function(e){return"#x="+e[0]+";y="+e[1]},i=function(){var e=window.location.hash.replace("#","").replace("x=","").replace("y=","").split(";");if(2!==e.length)return null;var t=parseFloat(e[0]),a=parseFloat(e[1]);return isNaN(t)||isNaN(a)?null:[t,a]}}});