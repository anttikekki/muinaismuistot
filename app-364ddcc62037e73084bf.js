/*! For license information please see app-364ddcc62037e73084bf.js.LICENSE.txt */
(()=>{"use strict";var t={788:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(81),n=i.n(s),a=i(645),r=i.n(a)()(n());r.push([t.id,':root,\n:host {\n  --ol-background-color: white;\n  --ol-accent-background-color: #F5F5F5;\n  --ol-subtle-background-color: rgba(128, 128, 128, 0.25);\n  --ol-partial-background-color: rgba(255, 255, 255, 0.75);\n  --ol-foreground-color: #333333;\n  --ol-subtle-foreground-color: #666666;\n  --ol-brand-color: #00AAFF;\n}\n\n.ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 1.5px solid var(--ol-background-color);\n  background-color: var(--ol-partial-background-color);\n}\n\n.ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.ol-scale-line {\n  background: var(--ol-partial-background-color);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n\n.ol-scale-line-inner {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  border-top: none;\n  color: var(--ol-foreground-color);\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n  transition: all 0.25s;\n}\n\n.ol-scale-bar {\n  position: absolute;\n  bottom: 8px;\n  left: 8px;\n}\n\n.ol-scale-bar-inner {\n  display: flex;\n}\n\n.ol-scale-step-marker {\n  width: 1px;\n  height: 15px;\n  background-color: var(--ol-foreground-color);\n  float: right;\n  z-index: 10;\n}\n\n.ol-scale-step-text {\n  position: absolute;\n  bottom: -5px;\n  font-size: 10px;\n  z-index: 11;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-text {\n  position: absolute;\n  font-size: 12px;\n  text-align: center;\n  bottom: 25px;\n  color: var(--ol-foreground-color);\n  text-shadow: -1.5px 0 var(--ol-partial-background-color), 0 1.5px var(--ol-partial-background-color), 1.5px 0 var(--ol-partial-background-color), 0 -1.5px var(--ol-partial-background-color);\n}\n\n.ol-scale-singlebar {\n  position: relative;\n  height: 10px;\n  z-index: 9;\n  box-sizing: border-box;\n  border: 1px solid var(--ol-foreground-color);\n}\n\n.ol-scale-singlebar-even {\n  background-color: var(--ol-subtle-foreground-color);\n}\n\n.ol-scale-singlebar-odd {\n  background-color: var(--ol-background-color);\n}\n\n.ol-unsupported {\n  display: none;\n}\n\n.ol-viewport,\n.ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.ol-viewport canvas {\n  all: unset;\n  overflow: hidden;\n}\n\n.ol-viewport {\n  touch-action: none;\n}\n\n.ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  user-select: text;\n}\n\n.ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n\n.ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n\n.ol-control {\n  position: absolute;\n  background-color: var(--ol-subtle-background-color);\n  border-radius: 4px;\n}\n\n.ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n\n.ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n\n.ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n\n.ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n\n.ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n\n.ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: var(--ol-subtle-foreground-color);\n  font-weight: bold;\n  text-decoration: none;\n  font-size: inherit;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: var(--ol-background-color);\n  border: none;\n  border-radius: 2px;\n}\n\n.ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n\n.ol-zoom-extent button {\n  line-height: 1.4em;\n}\n\n.ol-compass {\n  display: block;\n  font-weight: normal;\n  will-change: transform;\n}\n\n.ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n\n.ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n\n.ol-control button:hover,\n.ol-control button:focus {\n  text-decoration: none;\n  outline: 1px solid var(--ol-subtle-foreground-color);\n  color: var(--ol-foreground-color);\n}\n\n.ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n\n.ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n.ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n  display: flex;\n  flex-flow: row-reverse;\n  align-items: center;\n}\n\n.ol-attribution a {\n  color: var(--ol-subtle-foreground-color);\n  text-decoration: none;\n}\n\n.ol-attribution ul {\n  margin: 0;\n  padding: 1px .5em;\n  color: var(--ol-foreground-color);\n  text-shadow: 0 0 2px var(--ol-background-color);\n  font-size: 12px;\n}\n\n.ol-attribution li {\n  display: inline;\n  list-style: none;\n}\n\n.ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n\n.ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n\n.ol-attribution button {\n  flex-shrink: 0;\n}\n\n.ol-attribution.ol-collapsed ul {\n  display: none;\n}\n\n.ol-attribution:not(.ol-collapsed) {\n  background: var(--ol-partial-background-color);\n}\n\n.ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n}\n\n.ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n\n.ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n\n.ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n\n.ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n\n.ol-overviewmap .ol-overviewmap-map,\n.ol-overviewmap button {\n  display: block;\n}\n\n.ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid var(--ol-subtle-foreground-color);\n  height: 150px;\n  width: 150px;\n}\n\n.ol-overviewmap:not(.ol-collapsed) button {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n}\n\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n\n.ol-overviewmap:not(.ol-collapsed) {\n  background: var(--ol-subtle-background-color);\n}\n\n.ol-overviewmap-box {\n  border: 1.5px dotted var(--ol-subtle-foreground-color);\n}\n\n.ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n',""]);const o=r},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,n,a){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(s)for(var o=0;o<this.length;o++){var h=this[o][0];null!=h&&(r[h]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);s&&r[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),i&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=i):u[2]=i),n&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=n):u[4]="".concat(n)),e.push(u))}},e}},81:t=>{t.exports=function(t){return t[1]}},20:t=>{var e="%[a-f0-9]{2}",i=new RegExp("("+e+")|([^%]+?)","gi"),s=new RegExp("("+e+")+","gi");function n(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var i=t.slice(0,e),s=t.slice(e);return Array.prototype.concat.call([],n(i),n(s))}function a(t){try{return decodeURIComponent(t)}catch(a){for(var e=t.match(i)||[],s=1;s<e.length;s++)e=(t=n(e,s).join("")).match(i)||[];return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},i=s.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch(t){var n=a(i[0]);n!==i[0]&&(e[i[0]]=n)}i=s.exec(t)}e["%C2"]="�";for(var r=Object.keys(e),o=0;o<r.length;o++){var h=r[o];t=t.replace(new RegExp(h,"g"),e[h])}return t}(t)}}},806:t=>{t.exports=function(t,e){for(var i={},s=Object.keys(t),n=Array.isArray(e),a=0;a<s.length;a++){var r=s[a],o=t[r];(n?-1!==e.indexOf(r):e(r,o,t))&&(i[r]=o)}return i}},563:(t,e,i)=>{const s=i(610),n=i(20),a=i(500),r=i(806),o=Symbol("encodeFragmentIdentifier");function h(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(t,e){return e.encode?e.strict?s(t):encodeURIComponent(t):t}function u(t,e){return e.decode?n(t):t}function c(t){return Array.isArray(t)?t.sort():"object"==typeof t?c(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function f(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function d(t){const e=(t=f(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function p(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function y(t,e){h((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const i=function(t){let e;switch(t.arrayFormat){case"index":return(t,i,s)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===s[t]&&(s[t]={}),s[t][e[1]]=i):s[t]=i};case"bracket":return(t,i,s)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==s[t]?s[t]=[].concat(s[t],i):s[t]=[i]:s[t]=i};case"colon-list-separator":return(t,i,s)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==s[t]?s[t]=[].concat(s[t],i):s[t]=[i]:s[t]=i};case"comma":case"separator":return(e,i,s)=>{const n="string"==typeof i&&i.includes(t.arrayFormatSeparator),a="string"==typeof i&&!n&&u(i,t).includes(t.arrayFormatSeparator);i=a?u(i,t):i;const r=n||a?i.split(t.arrayFormatSeparator).map((e=>u(e,t))):null===i?i:u(i,t);s[e]=r};case"bracket-separator":return(e,i,s)=>{const n=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!n)return void(s[e]=i?u(i,t):i);const a=null===i?[]:i.split(t.arrayFormatSeparator).map((e=>u(e,t)));void 0!==s[e]?s[e]=[].concat(s[e],a):s[e]=a};default:return(t,e,i)=>{void 0!==i[t]?i[t]=[].concat(i[t],e):i[t]=e}}}(e),s=Object.create(null);if("string"!=typeof t)return s;if(!(t=t.trim().replace(/^[?#&]/,"")))return s;for(const n of t.split("&")){if(""===n)continue;let[t,r]=a(e.decode?n.replace(/\+/g," "):n,"=");r=void 0===r?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?r:u(r,e),i(u(t,e),r,s)}for(const t of Object.keys(s)){const i=s[t];if("object"==typeof i&&null!==i)for(const t of Object.keys(i))i[t]=p(i[t],e);else s[t]=p(i,e)}return!1===e.sort?s:(!0===e.sort?Object.keys(s).sort():Object.keys(s).sort(e.sort)).reduce(((t,e)=>{const i=s[e];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?t[e]=c(i):t[e]=i,t}),Object.create(null))}e.extract=d,e.parse=y,e.stringify=(t,e)=>{if(!t)return"";h((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const i=i=>e.skipNull&&null==t[i]||e.skipEmptyString&&""===t[i],s=function(t){switch(t.arrayFormat){case"index":return e=>(i,s)=>{const n=i.length;return void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?i:null===s?[...i,[l(e,t),"[",n,"]"].join("")]:[...i,[l(e,t),"[",l(n,t),"]=",l(s,t)].join("")]};case"bracket":return e=>(i,s)=>void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?i:null===s?[...i,[l(e,t),"[]"].join("")]:[...i,[l(e,t),"[]=",l(s,t)].join("")];case"colon-list-separator":return e=>(i,s)=>void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?i:null===s?[...i,[l(e,t),":list="].join("")]:[...i,[l(e,t),":list=",l(s,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return i=>(s,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?s:(n=null===n?"":n,0===s.length?[[l(i,t),e,l(n,t)].join("")]:[[s,l(n,t)].join(t.arrayFormatSeparator)])}default:return e=>(i,s)=>void 0===s||t.skipNull&&null===s||t.skipEmptyString&&""===s?i:null===s?[...i,l(e,t)]:[...i,[l(e,t),"=",l(s,t)].join("")]}}(e),n={};for(const e of Object.keys(t))i(e)||(n[e]=t[e]);const a=Object.keys(n);return!1!==e.sort&&a.sort(e.sort),a.map((i=>{const n=t[i];return void 0===n?"":null===n?l(i,e):Array.isArray(n)?0===n.length&&"bracket-separator"===e.arrayFormat?l(i,e)+"[]":n.reduce(s(i),[]).join("&"):l(i,e)+"="+l(n,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[i,s]=a(t,"#");return Object.assign({url:i.split("?")[0]||"",query:y(d(t),e)},e&&e.parseFragmentIdentifier&&s?{fragmentIdentifier:u(s,e)}:{})},e.stringifyUrl=(t,i)=>{i=Object.assign({encode:!0,strict:!0,[o]:!0},i);const s=f(t.url).split("?")[0]||"",n=e.extract(t.url),a=e.parse(n,{sort:!1}),r=Object.assign(a,t.query);let h=e.stringify(r,i);h&&(h=`?${h}`);let u=function(t){let e="";const i=t.indexOf("#");return-1!==i&&(e=t.slice(i)),e}(t.url);return t.fragmentIdentifier&&(u=`#${i[o]?l(t.fragmentIdentifier,i):t.fragmentIdentifier}`),`${s}${h}${u}`},e.pick=(t,i,s)=>{s=Object.assign({parseFragmentIdentifier:!0,[o]:!1},s);const{url:n,query:a,fragmentIdentifier:h}=e.parseUrl(t,s);return e.stringifyUrl({url:n,query:r(a,i),fragmentIdentifier:h},s)},e.exclude=(t,i,s)=>{const n=Array.isArray(i)?t=>!i.includes(t):(t,e)=>!i(t,e);return e.pick(t,n,s)}},500:t=>{t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const i=t.indexOf(e);return-1===i?[t]:[t.slice(0,i),t.slice(i+e.length)]}},610:t=>{t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},379:t=>{var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var a={},r=[],o=0;o<t.length;o++){var h=t[o],l=s.base?h[0]+s.base:h[0],u=a[l]||0,c="".concat(l," ").concat(u);a[l]=u+1;var f=i(c),d={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==f)e[f].references++,e[f].updater(d);else{var p=n(d,s);s.byIndex=o,e.splice(o,0,{identifier:c,updater:p,references:1})}r.push(c)}return r}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var a=s(t=t||[],n=n||{});return function(t){t=t||[];for(var r=0;r<a.length;r++){var o=i(a[r]);e[o].references--}for(var h=s(t,n),l=0;l<a.length;l++){var u=i(a[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}a=h}}},569:t=>{var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var a=i.sourceMap;a&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={id:s,exports:{}};return t[s](a,a.exports,i),a.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nc=void 0,(()=>{var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};function e(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}function s(t,e,i,s){return new(i||(i=Promise))((function(n,a){function r(t){try{h(s.next(t))}catch(t){a(t)}}function o(t){try{h(s.throw(t))}catch(t){a(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}h((s=s.apply(t,e||[])).next())}))}function n(t,e){var i,s,n,a,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(h){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(r=0)),r;)try{if(i=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,s=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!((n=(n=r.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){r.label=o[1];break}if(6===o[0]&&r.label<n[1]){r.label=n[1],n=o;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(o);break}n[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(t){o=[6,t],s=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,h])}}}function a(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function r(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,n,a=i.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(s=a.next()).done;)r.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return r}function o(t,e,i){if(i||2===arguments.length)for(var s,n=0,a=e.length;n<a;n++)!s&&n in e||(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function h(t){return this instanceof h?(this.v=t,this):new h(t)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var l=i(379),u=i.n(l),c=i(795),f=i.n(c),d=i(569),p=i.n(d),y=i(565),m=i.n(y),g=i(216),v=i.n(g),M=i(589),b=i.n(M),_=i(788),x={};x.styleTagTransform=b(),x.setAttributes=m(),x.insert=p().bind(null,"head"),x.domAPI=f(),x.insertStyleElement=v(),u()(_.Z,x),_.Z&&_.Z.locals&&_.Z.locals;var w=1,k=2,E=3,O=5,S=6378137,C=6356752.314,j=.0066943799901413165,I=484813681109536e-20,P=Math.PI/2,N=1e-10,A=.017453292519943295,T=57.29577951308232,L=Math.PI/4,R=2*Math.PI,G=3.14159265359,q={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const F={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var z=/[\s_\-\/\(\)]/g;function D(t,e){if(t[e])return t[e];for(var i,s=Object.keys(t),n=e.toLowerCase().replace(z,""),a=-1;++a<s.length;)if((i=s[a]).toLowerCase().replace(z,"")===n)return t[i]}function B(t){var e,i,s,n={},a=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),r={proj:"projName",datum:"datumCode",rf:function(t){n.rf=parseFloat(t)},lat_0:function(t){n.lat0=t*A},lat_1:function(t){n.lat1=t*A},lat_2:function(t){n.lat2=t*A},lat_ts:function(t){n.lat_ts=t*A},lon_0:function(t){n.long0=t*A},lon_1:function(t){n.long1=t*A},lon_2:function(t){n.long2=t*A},alpha:function(t){n.alpha=parseFloat(t)*A},gamma:function(t){n.rectified_grid_angle=parseFloat(t)},lonc:function(t){n.longc=t*A},x_0:function(t){n.x0=parseFloat(t)},y_0:function(t){n.y0=parseFloat(t)},k_0:function(t){n.k0=parseFloat(t)},k:function(t){n.k0=parseFloat(t)},a:function(t){n.a=parseFloat(t)},b:function(t){n.b=parseFloat(t)},r_a:function(){n.R_A=!0},zone:function(t){n.zone=parseInt(t,10)},south:function(){n.utmSouth=!0},towgs84:function(t){n.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){n.to_meter=parseFloat(t)},units:function(t){n.units=t;var e=D(F,t);e&&(n.to_meter=e.to_meter)},from_greenwich:function(t){n.from_greenwich=t*A},pm:function(t){var e=D(q,t);n.from_greenwich=(e||parseFloat(t))*A},nadgrids:function(t){"@null"===t?n.datumCode="none":n.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(n.axis=t)},approx:function(){n.approx=!0}};for(e in a)i=a[e],e in r?"function"==typeof(s=r[e])?s(i):n[s]=i:n[e]=i;return"string"==typeof n.datumCode&&"WGS84"!==n.datumCode&&(n.datumCode=n.datumCode.toLowerCase()),n}const U=function(t){return new V(t).output()};var W=1,K=/\s/,H=/[A-Za-z]/,X=/[A-Za-z84_]/,Y=/[,\]]/,Q=/[\d\.E\-\+]/;function V(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=W}function J(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var s=e?{}:t,n=i.reduce((function(t,e){return Z(e,t),t}),s);e&&(t[e]=n)}function Z(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void Z(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var s;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Z(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Z(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void J(e,i,t);default:for(s=-1;++s<t.length;)if(!Array.isArray(t[s]))return Z(t,e[i]);return J(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}V.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;K.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case W:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},V.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Y.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},V.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=W)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=W,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},V.prototype.number=function(t){if(!Q.test(t)){if(Y.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},V.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},V.prototype.keyword=function(t){if(X.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=W)}if(!Y.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},V.prototype.neutral=function(t){if(H.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(Q.test(t))return this.word=t,void(this.state=3);if(!Y.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},V.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var $=.017453292519943295;function tt(t){return t*$}function et(t){var e=U(t),i=e.shift(),s=e.shift();e.unshift(["name",s]),e.unshift(["type",i]);var n={};return Z(e,n),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,s=t.AXIS.length;i<s;++i){var n=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==n[0].indexOf("north")||("y"===n[0]||"lat"===n[0])&&"north"===n[1]?e+="n":-1!==n[0].indexOf("south")||("y"===n[0]||"lat"===n[0])&&"south"===n[1]?e+="s":-1!==n[0].indexOf("east")||("x"===n[0]||"lon"===n[0])&&"east"===n[1]?e+="e":-1===n[0].indexOf("west")&&("x"!==n[0]&&"lon"!==n[0]||"west"!==n[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function r(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",tt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",tt],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",tt],["lat0","latitude_of_origin",tt],["lat0","standard_parallel_1",tt],["lat1","standard_parallel_1",tt],["lat2","standard_parallel_2",tt],["azimuth","Azimuth"],["alpha","azimuth",tt],["srsCode","name"]].forEach((function(e){return function(t,e){var i=e[0],s=e[1];!(i in t)&&s in t&&(t[i]=t[s],3===e.length&&(t[i]=e[2](t[i])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=tt(t.lat0>0?90:-90)):(t.lat0=tt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(n),n}function it(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?it[t]=B(arguments[1]):it[t]=et(arguments[1]):it[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?it.apply(e,t):it(t)}));if("string"==typeof t){if(t in it)return it[t]}else"EPSG"in t?it["EPSG:"+t.EPSG]=t:"ESRI"in t?it["ESRI:"+t.ESRI]=t:"IAU2000"in t?it["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(it);const st=it;var nt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],at=["3857","900913","3785","102113"];function rt(t,e){var i,s;if(t=t||{},!e)return t;for(s in e)void 0!==(i=e[s])&&(t[s]=i);return t}function ot(t,e,i){var s=t*e;return i/Math.sqrt(1-s*s)}function ht(t){return t<0?-1:1}function lt(t){return Math.abs(t)<=G?t:t-ht(t)*R}function ut(t,e,i){var s=t*i,n=.5*t;return s=Math.pow((1-s)/(1+s),n),Math.tan(.5*(P-e))/s}function ct(t,e){for(var i,s,n=.5*t,a=P-2*Math.atan(e),r=0;r<=15;r++)if(i=t*Math.sin(a),a+=s=P-2*Math.atan(e*Math.pow((1-i)/(1+i),n))-a,Math.abs(s)<=1e-10)return a;return-9999}function ft(t){return t}var dt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ot(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,s=t.x,n=t.y;if(n*T>90&&n*T<-90&&s*T>180&&s*T<-180)return null;if(Math.abs(Math.abs(n)-P)<=N)return null;if(this.sphere)e=this.x0+this.a*this.k0*lt(s-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(L+.5*n));else{var a=Math.sin(n),r=ut(this.e,n,a);e=this.x0+this.a*this.k0*lt(s-this.long0),i=this.y0-this.a*this.k0*Math.log(r)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,s=t.x-this.x0,n=t.y-this.y0;if(this.sphere)i=P-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var a=Math.exp(-n/(this.a*this.k0));if(-9999===(i=ct(this.e,a)))return null}return e=lt(this.long0+s/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:ft,inverse:ft,names:["longlat","identity"]}],pt={},yt=[];function mt(t,e){var i=yt.length;return t.names?(yt[i]=t,t.names.forEach((function(t){pt[t.toLowerCase()]=i})),this):(console.log(e),!0)}const gt={start:function(){dt.forEach(mt)},add:mt,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==pt[e]&&yt[pt[e]]?yt[pt[e]]:void 0}};var vt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Mt=vt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};vt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var bt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var _t={};function xt(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:_t[t]||null,isNull:!1}}function wt(t){return t/3600*Math.PI/180}function kt(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function Et(t){return t.map((function(t){return[wt(t.longitudeShift),wt(t.latitudeShift)]}))}function Ot(t,e,i){return{name:kt(t,e+8,e+16).trim(),parent:kt(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function St(t,e,i,s){for(var n=e+176,a=[],r=0;r<i.gridNodeCount;r++){var o={latitudeShift:t.getFloat32(n+16*r,s),longitudeShift:t.getFloat32(n+16*r+4,s),latitudeAccuracy:t.getFloat32(n+16*r+8,s),longitudeAccuracy:t.getFloat32(n+16*r+12,s)};a.push(o)}return a}function Ct(t,e){if(!(this instanceof Ct))return new Ct(t);e=e||function(t){if(t)throw t};var i=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in st}(t))return st[t];if(function(t){return nt.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=et(t);if(function(t){var e=D(t,"authority");if(e){var i=D(e,"epsg");return i&&at.indexOf(i)>-1}}(e))return st["EPSG:3857"];var i=function(t){var e=D(t,"extension");if(e)return D(e,"proj4")}(e);return i?B(i):e}return function(t){return"+"===t[0]}(t)?B(t):void 0}(t);if("object"==typeof i){var s=Ct.projections.get(i.projName);if(s){if(i.datumCode&&"none"!==i.datumCode){var n=D(bt,i.datumCode);n&&(i.datum_params=i.datum_params||(n.towgs84?n.towgs84.split(","):null),i.ellps=n.ellipse,i.datumName=n.datumName?n.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var a,r,o,h,l,u,c=function(t,e,i,s,n){if(!t){var a=D(vt,s);a||(a=Mt),t=a.a,e=a.b,i=a.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<N)&&(n=!0,e=t),{a:t,b:e,rf:i,sphere:n}}(i.a,i.b,i.rf,i.ellps,i.sphere),f=(a=c.a,r=c.b,c.rf,l=((o=a*a)-(h=r*r))/o,u=0,i.R_A?(o=(a*=1-l*(.16666666666666666+l*(.04722222222222222+.022156084656084655*l)))*a,l=0):u=Math.sqrt(l),{es:l,e:u,ep2:(o-h)/h}),d=function(t){return void 0===t?null:t.split(",").map(xt)}(i.nadgrids),p=i.datum||function(t,e,i,s,n,a,r){var o={};return o.datum_type=void 0===t||"none"===t?O:4,e&&(o.datum_params=e.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=w),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=k,o.datum_params[3]*=I,o.datum_params[4]*=I,o.datum_params[5]*=I,o.datum_params[6]=o.datum_params[6]/1e6+1))),r&&(o.datum_type=E,o.grids=r),o.a=i,o.b=s,o.es=n,o.ep2=a,o}(i.datumCode,i.datum_params,c.a,c.b,f.es,f.ep2,d);rt(this,i),rt(this,s),this.a=c.a,this.b=c.b,this.rf=c.rf,this.sphere=c.sphere,this.es=f.es,this.e=f.e,this.ep2=f.ep2,this.datum=p,this.init(),e(null,this)}else e(t)}else e(t)}Ct.projections=gt,Ct.projections.start();const jt=Ct;function It(t,e,i){var s,n,a,r,o=t.x,h=t.y,l=t.z?t.z:0;if(h<-P&&h>-1.001*P)h=-P;else if(h>P&&h<1.001*P)h=P;else{if(h<-P)return{x:-1/0,y:-1/0,z:t.z};if(h>P)return{x:1/0,y:1/0,z:t.z}}return o>Math.PI&&(o-=2*Math.PI),n=Math.sin(h),r=Math.cos(h),a=n*n,{x:((s=i/Math.sqrt(1-e*a))+l)*r*Math.cos(o),y:(s+l)*r*Math.sin(o),z:(s*(1-e)+l)*n}}function Pt(t,e,i,s){var n,a,r,o,h,l,u,c,f,d,p,y,m,g,v,M=t.x,b=t.y,_=t.z?t.z:0;if(n=Math.sqrt(M*M+b*b),a=Math.sqrt(M*M+b*b+_*_),n/i<1e-12){if(g=0,a/i<1e-12)return v=-s,{x:t.x,y:t.y,z:t.z}}else g=Math.atan2(b,M);r=_/a,c=(o=n/a)*(1-e)*(h=1/Math.sqrt(1-e*(2-e)*o*o)),f=r*h,m=0;do{m++,l=e*(u=i/Math.sqrt(1-e*f*f))/(u+(v=n*c+_*f-u*(1-e*f*f))),y=(p=r*(h=1/Math.sqrt(1-l*(2-l)*o*o)))*c-(d=o*(1-l)*h)*f,c=d,f=p}while(y*y>1e-24&&m<30);return{x:g,y:Math.atan(p/Math.abs(d)),z:v}}function Nt(t){return t===w||t===k}function At(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var s={x:-i.x,y:i.y},n={x:Number.NaN,y:Number.NaN},a=[],r=0;r<t.grids.length;r++){var o=t.grids[r];if(a.push(o.name),o.isNull){n=s;break}if(o.mandatory,null!==o.grid){var h=o.grid.subgrids[0],l=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,u=h.ll[0]-l,c=h.ll[1]-l,f=h.ll[0]+(h.lim[0]-1)*h.del[0]+l,d=h.ll[1]+(h.lim[1]-1)*h.del[1]+l;if(!(c>s.y||u>s.x||d<s.y||f<s.x||(n=Tt(s,e,h),isNaN(n.x))))break}else if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-s.x*T+" "+s.y*T+" tried: '"+a+"'"),-1):(i.x=-n.x,i.y=n.y,0)}function Tt(t,e,i){var s={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return s;var n={x:t.x,y:t.y};n.x-=i.ll[0],n.y-=i.ll[1],n.x=lt(n.x-Math.PI)+Math.PI;var a=Lt(n,i);if(e){if(isNaN(a.x))return s;a.x=n.x-a.x,a.y=n.y-a.y;var r,o,h=9;do{if(o=Lt(a,i),isNaN(o.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}r={x:n.x-(o.x+a.x),y:n.y-(o.y+a.y)},a.x+=r.x,a.y+=r.y}while(h--&&Math.abs(r.x)>1e-12&&Math.abs(r.y)>1e-12);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),s;s.x=lt(a.x+i.ll[0]),s.y=a.y+i.ll[1]}else isNaN(a.x)||(s.x=t.x+a.x,s.y=t.y+a.y);return s}function Lt(t,e){var i,s={x:t.x/e.del[0],y:t.y/e.del[1]},n=Math.floor(s.x),a=Math.floor(s.y),r=s.x-1*n,o=s.y-1*a,h={x:Number.NaN,y:Number.NaN};if(n<0||n>=e.lim[0])return h;if(a<0||a>=e.lim[1])return h;i=a*e.lim[0]+n;var l=e.cvs[i][0],u=e.cvs[i][1];i++;var c=e.cvs[i][0],f=e.cvs[i][1];i+=e.lim[0];var d=e.cvs[i][0],p=e.cvs[i][1];i--;var y=e.cvs[i][0],m=e.cvs[i][1],g=r*o,v=r*(1-o),M=(1-r)*(1-o),b=(1-r)*o;return h.x=M*l+v*c+b*y+g*d,h.y=M*u+v*f+b*m+g*p,h}function Rt(t,e,i){var s,n,a,r=i.x,o=i.y,h=i.z||0,l={};for(a=0;a<3;a++)if(!e||2!==a||void 0!==i.z)switch(0===a?(s=r,n=-1!=="ew".indexOf(t.axis[a])?"x":"y"):1===a?(s=o,n=-1!=="ns".indexOf(t.axis[a])?"y":"x"):(s=h,n="z"),t.axis[a]){case"e":case"n":l[n]=s;break;case"w":case"s":l[n]=-s;break;case"u":void 0!==i[n]&&(l.z=s);break;case"d":void 0!==i[n]&&(l.z=-s);break;default:return null}return l}function Gt(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function qt(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ft(t,e,i,s){var n,a=void 0!==(i=Array.isArray(i)?Gt(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z;if(function(t){qt(t.x),qt(t.y)}(i),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===w||t.datum.datum_type===k||t.datum.datum_type===E)&&"WGS84"!==e.datumCode||(e.datum.datum_type===w||e.datum.datum_type===k||e.datum.datum_type===E)&&"WGS84"!==t.datumCode}(t,e)&&(i=Ft(t,n=new jt("WGS84"),i,s),t=n),s&&"enu"!==t.axis&&(i=Rt(t,!1,i)),"longlat"===t.projName)i={x:i.x*A,y:i.y*A,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=function(t,e,i){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===w?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==k||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return i;if(t.datum_type===O||e.datum_type===O)return i;var s=t.a,n=t.es;if(t.datum_type===E){if(0!==At(t,!1,i))return;s=S,n=j}var a=e.a,r=e.b,o=e.es;return e.datum_type===E&&(a=S,r=C,o=j),n!==o||s!==a||Nt(t.datum_type)||Nt(e.datum_type)?(i=It(i,n,s),Nt(t.datum_type)&&(i=function(t,e,i){if(e===w)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===k){var s=i[0],n=i[1],a=i[2],r=i[3],o=i[4],h=i[5],l=i[6];return{x:l*(t.x-h*t.y+o*t.z)+s,y:l*(h*t.x+t.y-r*t.z)+n,z:l*(-o*t.x+r*t.y+t.z)+a}}}(i,t.datum_type,t.datum_params)),Nt(e.datum_type)&&(i=function(t,e,i){if(e===w)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===k){var s=i[0],n=i[1],a=i[2],r=i[3],o=i[4],h=i[5],l=i[6],u=(t.x-s)/l,c=(t.y-n)/l,f=(t.z-a)/l;return{x:u+h*c-o*f,y:-h*u+c+r*f,z:o*u-r*c+f}}}(i,e.datum_type,e.datum_params)),i=Pt(i,o,a,r),e.datum_type!==E||0===At(e,!0,i)?i:void 0):i}(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*T,y:i.y*T,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),s&&"enu"!==e.axis?Rt(e,!0,i):(a||delete i.z,i)}var zt=jt("WGS84");function Dt(t,e,i,s){var n,a,r;return Array.isArray(i)?(n=Ft(t,e,i,s)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof n.z?[n.x,n.y,n.z].concat(i.splice(3)):[n.x,n.y,i[2]].concat(i.splice(3)):[n.x,n.y].concat(i.splice(2)):[n.x,n.y]):(a=Ft(t,e,i,s),2===(r=Object.keys(i)).length||r.forEach((function(s){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===s||"y"===s||"z"===s)return}else if("x"===s||"y"===s)return;a[s]=i[s]})),a)}function Bt(t){return t instanceof jt?t:t.oProj?t.oProj:jt(t)}const Ut=function(t,e,i){t=Bt(t);var s,n=!1;return void 0===e?(e=t,t=zt,n=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=zt,n=!0),e=Bt(e),i?Dt(t,e,i):(s={forward:function(i,s){return Dt(t,e,i,s)},inverse:function(i,s){return Dt(e,t,i,s)}},n&&(s.oProj=e),s)};var Wt=6,Kt="AJSAJS",Ht="AFAFAF",Xt=65,Yt=73,Qt=79,Vt=86,Jt=90;const Zt={forward:$t,inverse:function(t){var e=se(ae(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:te};function $t(t,e){return e=e||5,function(t,e){var i,s,n,a,r,o,h,l,u,c,f,d="00000"+t.easting,p="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(u=t.easting,c=t.northing,f=ne(t.zoneNumber),i=Math.floor(u/1e5),s=Math.floor(c/1e5)%20,n=f-1,a=Kt.charCodeAt(n),r=Ht.charCodeAt(n),l=!1,(o=a+i-1)>Jt&&(o=o-Jt+Xt-1,l=!0),(o===Yt||a<Yt&&o>Yt||(o>Yt||a<Yt)&&l)&&o++,(o===Qt||a<Qt&&o>Qt||(o>Qt||a<Qt)&&l)&&++o===Yt&&o++,o>Jt&&(o=o-Jt+Xt-1),(h=r+s)>Vt?(h=h-Vt+Xt-1,l=!0):l=!1,(h===Yt||r<Yt&&h>Yt||(h>Yt||r<Yt)&&l)&&h++,(h===Qt||r<Qt&&h>Qt||(h>Qt||r<Qt)&&l)&&++h===Yt&&h++,h>Vt&&(h=h-Vt+Xt-1),String.fromCharCode(o)+String.fromCharCode(h))+d.substr(d.length-5,e)+p.substr(p.length-5,e)}(function(t){var e,i,s,n,a,r,o,h=t.lat,l=t.lon,u=6378137,c=.00669438,f=.9996,d=ee(h),p=ee(l);o=Math.floor((l+180)/6)+1,180===l&&(o=60),h>=56&&h<64&&l>=3&&l<12&&(o=32),h>=72&&h<84&&(l>=0&&l<9?o=31:l>=9&&l<21?o=33:l>=21&&l<33?o=35:l>=33&&l<42&&(o=37)),r=ee(6*(o-1)-180+3),e=.006739496752268451,i=u/Math.sqrt(1-c*Math.sin(d)*Math.sin(d)),s=Math.tan(d)*Math.tan(d),n=e*Math.cos(d)*Math.cos(d);var y,m,g=f*i*((a=Math.cos(d)*(p-r))+(1-s+n)*a*a*a/6+(5-18*s+s*s+72*n-58*e)*a*a*a*a*a/120)+5e5,v=f*(u*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-3.418046101696858e-9*Math.sin(6*d))+i*Math.tan(d)*(a*a/2+(5-s+9*n+4*n*n)*a*a*a*a/24+(61-58*s+s*s+600*n-2.2240339282485886)*a*a*a*a*a*a/720));return h<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(g),zoneNumber:o,zoneLetter:(y=h,m="Z",84>=y&&y>=72?m="X":72>y&&y>=64?m="W":64>y&&y>=56?m="V":56>y&&y>=48?m="U":48>y&&y>=40?m="T":40>y&&y>=32?m="S":32>y&&y>=24?m="R":24>y&&y>=16?m="Q":16>y&&y>=8?m="P":8>y&&y>=0?m="N":0>y&&y>=-8?m="M":-8>y&&y>=-16?m="L":-16>y&&y>=-24?m="K":-24>y&&y>=-32?m="J":-32>y&&y>=-40?m="H":-40>y&&y>=-48?m="G":-48>y&&y>=-56?m="F":-56>y&&y>=-64?m="E":-64>y&&y>=-72?m="D":-72>y&&y>=-80&&(m="C"),m)}}({lat:t[1],lon:t[0]}),e)}function te(t){var e=se(ae(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function ee(t){return t*(Math.PI/180)}function ie(t){return t/Math.PI*180}function se(t){var e=t.northing,i=t.easting,s=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var a,r,o,h,l,u,c,f,d,p=.9996,y=6378137,m=.00669438,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),v=i-5e5,M=e;s<"N"&&(M-=1e7),c=6*(n-1)-180+3,a=.006739496752268451,d=(f=M/p/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*f)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*f)+151*g*g*g/96*Math.sin(6*f),r=y/Math.sqrt(1-m*Math.sin(d)*Math.sin(d)),o=Math.tan(d)*Math.tan(d),h=a*Math.cos(d)*Math.cos(d),l=.99330562*y/Math.pow(1-m*Math.sin(d)*Math.sin(d),1.5),u=v/(r*p);var b=d-r*Math.tan(d)/l*(u*u/2-(5+3*o+10*h-4*h*h-9*a)*u*u*u*u/24+(61+90*o+298*h+45*o*o-1.6983531815716497-3*h*h)*u*u*u*u*u*u/720);b=ie(b);var _,x=(u-(1+2*o+h)*u*u*u/6+(5-2*h+28*o-3*h*h+8*a+24*o*o)*u*u*u*u*u/120)/Math.cos(d);if(x=c+ie(x),t.accuracy){var w=se({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});_={top:w.lat,right:w.lon,bottom:b,left:x}}else _={lat:b,lon:x};return _}function ne(t){var e=t%Wt;return 0===e&&(e=Wt),e}function ae(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,s=null,n="",a=0;!/[A-Z]/.test(e=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;n+=e,a++}var r=parseInt(n,10);if(0===a||a+3>i)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(a++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+t;s=t.substring(a,a+=2);for(var h=ne(r),l=function(t,e){for(var i=Kt.charCodeAt(e-1),s=1e5,n=!1;i!==t.charCodeAt(0);){if(++i===Yt&&i++,i===Qt&&i++,i>Jt){if(n)throw"Bad character: "+t;i=Xt,n=!0}s+=1e5}return s}(s.charAt(0),h),u=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=Ht.charCodeAt(e-1),s=0,n=!1;i!==t.charCodeAt(0);){if(++i===Yt&&i++,i===Qt&&i++,i>Vt){if(n)throw"Bad character: "+t;i=Xt,n=!0}s+=1e5}return s}(s.charAt(1),h);u<re(o);)u+=2e6;var c=i-a;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,d,p,y=c/2,m=0,g=0;return y>0&&(f=1e5/Math.pow(10,y),d=t.substring(a,a+y),m=parseFloat(d)*f,p=t.substring(a+y),g=parseFloat(p)*f),{easting:m+l,northing:g+u,zoneLetter:o,zoneNumber:r,accuracy:f}}function re(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function oe(t,e,i){if(!(this instanceof oe))return new oe(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var s=t.split(",");this.x=parseFloat(s[0],10),this.y=parseFloat(s[1],10),this.z=parseFloat(s[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}oe.fromMGRS=function(t){return new oe(te(t))},oe.prototype.toMGRS=function(t){return $t([this.x,this.y],t)};const he=oe;var le=.046875,ue=.01953125,ce=.01068115234375;function fe(t){var e=[];e[0]=1-t*(.25+t*(le+t*(ue+t*ce))),e[1]=t*(.75-t*(le+t*(ue+t*ce)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}function de(t,e,i,s){return i*=e,e*=e,s[0]*t-i*(s[1]+e*(s[2]+e*(s[3]+e*s[4])))}function pe(t,e,i){for(var s=1/(1-e),n=t,a=20;a;--a){var r=Math.sin(n),o=1-e*r*r;if(n-=o=(de(n,r,Math.cos(n),i)-t)*(o*Math.sqrt(o))*s,Math.abs(o)<N)return n}return n}const ye={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=fe(this.es),this.ml0=de(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,s,n=t.x,a=t.y,r=lt(n-this.long0),o=Math.sin(a),h=Math.cos(a);if(this.es){var l=h*r,u=Math.pow(l,2),c=this.ep2*Math.pow(h,2),f=Math.pow(c,2),d=Math.abs(h)>N?Math.tan(a):0,p=Math.pow(d,2),y=Math.pow(p,2);e=1-this.es*Math.pow(o,2),l/=Math.sqrt(e);var m=de(a,o,h,this.en);i=this.a*(this.k0*l*(1+u/6*(1-p+c+u/20*(5-18*p+y+14*c-58*p*c+u/42*(61+179*y-y*p-479*p)))))+this.x0,s=this.a*(this.k0*(m-this.ml0+o*r*l/2*(1+u/12*(5-p+9*c+4*f+u/30*(61+y-58*p+270*c-330*p*c+u/56*(1385+543*y-y*p-3111*p))))))+this.y0}else{var g=h*Math.sin(r);if(Math.abs(Math.abs(g)-1)<N)return 93;if(i=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,s=h*Math.cos(r)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(s))>=1){if(g-1>N)return 93;s=0}else s=Math.acos(s);a<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return t.x=i,t.y=s,t},inverse:function(t){var e,i,s,n,a=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(this.es)if(i=pe(e=this.ml0+r/this.k0,this.es,this.en),Math.abs(i)<P){var o=Math.sin(i),h=Math.cos(i),l=Math.abs(h)>N?Math.tan(i):0,u=this.ep2*Math.pow(h,2),c=Math.pow(u,2),f=Math.pow(l,2),d=Math.pow(f,2);e=1-this.es*Math.pow(o,2);var p=a*Math.sqrt(e)/this.k0,y=Math.pow(p,2);s=i-(e*=l)*y/(1-this.es)*.5*(1-y/12*(5+3*f-9*u*f+u-4*c-y/30*(61+90*f-252*u*f+45*d+46*u-y/56*(1385+3633*f+4095*d+1574*d*f)))),n=lt(this.long0+p*(1-y/6*(1+2*f+u-y/20*(5+28*f+24*d+8*u*f+6*u-y/42*(61+662*f+1320*d+720*d*f))))/h)}else s=P*ht(r),n=0;else{var m=Math.exp(a/this.k0),g=.5*(m-1/m),v=this.lat0+r/this.k0,M=Math.cos(v);e=Math.sqrt((1-Math.pow(M,2))/(1+Math.pow(g,2))),s=Math.asin(e),r<0&&(s=-s),n=0===g&&0===M?0:lt(Math.atan2(g,M)+this.long0)}return t.x=n,t.y=s,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function me(t){var e=Math.exp(t);return(e-1/e)/2}function ge(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),s=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(s,2))}function ve(t,e){for(var i,s=2*Math.cos(2*e),n=t.length-1,a=t[n],r=0;--n>=0;)i=s*a-r+t[n],r=a,a=i;return e+i*Math.sin(2*e)}function Me(t,e,i){for(var s,n,a=Math.sin(e),r=Math.cos(e),o=me(i),h=function(t){var e=Math.exp(t);return(e+1/e)/2}(i),l=2*r*h,u=-2*a*o,c=t.length-1,f=t[c],d=0,p=0,y=0;--c>=0;)s=p,n=d,f=l*(p=f)-s-u*(d=y)+t[c],y=u*p-n+l*d;return[(l=a*h)*f-(u=r*o)*y,l*y+u*f]}const be={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(ye.init.apply(this),this.forward=ye.forward,this.inverse=ye.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var s=ve(this.cbg,this.lat0);this.Zb=-this.Qn*(s+function(t,e){for(var i,s=2*Math.cos(e),n=t.length-1,a=t[n],r=0;--n>=0;)i=s*a-r+t[n],r=a,a=i;return Math.sin(e)*i}(this.gtu,2*s))},forward:function(t){var e=lt(t.x-this.long0),i=t.y;i=ve(this.cbg,i);var s=Math.sin(i),n=Math.cos(i),a=Math.sin(e),r=Math.cos(e);i=Math.atan2(s,r*n),e=Math.atan2(a*n,ge(s,n*r)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}(e*(1+e/(ge(1,e)+1))),t<0?-e:e}(Math.tan(e));var o,h,l=Me(this.gtu,2*i,2*e);return i+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(o=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(o=1/0,h=1/0),t.x=o,t.y=h,t},inverse:function(t){var e,i,s=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);if(n=(n-this.Zb)/this.Qn,s/=this.Qn,Math.abs(s)<=2.623395162778){var a=Me(this.utg,2*n,2*s);n+=a[0],s+=a[1],s=Math.atan(me(s));var r=Math.sin(n),o=Math.cos(n),h=Math.sin(s),l=Math.cos(s);n=Math.atan2(r*l,ge(h,l*o)),e=lt((s=Math.atan2(h,l*o))+this.long0),i=ve(this.cgb,n)}else e=1/0,i=1/0;return t.x=e,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},_e={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(lt(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*A,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,be.init.apply(this),this.forward=be.forward,this.inverse=be.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function xe(t,e){return Math.pow((1-t)/(1+t),e)}const we={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+L)/(Math.pow(Math.tan(.5*this.lat0+L),this.C)*xe(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+L),this.C)*xe(this.e*Math.sin(i),this.ratexp))-P,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,s=Math.pow(Math.tan(.5*i+L)/this.K,1/this.C),n=20;n>0&&(i=2*Math.atan(s*xe(this.e*Math.sin(t.y),-.5*this.e))-P,!(Math.abs(i-t.y)<1e-14));--n)t.y=i;return n?(t.x=e,t.y=i,t):null},names:["gauss"]},ke={init:function(){we.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,s,n;return t.x=lt(t.x-this.long0),we.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),s=Math.cos(t.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*s),t.x=n*i*Math.sin(t.x),t.y=n*(this.cosc0*e-this.sinc0*i*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,s,n,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var r=2*Math.atan2(a,this.R2);e=Math.sin(r),i=Math.cos(r),n=Math.asin(i*this.sinc0+t.y*e*this.cosc0/a),s=Math.atan2(t.x*e,a*this.cosc0*i-t.y*this.sinc0*e)}else n=this.phic0,s=0;return t.x=s,t.y=n,we.inverse.apply(this,[t]),t.x=lt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Ee={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=N&&(this.k0=.5*(1+ht(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=N&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=N&&(this.k0=.5*this.cons*ot(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ut(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ot(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-P,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,i,s,n,a,r,o=t.x,h=t.y,l=Math.sin(h),u=Math.cos(h),c=lt(o-this.long0);return Math.abs(Math.abs(o-this.long0)-Math.PI)<=N&&Math.abs(h+this.lat0)<=N?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*u*Math.cos(c)),t.x=this.a*e*u*Math.sin(c)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*u*Math.cos(c))+this.y0,t):(i=2*Math.atan(this.ssfn_(h,l,this.e))-P,n=Math.cos(i),s=Math.sin(i),Math.abs(this.coslat0)<=N?(a=ut(this.e,h*this.con,this.con*l),r=2*this.a*this.k0*a/this.cons,t.x=this.x0+r*Math.sin(o-this.long0),t.y=this.y0-this.con*r*Math.cos(o-this.long0),t):(Math.abs(this.sinlat0)<N?(e=2*this.a*this.k0/(1+n*Math.cos(c)),t.y=e*s):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*n*Math.cos(c))),t.y=e*(this.cosX0*s-this.sinX0*n*Math.cos(c))+this.y0),t.x=e*n*Math.sin(c)+this.x0,t))},inverse:function(t){var e,i,s,n,a;t.x-=this.x0,t.y-=this.y0;var r=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(r/(2*this.a*this.k0));return e=this.long0,i=this.lat0,r<=N?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/r),e=Math.abs(this.coslat0)<N?this.lat0>0?lt(this.long0+Math.atan2(t.x,-1*t.y)):lt(this.long0+Math.atan2(t.x,t.y)):lt(this.long0+Math.atan2(t.x*Math.sin(o),r*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=N){if(r<=N)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,s=r*this.cons/(2*this.a*this.k0),i=this.con*ct(this.e,s),e=this.con*lt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else n=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r<=N?a=this.X0:(a=Math.asin(Math.cos(n)*this.sinX0+t.y*Math.sin(n)*this.cosX0/r),e=lt(this.long0+Math.atan2(t.x*Math.sin(n),r*this.cosX0*Math.cos(n)-t.y*this.sinX0*Math.sin(n)))),i=-1*ct(this.e,Math.tan(.5*(P+a)));return t.x=e,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,i){return e*=i,Math.tan(.5*(P+t))*Math.pow((1-e)/(1+e),.5*i)}},Oe={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,s=1/this.rf,n=2*s-Math.pow(s,2),a=this.e=Math.sqrt(n);this.R=this.k0*i*Math.sqrt(1-n)/(1-n*Math.pow(e,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+a*e)/(1-a*e));this.K=r-this.alpha*o+this.alpha*a/2*h},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),s=-this.alpha*(e+i)+this.K,n=2*(Math.atan(Math.exp(s))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*r+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,s=e/this.R,n=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(s)),r=Math.atan(Math.sin(s)/(Math.cos(this.b0)*Math.cos(s)-Math.sin(this.b0)*Math.tan(n))),o=this.lambda0+r/this.alpha,h=0,l=a,u=-1e3,c=0;Math.abs(l-u)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),u=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=o,t.y=l,t},names:["somerc"]};var Se=1e-7;const Ce={init:function(){var t,e,i,s,n,a,r,o,h,l,u,c,f,d=0,p=0,y=0,m=0,g=0,v=0,M=0;this.no_off=(f="object"==typeof(c=this).PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION,"no_uoff"in c||"no_off"in c||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(f)),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var _=!1;if("rectified_grid_angle"in this&&(_=!0),b&&(M=this.alpha),_&&(d=this.rectified_grid_angle*A),b||_)p=this.longc;else if(y=this.long1,g=this.lat1,m=this.long2,v=this.lat2,Math.abs(g-v)<=Se||(t=Math.abs(g))<=Se||Math.abs(t-P)<=Se||Math.abs(Math.abs(this.lat0)-P)<=Se||Math.abs(Math.abs(v)-P)<=Se)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>N?(o=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*o*o,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,(n=(s=this.B*e/(i*Math.sqrt(t)))*s-1)<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=s,this.E*=Math.pow(ut(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=s=n=1),b||_?(b?(u=Math.asin(Math.sin(M)/s),_||(d=M)):(u=d,M=Math.asin(s*Math.sin(u))),this.lam0=p-Math.asin(.5*(n-1/n)*Math.tan(u))/this.B):(a=Math.pow(ut(this.e,g,Math.sin(g)),this.B),r=Math.pow(ut(this.e,v,Math.sin(v)),this.B),n=this.E/a,h=(r-a)/(r+a),l=((l=this.E*this.E)-r*a)/(l+r*a),(t=y-m)<-Math.pi?m-=R:t>Math.pi&&(m+=R),this.lam0=lt(.5*(y+m)-Math.atan(l*Math.tan(.5*this.B*(y-m))/h)/this.B),u=Math.atan(2*Math.sin(this.B*lt(y-this.lam0))/(n-1/n)),d=M=Math.asin(s*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(d),this.cosrot=Math.cos(d),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(s*s-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(L-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(L+n))},forward:function(t){var e,i,s,n,a,r,o,h,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-P)>N){if(e=.5*((a=this.E/Math.pow(ut(this.e,t.y,Math.sin(t.y)),this.B))-(r=1/a)),i=.5*(a+r),n=Math.sin(this.B*t.x),s=(e*this.singam-n*this.cosgam)/i,Math.abs(Math.abs(s)-1)<N)throw new Error;h=.5*this.ArB*Math.log((1-s)/(1+s)),r=Math.cos(this.B*t.x),o=Math.abs(r)<Se?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+n*this.singam,r)}else h=t.y>0?this.v_pole_n:this.v_pole_s,o=this.ArB*t.y;return this.no_rot?(l.x=o,l.y=h):(o-=this.u_0,l.x=h*this.cosrot+o*this.sinrot,l.y=o*this.cosrot-h*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,i,s,n,a,r,o,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),n=.5*((s=Math.exp(-this.BrA*i))-1/s),a=.5*(s+1/s),o=((r=Math.sin(this.BrA*e))*this.cosgam+n*this.singam)/a,Math.abs(Math.abs(o)-1)<N)h.x=0,h.y=o<0?-P:P;else{if(h.y=this.E/Math.sqrt((1+o)/(1-o)),h.y=ct(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw new Error;h.x=-this.rB*Math.atan2(n*this.cosgam-r*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},je={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<N)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),s=ot(this.e,e,i),n=ut(this.e,this.lat1,e),a=Math.sin(this.lat2),r=Math.cos(this.lat2),o=ot(this.e,a,r),h=ut(this.e,this.lat2,a),l=ut(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>N?this.ns=Math.log(s/o)/Math.log(n/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=s/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=N&&(i=ht(i)*(P-2e-10));var s,n,a=Math.abs(Math.abs(i)-P);if(a>N)s=ut(this.e,i,Math.sin(i)),n=this.a*this.f0*Math.pow(s,this.ns);else{if((a=i*this.ns)<=0)return null;n=0}var r=this.ns*lt(e-this.long0);return t.x=this.k0*(n*Math.sin(r))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(r))+this.y0,t},inverse:function(t){var e,i,s,n,a,r=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(r*r+o*o),i=1):(e=-Math.sqrt(r*r+o*o),i=-1);var h=0;if(0!==e&&(h=Math.atan2(i*r,i*o)),0!==e||this.ns>0){if(i=1/this.ns,s=Math.pow(e/(this.a*this.f0),i),-9999===(n=ct(this.e,s)))return null}else n=-P;return a=lt(h/this.ns+this.long0),t.x=a,t.y=n,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Ie={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,s,n,a,r,o,h=t.x,l=t.y,u=lt(h-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),s=-u*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(s)),a=Math.asin(Math.cos(i)*Math.sin(s)/Math.cos(n)),r=this.n*a,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=o*Math.cos(r)/1,t.x=o*Math.sin(r)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,s,n,a,r,o,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.atan2(t.y,t.x)/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(n)),i=Math.asin(Math.cos(s)*Math.sin(n)/Math.cos(e)),t.x=this.long0-i/this.alfa,r=e,o=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(o=1),r=t.y,l+=1}while(0===o&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function Pe(t,e,i,s,n){return t*n-e*Math.sin(2*n)+i*Math.sin(4*n)-s*Math.sin(6*n)}function Ne(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Ae(t){return.375*t*(1+.25*t*(1+.46875*t))}function Te(t){return.05859375*t*t*(1+.75*t)}function Le(t){return t*t*t*(35/3072)}function Re(t,e,i){var s=e*i;return t/Math.sqrt(1-s*s)}function Ge(t){return Math.abs(t)<P?t:t-ht(t)*Math.PI}function qe(t,e,i,s,n){var a,r;a=t/e;for(var o=0;o<15;o++)if(a+=r=(t-(e*a-i*Math.sin(2*a)+s*Math.sin(4*a)-n*Math.sin(6*a)))/(e-2*i*Math.cos(2*a)+4*s*Math.cos(4*a)-6*n*Math.cos(6*a)),Math.abs(r)<=1e-10)return a;return NaN}const Fe={init:function(){this.sphere||(this.e0=Ne(this.es),this.e1=Ae(this.es),this.e2=Te(this.es),this.e3=Le(this.es),this.ml0=this.a*Pe(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,s=t.x,n=t.y;if(s=lt(s-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(s)),i=this.a*(Math.atan2(Math.tan(n),Math.cos(s))-this.lat0);else{var a=Math.sin(n),r=Math.cos(n),o=Re(this.a,this.e,a),h=Math.tan(n)*Math.tan(n),l=s*Math.cos(n),u=l*l,c=this.es*r*r/(1-this.es);e=o*l*(1-u*h*(1/6-(8-h+8*c)*u/120)),i=this.a*Pe(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+o*a/r*u*(.5+(5-h+6*c)*u/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,s=t.x/this.a,n=t.y/this.a;if(this.sphere){var a=n+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(s)),i=Math.atan2(Math.tan(s),Math.cos(a))}else{var r=qe(this.ml0/this.a+n,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-P)<=N)return t.x=this.long0,t.y=P,n<0&&(t.y*=-1),t;var o=Re(this.a,this.e,Math.sin(r)),h=o*o*o/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(r),2),u=s*this.a/o,c=u*u;e=r-o*Math.tan(r)/h*u*u*(.5-(1+3*l)*u*u/24),i=u*(1-c*(l/3+(1+3*l)*l*c/15))/Math.cos(r)}return t.x=lt(i+this.long0),t.y=Ge(e),t},names:["Cassini","Cassini_Soldner","cass"]};function ze(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}const De={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-P)<N?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<N?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=ze(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,i=[];return i[0]=.3333333333333333*t,e=t*t,i[0]+=.17222222222222222*e,i[1]=.06388888888888888*e,e*=t,i[0]+=.10257936507936508*e,i[1]+=.0664021164021164*e,i[2]=.016415012942191543*e,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=ze(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,i,s,n,a,r,o,h,l,u,c=t.x,f=t.y;if(c=lt(c-this.long0),this.sphere){if(a=Math.sin(f),u=Math.cos(f),s=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+u*s:1+this.sinph0*a+this.cosph0*u*s)<=N)return null;e=(i=Math.sqrt(2/i))*u*Math.sin(c),i*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*u*s}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),Math.abs(f+this.lat0)<N)return null;i=L-.5*f,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(c),i*=s}}else{switch(o=0,h=0,l=0,s=Math.cos(c),n=Math.sin(c),a=Math.sin(f),r=ze(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=r/this.qp,h=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:l=1+this.sinb1*o+this.cosb1*h*s;break;case this.EQUIT:l=1+h*s;break;case this.N_POLE:l=P+f,r=this.qp-r;break;case this.S_POLE:l=f-P,r=this.qp+r}if(Math.abs(l)<N)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*o-this.sinb1*h*s):(l=Math.sqrt(2/(1+h*s)))*o*this.ymf,e=this.xmf*l*h*n;break;case this.N_POLE:case this.S_POLE:r>=0?(e=(l=Math.sqrt(r))*n,i=s*(this.mode===this.S_POLE?l:-l)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,s,n,a,r,o,h,l,u,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var d,p=0,y=0;if((i=.5*(d=Math.sqrt(c*c+f*f)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(i),p=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=N?0:Math.asin(f*y/d),c*=y,f=p*d;break;case this.OBLIQ:i=Math.abs(d)<=N?this.lat0:Math.asin(p*this.sinph0+f*y*this.cosph0/d),c*=y*this.cosph0,f=(p-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:f=-f,i=P-i;break;case this.S_POLE:i-=P}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,(r=Math.sqrt(c*c+f*f))<N)return t.x=this.long0,t.y=this.lat0,t;n=2*Math.asin(.5*r/this.rq),s=Math.cos(n),c*=n=Math.sin(n),this.mode===this.OBLIQ?(o=s*this.sinb1+f*n*this.cosb1/r,a=this.qp*o,f=r*this.cosb1*s-f*this.sinb1*n):(o=f*n/r,a=this.qp*o,f=r*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(a=c*c+f*f))return t.x=this.long0,t.y=this.lat0,t;o=1-a/this.qp,this.mode===this.S_POLE&&(o=-o)}e=Math.atan2(c,f),u=(h=Math.asin(o))+h,i=h+(l=this.apa)[0]*Math.sin(u)+l[1]*Math.sin(u+u)+l[2]*Math.sin(u+u+u)}return t.x=lt(this.long0+e),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Be(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Ue={init:function(){Math.abs(this.lat1+this.lat2)<N||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ot(this.e3,this.sin_po,this.cos_po),this.qs1=ze(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ot(this.e3,this.sin_po,this.cos_po),this.qs2=ze(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=ze(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>N?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var s=ze(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*s)/this.ns0,a=this.ns0*lt(e-this.long0),r=n*Math.sin(a)+this.x0,o=this.rh-n*Math.cos(a)+this.y0;return t.x=r,t.y=o,t},inverse:function(t){var e,i,s,n,a,r;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1),n=0,0!==e&&(n=Math.atan2(s*t.x,s*t.y)),s=e*this.ns0/this.a,this.sphere?r=Math.asin((this.c-s*s)/(2*this.ns0)):(i=(this.c-s*s)/this.ns0,r=this.phi1z(this.e3,i)),a=lt(n/this.ns0+this.long0),t.x=a,t.y=r,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var i,s,n,a,r=Be(.5*e);if(t<N)return r;for(var o=t*t,h=1;h<=25;h++)if(r+=a=.5*(n=1-(s=t*(i=Math.sin(r)))*s)*n/Math.cos(r)*(e/(1-o)-i/n+.5/t*Math.log((1-s)/(1+s))),Math.abs(a)<=1e-7)return r;return null}},We={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,s,n,a,r,o,h=t.x,l=t.y;return s=lt(h-this.long0),e=Math.sin(l),i=Math.cos(l),n=Math.cos(s),(a=this.sin_p14*e+this.cos_p14*i*n)>0||Math.abs(a)<=N?(r=this.x0+1*this.a*i*Math.sin(s)/a,o=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*n)/a):(r=this.x0+this.infinity_dist*i*Math.sin(s),o=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*n)),t.x=r,t.y=o,t},inverse:function(t){var e,i,s,n,a,r;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(e,this.rc),i=Math.sin(n),r=Be((s=Math.cos(n))*this.sin_p14+t.y*i*this.cos_p14/e),a=Math.atan2(t.x*i,e*this.cos_p14*s-t.y*this.sin_p14*i),a=lt(this.long0+a)):(r=this.phic0,a=0),t.x=a,t.y=r,t},names:["gnom"]},Ke={init:function(){this.sphere||(this.k0=ot(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,s=t.x,n=t.y,a=lt(s-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var r=ze(this.e,Math.sin(n));e=this.x0+this.a*this.k0*a,i=this.y0+this.a*r*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=lt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*P:P;for(var s,n,a,r,o=Math.asin(.5*e),h=0;h<30;h++)if(n=Math.sin(o),a=Math.cos(o),r=t*n,o+=s=Math.pow(1-r*r,2)/(2*a)*(e/(1-t*t)-n/(1-r*r)+.5/t*Math.log((1-r)/(1+r))),Math.abs(s)<=1e-10)return o;return NaN}(this.e,2*t.y*this.k0/this.a),e=lt(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]},He={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,s=lt(e-this.long0),n=Ge(i-this.lat0);return t.x=this.x0+this.a*s*this.rc,t.y=this.y0+this.a*n,t},inverse:function(t){var e=t.x,i=t.y;return t.x=lt(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Ge(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Xe={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ne(this.es),this.e1=Ae(this.es),this.e2=Te(this.es),this.e3=Le(this.es),this.ml0=this.a*Pe(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,s,n=t.x,a=t.y,r=lt(n-this.long0);if(s=r*Math.sin(a),this.sphere)Math.abs(a)<=N?(e=this.a*r,i=-1*this.a*this.lat0):(e=this.a*Math.sin(s)/Math.tan(a),i=this.a*(Ge(a-this.lat0)+(1-Math.cos(s))/Math.tan(a)));else if(Math.abs(a)<=N)e=this.a*r,i=-1*this.ml0;else{var o=Re(this.a,this.e,Math.sin(a))/Math.tan(a);e=o*Math.sin(s),i=this.a*Pe(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+o*(1-Math.cos(s))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,s,n,a,r,o,h,l;if(s=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=N)e=lt(s/this.a+this.long0),i=0;else{var u;for(r=this.lat0+n/this.a,o=s*s/this.a/this.a+r*r,h=r,a=20;a;--a)if(h+=l=-1*(r*(h*(u=Math.tan(h))+1)-h-.5*(h*h+o)*u)/((h-r)/u-1),Math.abs(l)<=N){i=h;break}e=lt(this.long0+Math.asin(s*Math.tan(h)/this.a)/Math.sin(i))}else if(Math.abs(n+this.ml0)<=N)i=0,e=lt(this.long0+s/this.a);else{var c,f,d,p,y;for(r=(this.ml0+n)/this.a,o=s*s/this.a/this.a+r*r,h=r,a=20;a;--a)if(y=this.e*Math.sin(h),c=Math.sqrt(1-y*y)*Math.tan(h),f=this.a*Pe(this.e0,this.e1,this.e2,this.e3,h),d=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=l=(r*(c*(p=f/this.a)+1)-p-.5*c*(p*p+o))/(this.es*Math.sin(2*h)*(p*p+o-2*r*p)/(4*c)+(r-p)*(c*d-2/Math.sin(2*h))-d),Math.abs(l)<=N){i=h;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=lt(this.long0+Math.asin(s*c/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]},Ye={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,i=t.x,s=t.y-this.lat0,n=i-this.long0,a=s/I*1e-5,r=n,o=1,h=0;for(e=1;e<=10;e++)o*=a,h+=this.A[e]*o;var l,u=h,c=r,f=1,d=0,p=0,y=0;for(e=1;e<=6;e++)l=d*u+f*c,f=f*u-d*c,d=l,p=p+this.B_re[e]*f-this.B_im[e]*d,y=y+this.B_im[e]*f+this.B_re[e]*d;return t.x=y*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,i,s=t.x,n=t.y,a=s-this.x0,r=(n-this.y0)/this.a,o=a/this.a,h=1,l=0,u=0,c=0;for(e=1;e<=6;e++)i=l*r+h*o,h=h*r-l*o,l=i,u=u+this.C_re[e]*h-this.C_im[e]*l,c=c+this.C_im[e]*h+this.C_re[e]*l;for(var f=0;f<this.iterations;f++){var d,p=u,y=c,m=r,g=o;for(e=2;e<=6;e++)d=y*u+p*c,p=p*u-y*c,y=d,m+=(e-1)*(this.B_re[e]*p-this.B_im[e]*y),g+=(e-1)*(this.B_im[e]*p+this.B_re[e]*y);p=1,y=0;var v=this.B_re[1],M=this.B_im[1];for(e=2;e<=6;e++)d=y*u+p*c,p=p*u-y*c,y=d,v+=e*(this.B_re[e]*p-this.B_im[e]*y),M+=e*(this.B_im[e]*p+this.B_re[e]*y);var b=v*v+M*M;u=(m*v+g*M)/b,c=(g*v-m*M)/b}var _=u,x=c,w=1,k=0;for(e=1;e<=9;e++)w*=_,k+=this.D[e]*w;var E=this.lat0+k*I*1e5,O=this.long0+x;return t.x=O,t.y=E,t},names:["New_Zealand_Map_Grid","nzmg"]},Qe={init:function(){},forward:function(t){var e=t.x,i=t.y,s=lt(e-this.long0),n=this.x0+this.a*s,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=n,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=lt(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]},Ve={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=fe(this.es)},forward:function(t){var e,i,s=t.x,n=t.y;if(s=lt(s-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(n),r=20;r;--r){var o=(this.m*n+Math.sin(n)-a)/(this.m+Math.cos(n));if(n-=o,Math.abs(o)<N)break}else n=1!==this.n?Math.asin(this.n*Math.sin(n)):n;e=this.a*this.C_x*s*(this.m+Math.cos(n)),i=this.a*this.C_y*n}else{var h=Math.sin(n),l=Math.cos(n);i=this.a*de(n,h,l,this.en),e=this.a*s*l/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,s;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=Be((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Be(Math.sin(e)/this.n)),i=lt(i+this.long0),e=Ge(e)):(e=pe(t.y/this.a,this.es,this.en),(s=Math.abs(e))<P?(s=Math.sin(e),i=lt(this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)))):s-N<P&&(i=this.long0)),t.x=i,t.y=e,t},names:["Sinusoidal","sinu"]},Je={init:function(){},forward:function(t){for(var e=t.x,i=t.y,s=lt(e-this.long0),n=i,a=Math.PI*Math.sin(i);;){var r=-(n+Math.sin(n)-a)/(1+Math.cos(n));if(n+=r,Math.abs(r)<N)break}n/=2,Math.PI/2-Math.abs(i)<N&&(s=0);var o=.900316316158*this.a*s*Math.cos(n)+this.x0,h=1.4142135623731*this.a*Math.sin(n)+this.y0;return t.x=o,t.y=h,t},inverse:function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var s=lt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));s<-Math.PI&&(s=-Math.PI),s>Math.PI&&(s=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var n=Math.asin(i);return t.x=s,t.y=n,t},names:["Mollweide","moll"]},Ze={init:function(){Math.abs(this.lat1+this.lat2)<N||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ne(this.es),this.e1=Ae(this.es),this.e2=Te(this.es),this.e3=Le(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ot(this.e,this.sinphi,this.cosphi),this.ml1=Pe(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<N?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ot(this.e,this.sinphi,this.cosphi),this.ml2=Pe(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Pe(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,s=t.y;if(this.sphere)e=this.a*(this.g-s);else{var n=Pe(this.e0,this.e1,this.e2,this.e3,s);e=this.a*(this.g-n)}var a=this.ns*lt(i-this.long0),r=this.x0+e*Math.sin(a),o=this.y0+this.rh-e*Math.cos(a);return t.x=r,t.y=o,t},inverse:function(t){var e,i,s,n;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;return 0!==i&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere?(n=lt(this.long0+a/this.ns),s=Ge(this.g-i/this.a),t.x=n,t.y=s,t):(s=qe(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),n=lt(this.long0+a/this.ns),t.x=n,t.y=s,t)},names:["Equidistant_Conic","eqdc"]},$e={init:function(){this.R=this.a},forward:function(t){var e,i,s=t.x,n=t.y,a=lt(s-this.long0);Math.abs(n)<=N&&(e=this.x0+this.R*a,i=this.y0);var r=Be(2*Math.abs(n/Math.PI));(Math.abs(a)<=N||Math.abs(Math.abs(n)-P)<=N)&&(e=this.x0,i=n>=0?this.y0+Math.PI*this.R*Math.tan(.5*r):this.y0+Math.PI*this.R*-Math.tan(.5*r));var o=.5*Math.abs(Math.PI/a-a/Math.PI),h=o*o,l=Math.sin(r),u=Math.cos(r),c=u/(l+u-1),f=c*c,d=c*(2/l-1),p=d*d,y=Math.PI*this.R*(o*(c-p)+Math.sqrt(h*(c-p)*(c-p)-(p+h)*(f-p)))/(p+h);a<0&&(y=-y),e=this.x0+y;var m=h+c;return y=Math.PI*this.R*(d*m-o*Math.sqrt((p+h)*(h+1)-m*m))/(p+h),i=n>=0?this.y0+y:this.y0-y,t.x=e,t.y=i,t},inverse:function(t){var e,i,s,n,a,r,o,h,l,u,c,f;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,a=(s=t.x/c)*s+(n=t.y/c)*n,c=3*(n*n/(h=-2*(r=-Math.abs(n)*(1+a))+1+2*n*n+a*a)+(2*(o=r-2*n*n+s*s)*o*o/h/h/h-9*r*o/h/h)/27)/(l=(r-o*o/3/h)/h)/(u=2*Math.sqrt(-l/3)),Math.abs(c)>1&&(c=c>=0?1:-1),f=Math.acos(c)/3,i=t.y>=0?(-u*Math.cos(f+Math.PI/3)-o/3/h)*Math.PI:-(-u*Math.cos(f+Math.PI/3)-o/3/h)*Math.PI,e=Math.abs(s)<N?this.long0:lt(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(s*s-n*n)+a*a))/2/s),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},ti={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,s,n,a,r,o,h,l,u,c,f,d,p,y,m,g,v,M,b,_,x,w=t.x,k=t.y,E=Math.sin(t.y),O=Math.cos(t.y),S=lt(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=N?(t.x=this.x0+this.a*(P-k)*Math.sin(S),t.y=this.y0-this.a*(P-k)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=N?(t.x=this.x0+this.a*(P+k)*Math.sin(S),t.y=this.y0+this.a*(P+k)*Math.cos(S),t):(v=this.sin_p12*E+this.cos_p12*O*Math.cos(S),g=(m=Math.acos(v))?m/Math.sin(m):1,t.x=this.x0+this.a*g*O*Math.sin(S),t.y=this.y0+this.a*g*(this.cos_p12*E-this.sin_p12*O*Math.cos(S)),t):(e=Ne(this.es),i=Ae(this.es),s=Te(this.es),n=Le(this.es),Math.abs(this.sin_p12-1)<=N?(a=this.a*Pe(e,i,s,n,P),r=this.a*Pe(e,i,s,n,k),t.x=this.x0+(a-r)*Math.sin(S),t.y=this.y0-(a-r)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=N?(a=this.a*Pe(e,i,s,n,P),r=this.a*Pe(e,i,s,n,k),t.x=this.x0+(a+r)*Math.sin(S),t.y=this.y0+(a+r)*Math.cos(S),t):(o=E/O,h=Re(this.a,this.e,this.sin_p12),l=Re(this.a,this.e,E),u=Math.atan((1-this.es)*o+this.es*h*this.sin_p12/(l*O)),M=0===(c=Math.atan2(Math.sin(S),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(S)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(c)-Math.PI)<=N?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(S)*Math.cos(u)/Math.sin(c)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),m=h*M*(1-(b=M*M)*(y=(d=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*d)*(1-y)/6+(_=b*M)/8*(p=f*d)*(1-2*y)+(x=_*M)/120*(y*(4-7*y)-3*f*f*(1-7*y))-x*M/48*p),t.x=this.x0+m*Math.sin(c),t.y=this.y0+m*Math.cos(c),t))},inverse:function(t){var e,i,s,n,a,r,o,h,l,u,c,f,d,p,y,m,g,v,M,b,_,x,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*P*this.a)return;return i=e/this.a,s=Math.sin(i),n=Math.cos(i),a=this.long0,Math.abs(e)<=N?r=this.lat0:(r=Be(n*this.sin_p12+t.y*s*this.cos_p12/e),o=Math.abs(this.lat0)-P,a=Math.abs(o)<=N?this.lat0>=0?lt(this.long0+Math.atan2(t.x,-t.y)):lt(this.long0-Math.atan2(-t.x,t.y)):lt(this.long0+Math.atan2(t.x*s,e*this.cos_p12*n-t.y*this.sin_p12*s))),t.x=a,t.y=r,t}return h=Ne(this.es),l=Ae(this.es),u=Te(this.es),c=Le(this.es),Math.abs(this.sin_p12-1)<=N?(r=qe(((f=this.a*Pe(h,l,u,c,P))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,h,l,u,c),a=lt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=r,t):Math.abs(this.sin_p12+1)<=N?(f=this.a*Pe(h,l,u,c,P),r=qe(((e=Math.sqrt(t.x*t.x+t.y*t.y))-f)/this.a,h,l,u,c),a=lt(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=r,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),d=Re(this.a,this.e,this.sin_p12),m=Math.cos(y),v=-(g=this.e*this.cos_p12*m)*g/(1-this.es),M=3*this.es*(1-v)*this.sin_p12*this.cos_p12*m/(1-this.es),x=1-v*(_=(b=e/d)-v*(1+v)*Math.pow(b,3)/6-M*(1+3*v)*Math.pow(b,4)/24)*_/2-b*_*_*_/6,p=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*m),a=lt(this.long0+Math.asin(Math.sin(y)*Math.sin(_)/Math.cos(p))),w=Math.sin(p),r=Math.atan2((w-this.es*x*this.sin_p12)*Math.tan(p),w*(1-this.es)),t.x=a,t.y=r,t)},names:["Azimuthal_Equidistant","aeqd"]},ei={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,s,n,a,r,o,h=t.x,l=t.y;return s=lt(h-this.long0),e=Math.sin(l),i=Math.cos(l),n=Math.cos(s),((a=this.sin_p14*e+this.cos_p14*i*n)>0||Math.abs(a)<=N)&&(r=1*this.a*i*Math.sin(s),o=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*n)),t.x=r,t.y=o,t},inverse:function(t){var e,i,s,n,a,r,o;return t.x-=this.x0,t.y-=this.y0,i=Be((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),s=Math.sin(i),n=Math.cos(i),r=this.long0,Math.abs(e)<=N?(o=this.lat0,t.x=r,t.y=o,t):(o=Be(n*this.sin_p14+t.y*s*this.cos_p14/e),a=Math.abs(this.lat0)-P,Math.abs(a)<=N?(r=this.lat0>=0?lt(this.long0+Math.atan2(t.x,-t.y)):lt(this.long0-Math.atan2(-t.x,t.y)),t.x=r,t.y=o,t):(r=lt(this.long0+Math.atan2(t.x*s,e*this.cos_p14*n-t.y*this.sin_p14*s)),t.x=r,t.y=o,t))},names:["ortho"]};var ii=1,si=2,ni=3,ai=4;function ri(t,e,i,s){var n;return t<N?(s.value=ii,n=0):(n=Math.atan2(e,i),Math.abs(n)<=L?s.value=ii:n>L&&n<=P+L?(s.value=si,n-=P):n>P+L||n<=-(P+L)?(s.value=ni,n=n>=0?n-G:n+G):(s.value=ai,n+=P)),n}function oi(t,e){var i=t+e;return i<-G?i+=R:i>+G&&(i-=R),i}const hi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=P-L/2?this.face=5:this.lat0<=-(P-L/2)?this.face=6:Math.abs(this.long0)<=L?this.face=1:Math.abs(this.long0)<=P+L?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,s,n,a,r,o={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,5===this.face)n=P-e,i>=L&&i<=P+L?(h.value=ii,s=i-P):i>P+L||i<=-(P+L)?(h.value=si,s=i>0?i-G:i+G):i>-(P+L)&&i<=-L?(h.value=ni,s=i+P):(h.value=ai,s=i);else if(6===this.face)n=P+e,i>=L&&i<=P+L?(h.value=ii,s=-i+P):i<L&&i>=-L?(h.value=si,s=-i):i<-L&&i>=-(P+L)?(h.value=ni,s=-i-P):(h.value=ai,s=i>0?-i+G:-i-G);else{var l,u,c,f,d,p;2===this.face?i=oi(i,+P):3===this.face?i=oi(i,+G):4===this.face&&(i=oi(i,-P)),f=Math.sin(e),d=Math.cos(e),p=Math.sin(i),l=d*Math.cos(i),u=d*p,c=f,1===this.face?s=ri(n=Math.acos(l),c,u,h):2===this.face?s=ri(n=Math.acos(u),c,-l,h):3===this.face?s=ri(n=Math.acos(-l),c,-u,h):4===this.face?s=ri(n=Math.acos(-u),c,l,h):(n=s=0,h.value=ii)}return r=Math.atan(12/G*(s+Math.acos(Math.sin(s)*Math.cos(L))-P)),a=Math.sqrt((1-Math.cos(n))/(Math.cos(r)*Math.cos(r))/(1-Math.cos(Math.atan(1/Math.cos(s))))),h.value===si?r+=P:h.value===ni?r+=G:h.value===ai&&(r+=1.5*G),o.x=a*Math.cos(r),o.y=a*Math.sin(r),o.x=o.x*this.a+this.x0,o.y=o.y*this.a+this.y0,t.x=o.x,t.y=o.y,t},inverse:function(t){var e,i,s,n,a,r,o,h,l,u,c,f,d={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=ii:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=si,e-=P):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=ni,e=e<0?e+G:e-G):(p.value=ai,e+=P),l=G/12*Math.tan(e),a=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),r=Math.atan(a),(o=1-(s=Math.cos(e))*s*(n=Math.tan(i))*n*(1-Math.cos(Math.atan(1/Math.cos(r)))))<-1?o=-1:o>1&&(o=1),5===this.face)h=Math.acos(o),d.phi=P-h,p.value===ii?d.lam=r+P:p.value===si?d.lam=r<0?r+G:r-G:p.value===ni?d.lam=r-P:d.lam=r;else if(6===this.face)h=Math.acos(o),d.phi=h-P,p.value===ii?d.lam=-r+P:p.value===si?d.lam=-r:p.value===ni?d.lam=-r-P:d.lam=r<0?-r-G:-r+G;else{var y,m,g;l=(y=o)*y,m=(l+=(g=l>=1?0:Math.sqrt(1-l)*Math.sin(r))*g)>=1?0:Math.sqrt(1-l),p.value===si?(l=m,m=-g,g=l):p.value===ni?(m=-m,g=-g):p.value===ai&&(l=m,m=g,g=-l),2===this.face?(l=y,y=-m,m=l):3===this.face?(y=-y,m=-m):4===this.face&&(l=y,y=m,m=-l),d.phi=Math.acos(-g)-P,d.lam=Math.atan2(m,y),2===this.face?d.lam=oi(d.lam,-P):3===this.face?d.lam=oi(d.lam,-G):4===this.face&&(d.lam=oi(d.lam,+P))}return 0!==this.es&&(u=d.phi<0?1:0,c=Math.tan(d.phi),f=this.b/Math.sqrt(c*c+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),u&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var li=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],ui=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ci=.8487,fi=1.3523,di=T/5,pi=1/di,yi=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const mi={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=lt(t.x-this.long0),i=Math.abs(t.y),s=Math.floor(i*di);s<0?s=0:s>=18&&(s=17);var n={x:yi(li[s],i=T*(i-pi*s))*e,y:yi(ui[s],i)};return t.y<0&&(n.y=-n.y),n.x=n.x*this.a*ci+this.x0,n.y=n.y*this.a*fi+this.y0,n},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*ci),y:Math.abs(t.y-this.y0)/(this.a*fi)};if(e.y>=1)e.x/=li[18][0],e.y=t.y<0?-P:P;else{var i=Math.floor(18*e.y);for(i<0?i=0:i>=18&&(i=17);;)if(ui[i][0]>e.y)--i;else{if(!(ui[i+1][0]<=e.y))break;++i}var s=ui[i],n=5*(e.y-s[0])/(ui[i+1][0]-s[0]);n=function(t,e,i,s){for(var n=e;s;--s){var a=t(n);if(n-=a,Math.abs(a)<1e-10)break}return n}((function(t){return(yi(s,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(s,t)}),n,0,100),e.x/=yi(li[i],n),e.y=(5*i+n)*A,t.y<0&&(e.y=-e.y)}return e.x=lt(e.x+this.long0),e},names:["Robinson","robin"]},gi={init:function(){this.name="geocent"},forward:function(t){return It(t,this.es,this.a)},inverse:function(t){return Pt(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var vi={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Mi={init:function(){if(Object.keys(vi).forEach(function(t){if(void 0===this[t])this[t]=vi[t].def;else{if(vi[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);vi[t].num&&(this[t]=parseFloat(this[t]))}vi[t].degrees&&(this[t]=this[t]*A)}.bind(this)),Math.abs(Math.abs(this.lat0)-P)<N?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<N?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,s,n,a=Math.sin(t.y),r=Math.cos(t.y),o=Math.cos(t.x);switch(this.mode){case 3:i=this.sinph0*a+this.cosph0*r*o;break;case 2:i=r*o;break;case 1:i=-a;break;case 0:i=a}switch(e=(i=this.pn1/(this.p-i))*r*Math.sin(t.x),this.mode){case 3:i*=this.cosph0*a-this.sinph0*r*o;break;case 2:i*=a;break;case 0:i*=-r*o;break;case 1:i*=r*o}return n=1/((s=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*n,i=s*n,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,s,n={x:t.x,y:t.y};s=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*s,i=this.pn1*t.y*this.cw*s,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var a=ge(t.x,t.y);if(Math.abs(a)<N)n.x=0,n.y=t.y;else{var r,o;switch(o=1-a*a*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/a+a/this.pn1),r=Math.sqrt(1-o*o),this.mode){case 3:n.y=Math.asin(r*this.sinph0+t.y*o*this.cosph0/a),t.y=(r-this.sinph0*Math.sin(n.y))*a,t.x*=o*this.cosph0;break;case 2:n.y=Math.asin(t.y*o/a),t.y=r*a,t.x*=o;break;case 0:n.y=Math.asin(r),t.y=-t.y;break;case 1:n.y=-Math.asin(r)}n.x=Math.atan2(t.x,t.y)}return t.x=n.x+this.long0,t.y=n.y,t},names:["Tilted_Perspective","tpers"]},bi={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,s,n,a=t.x,r=t.y;if(a-=this.long0,"ellipse"===this.shape){r=Math.atan(this.radius_p2*Math.tan(r));var o=this.radius_p/ge(this.radius_p*Math.cos(r),Math.sin(r));if(i=o*Math.cos(a)*Math.cos(r),s=o*Math.sin(a)*Math.cos(r),n=o*Math.sin(r),(this.radius_g-i)*i-s*s-n*n*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/ge(n,e)),t.y=this.radius_g_1*Math.atan(n/e)):(t.x=this.radius_g_1*Math.atan(s/e),t.y=this.radius_g_1*Math.atan(n/ge(s,e)))}else"sphere"===this.shape&&(e=Math.cos(r),i=Math.cos(a)*e,s=Math.sin(a)*e,n=Math.sin(r),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/ge(n,e)),t.y=this.radius_g_1*Math.atan(n/e)):(t.x=this.radius_g_1*Math.atan(s/e),t.y=this.radius_g_1*Math.atan(n/ge(s,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,s,n,a=-1,r=0,o=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*ge(1,o)):(r=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*ge(1,r));var h=o/this.radius_p;if(e=r*r+h*h+a*a,(s=(i=2*this.radius_g*a)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-i-Math.sqrt(s))/(2*e),a=this.radius_g+n*a,r*=n,o*=n,t.x=Math.atan2(r,a),t.y=Math.atan(o*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(o=Math.tan(t.y/this.radius_g_1),r=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+o*o)):(r=Math.tan(t.x/this.radius_g_1),o=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+r*r)),e=r*r+o*o+a*a,(s=(i=2*this.radius_g*a)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-i-Math.sqrt(s))/(2*e),a=this.radius_g+n*a,r*=n,o*=n,t.x=Math.atan2(r,a),t.y=Math.atan(o*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var _i;Ut.defaultDatum="WGS84",Ut.Proj=jt,Ut.WGS84=new Ut.Proj("WGS84"),Ut.Point=he,Ut.toPoint=Gt,Ut.defs=st,Ut.nadgrid=function(t,e){var i=new DataView(e),s=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(i),n=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:kt(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(i,s);n.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=function(t,e,i){for(var s=[],n=0;n<e.nSubgrids;n++){var a=Ot(t,176,i),r=St(t,176,a,i),o=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),h=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[wt(a.lowerLongitude),wt(a.lowerLatitude)],del:[wt(a.longitudeInterval),wt(a.latitudeInterval)],lim:[o,h],count:a.gridNodeCount,cvs:Et(r)})}return s}(i,n,s),r={header:n,subgrids:a};return _t[t]=r,r},Ut.transform=Ft,Ut.mgrs=Zt,Ut.version="__VERSION__",(_i=Ut).Proj.projections.add(ye),_i.Proj.projections.add(be),_i.Proj.projections.add(_e),_i.Proj.projections.add(ke),_i.Proj.projections.add(Ee),_i.Proj.projections.add(Oe),_i.Proj.projections.add(Ce),_i.Proj.projections.add(je),_i.Proj.projections.add(Ie),_i.Proj.projections.add(Fe),_i.Proj.projections.add(De),_i.Proj.projections.add(Ue),_i.Proj.projections.add(We),_i.Proj.projections.add(Ke),_i.Proj.projections.add(He),_i.Proj.projections.add(Xe),_i.Proj.projections.add(Ye),_i.Proj.projections.add(Qe),_i.Proj.projections.add(Ve),_i.Proj.projections.add(Je),_i.Proj.projections.add(Ze),_i.Proj.projections.add($e),_i.Proj.projections.add(ti),_i.Proj.projections.add(ei),_i.Proj.projections.add(hi),_i.Proj.projections.add(mi),_i.Proj.projections.add(gi),_i.Proj.projections.add(Mi),_i.Proj.projections.add(bi);const xi={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},wi=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||xi[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},ki=6378137,Ei=Math.PI*ki,Oi=[-Ei,-Ei,Ei,Ei],Si=[-180,-85,180,85],Ci=ki*Math.log(Math.tan(Math.PI/2));class ji extends wi{constructor(t){super({code:t,units:"m",extent:Oi,global:!0,worldExtent:Si,getPointResolution:function(t,e){return t/Math.cosh(e[1]/ki)}})}}const Ii=[new ji("EPSG:3857"),new ji("EPSG:102100"),new ji("EPSG:102113"),new ji("EPSG:900913"),new ji("http://www.opengis.net/def/crs/EPSG/0/3857"),new ji("http://www.opengis.net/gml/srs/epsg.xml#3857")];const Pi=[-180,-90,180,90],Ni=6378137*Math.PI/180;class Ai extends wi{constructor(t,e){super({code:t,units:"degrees",extent:Pi,axisOrientation:e,global:!0,metersPerUnit:Ni,worldExtent:Pi})}}const Ti=[new Ai("CRS:84"),new Ai("EPSG:4326","neu"),new Ai("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ai("urn:ogc:def:crs:OGC:2:84"),new Ai("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ai("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ai("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Li={},Ri={};function Gi(t,e,i){const s=t.getCode(),n=e.getCode();s in Ri||(Ri[s]={}),Ri[s][n]=i}function qi(t,e){if(void 0!==e)for(let i=0,s=t.length;i<s;++i)e[i]=t[i];else e=t.slice();return e}function Fi(t,e){if(void 0!==e&&t!==e){for(let i=0,s=t.length;i<s;++i)e[i]=t[i];t=e}return t}function zi(t){!function(t,e){Li[t]=e}(t.getCode(),t),Gi(t,t,qi)}function Di(t){return"string"==typeof t?Li[e=t]||Li[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Bi(t){!function(t){t.forEach(zi)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Gi(e,t,qi)}))}))}function Ui(t,e){let i=function(t,e){let i;return t in Ri&&e in Ri[t]&&(i=Ri[t][e]),i}(t.getCode(),e.getCode());return i||(i=Fi),i}function Wi(t,e){return Ui(Di(t),Di(e))}var Ki,Hi,Xi;Bi(Ii),Bi(Ti),Ki=Ii,Hi=function(t,e,i){const s=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(s));for(let n=0;n<s;n+=i){e[n]=Ei*t[n]/180;let i=ki*Math.log(Math.tan(Math.PI*(+t[n+1]+90)/360));i>Ci?i=Ci:i<-Ci&&(i=-Ci),e[n+1]=i}return e},Xi=function(t,e,i){const s=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(s));for(let n=0;n<s;n+=i)e[n]=180*t[n]/Ei,e[n+1]=360*Math.atan(Math.exp(t[n+1]/ki))/Math.PI-90;return e},Ti.forEach((function(t){Ki.forEach((function(e){Gi(t,e,Hi),Gi(e,t,Xi)}))}));const Yi=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},Qi=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function Vi(t,e){return t>e?1:t<e?-1:0}function Ji(t,e){const i=Array.isArray(e)?e:[e],s=i.length;for(let e=0;e<s;e++)t[t.length]=i[e]}function Zi(){}function $i(t){for(const e in t)delete t[e]}const ts=class extends Qi{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),s=i[t]||(i[t]=[]);s.includes(e)||s.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const n=e?new Yi(t):t;n.target||(n.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),r=this.pendingRemovals_||(this.pendingRemovals_={});let o;i in a||(a[i]=0,r[i]=0),++a[i];for(let t=0,e=s.length;t<e;++t)if(o="handleEvent"in s[t]?s[t].handleEvent(n):s[t].call(this,n),!1===o||n.propagationStopped){o=!1;break}if(0==--a[i]){let t=r[i];for(delete r[i];t--;)this.removeEventListener(i,Zi);delete a[i]}return o}disposeInternal(){this.listeners_&&$i(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const s=i.indexOf(e);-1!==s&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[s]=Zi,++this.pendingRemovals_[t]):(i.splice(s,1),0===i.length&&delete this.listeners_[t]))}}};function es(t,e,i,s,n){if(s&&s!==t&&(i=i.bind(s)),n){const s=i;i=function(){t.removeEventListener(e,i),s.apply(this,arguments)}}const a={target:t,type:e,listener:i};return t.addEventListener(e,i),a}function is(t,e,i,s){return es(t,e,i,s,!0)}function ss(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),$i(t))}class ns extends ts{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,s=new Array(i);for(let n=0;n<i;++n)s[n]=es(this,t[n],e);return s}return es(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const s=t.length;i=new Array(s);for(let n=0;n<s;++n)i[n]=is(this,t[n],e)}else i=is(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)!function(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)ss(t[e]);else ss(t)}(i);else if(Array.isArray(t))for(let i=0,s=t.length;i<s;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}ns.prototype.on,ns.prototype.once,ns.prototype.un;const as=ns;function rs(){throw new Error("Unimplemented abstract method.")}let os=0;class hs extends Yi{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}const ls=class extends as{constructor(t){super(),this.on,this.once,this.un,this.ol_uid||(this.ol_uid=String(++os)),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new hs(i,t,e)),i="propertychange",this.hasListener(i)&&this.dispatchEvent(new hs(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const s=this.values_||(this.values_={});if(i)s[t]=e;else{const i=s[t];s[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],function(t){let e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,i)}}};new Array(6);const us={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function cs(t,e,i){let s,n;return s=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,n=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,s*s+n*n}function fs(t,e){const i=t[0],s=t[1],n=t[2],a=t[3],r=e[0],o=e[1];let h=us.UNKNOWN;return r<i?h|=us.LEFT:r>n&&(h|=us.RIGHT),o<s?h|=us.BELOW:o>a&&(h|=us.ABOVE),h===us.UNKNOWN&&(h=us.INTERSECTING),h}function ds(t,e,i,s,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=s,n):[t,e,i,s]}function ps(t){return ds(1/0,1/0,-1/0,-1/0,t)}function ys(t,e,i,s,n){for(;i<s;i+=n)ms(t,e[i],e[i+1]);return t}function ms(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function gs(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function vs(t){return t[3]-t[1]}const Ms=[1,0,0,1,0,0],bs=class extends ls{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(t){let e,i,s,n=!1;return function(){const a=Array.prototype.slice.call(arguments);return n&&this===s&&function(t,e){const i=t.length;if(i!==e.length)return!1;for(let s=0;s<i;s++)if(t[s]!==e[s])return!1;return!0}(a,i)||(n=!0,s=this,i=a,e=t.apply(this,arguments)),e}}((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return rs()}closestPointXY(t,e,i,s){return rs()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return rs()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&ps(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){rs()}scale(t,e,i){rs()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return rs()}getType(){return rs()}applyTransform(t){rs()}intersectsExtent(t){return rs()}translate(t,e){rs()}transform(t,e){const i=Di(t),s="tile-pixels"==i.getUnits()?function(t,s,n){const a=i.getExtent(),r=i.getWorldExtent(),o=vs(r)/vs(a);return function(t,e,i,s,n,a,r,o){const h=Math.sin(a),l=Math.cos(a);t[0]=s*l,t[1]=n*h,t[2]=-s*h,t[3]=n*l,t[4]=r*s*l-o*s*h+e,t[5]=r*n*h+o*n*l+i}(Ms,r[0],r[3],o,-o,0,0,0),function(t,e,i,s,n,a){a=a||[];let r=0;for(let e=0;e<i;e+=s){const i=t[e],s=t[e+1];a[r++]=n[0]*i+n[2]*s+n[4],a[r++]=n[1]*i+n[3]*s+n[5]}a&&a.length!=r&&(a.length=r)}(t,0,t.length,n,Ms,s),Wi(i,e)(t,s,n)}:Wi(i,e);return this.applyTransform(s),this}};function _s(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const xs=class extends bs{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return e=this.flatCoordinates,i=this.flatCoordinates.length,s=this.stride,ys(ps(t),e,0,i,s);var e,i,s}getCoordinates(){return rs()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=_s(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){rs()}setLayout(t,e,i){let s;if(t)s=_s(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}s=e.length,t=function(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const s=this.getStride();!function(t,e,i,s,n,a,r){r=r||[];const o=Math.cos(n),h=Math.sin(n),l=a[0],u=a[1];let c=0;for(let e=0;e<i;e+=s){const i=t[e]-l,n=t[e+1]-u;r[c++]=l+i*o-n*h,r[c++]=u+i*h+n*o;for(let i=e+2;i<e+s;++i)r[c++]=t[i]}r&&r.length!=c&&(r.length=c)}(i,0,i.length,s,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=gs(this.getExtent()));const s=this.getFlatCoordinates();if(s){const n=this.getStride();!function(t,e,i,s,n,a,r,o){o=o||[];const h=r[0],l=r[1];let u=0;for(let e=0;e<i;e+=s){const i=t[e]-h,r=t[e+1]-l;o[u++]=h+n*i,o[u++]=l+a*r;for(let i=e+2;i<e+s;++i)o[u++]=t[i]}o&&o.length!=u&&(o.length=u)}(s,0,s.length,n,t,e,i,s),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const s=this.getStride();!function(t,e,i,s,n,a,r){r=r||[];let o=0;for(let e=0;e<i;e+=s){r[o++]=t[e]+n,r[o++]=t[e+1]+a;for(let i=e+2;i<e+s;++i)r[o++]=t[i]}r&&r.length!=o&&(r.length=o)}(i,0,i.length,s,t,e,i),this.changed()}}};function ws(t,e,i,s,n,a){const r=n-i,o=a-s;if(0!==r||0!==o){const h=((t-i)*r+(e-s)*o)/(r*r+o*o);h>1?(i=n,s=a):h>0&&(i+=r*h,s+=o*h)}return ks(t,e,i,s)}function ks(t,e,i,s){const n=i-t,a=s-e;return n*n+a*a}function Es(t){return 180*t/Math.PI}function Os(t){return t*Math.PI/180}function Ss(t,e,i){return t+i*(e-t)}function Cs(t,e,i,s,n,a,r){const o=t[e],h=t[e+1],l=t[i]-o,u=t[i+1]-h;let c;if(0===l&&0===u)c=e;else{const f=((n-o)*l+(a-h)*u)/(l*l+u*u);if(f>1)c=i;else{if(f>0){for(let n=0;n<s;++n)r[n]=Ss(t[e+n],t[i+n],f);return void(r.length=s)}c=e}}for(let e=0;e<s;++e)r[e]=t[c+e];r.length=s}function js(t,e,i,s,n){let a=t[e],r=t[e+1];for(e+=s;e<i;e+=s){const i=t[e],s=t[e+1],o=ks(a,r,i,s);o>n&&(n=o),a=i,r=s}return n}function Is(t,e,i,s,n,a,r,o,h,l,u){if(e==i)return l;let c,f;if(0===n){if(f=ks(r,o,t[e],t[e+1]),f<l){for(c=0;c<s;++c)h[c]=t[e+c];return h.length=s,f}return l}u=u||[NaN,NaN];let d=e+s;for(;d<i;)if(Cs(t,d-s,d,s,r,o,u),f=ks(r,o,u[0],u[1]),f<l){for(l=f,c=0;c<s;++c)h[c]=u[c];h.length=s,d+=s}else d+=s*Math.max((Math.sqrt(f)-Math.sqrt(l))/n|0,1);if(a&&(Cs(t,i-s,e,s,r,o,u),f=ks(r,o,u[0],u[1]),f<l)){for(l=f,c=0;c<s;++c)h[c]=u[c];h.length=s}return l}function Ps(t,e,i,s){for(let n=0,a=i.length;n<a;++n){const a=i[n];for(let i=0;i<s;++i)t[e++]=a[i]}return e}function Ns(t,e){return e*Math.round(t/e)}function As(t,e,i,s,n,a,r){if(e==i)return r;let o,h,l=Ns(t[e],n),u=Ns(t[e+1],n);e+=s,a[r++]=l,a[r++]=u;do{if(o=Ns(t[e],n),h=Ns(t[e+1],n),(e+=s)==i)return a[r++]=o,a[r++]=h,r}while(o==l&&h==u);for(;e<i;){const i=Ns(t[e],n),c=Ns(t[e+1],n);if(e+=s,i==o&&c==h)continue;const f=o-l,d=h-u,p=i-l,y=c-u;f*y==d*p&&(f<0&&p<f||f==p||f>0&&p>f)&&(d<0&&y<d||d==y||d>0&&y>d)?(o=i,h=c):(a[r++]=o,a[r++]=h,l=o,u=h,o=i,h=c)}return a[r++]=o,a[r++]=h,r}function Ts(t,e,i,s,n){n=void 0!==n?n:[];let a=0;for(let r=e;r<i;r+=s)n[a++]=t.slice(r,r+s);return n.length=a,n}function Ls(t,e,i,s){let n=0,a=t[i-s],r=t[i-s+1];for(;e<i;e+=s){const i=t[e],s=t[e+1];n+=r*i-a*s,a=i,r=s}return n/2}class Rs extends xs{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Rs(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,s){return s<cs(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(js(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Is(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,s))}getArea(){return Ls(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ts(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=function(t,e,i,s,n,a,r){const o=(i-e)/s;if(o<3){for(;e<i;e+=s)a[r++]=t[e],a[r++]=t[e+1];return r}const h=new Array(o);h[0]=1,h[o-1]=1;const l=[e,i-s];let u=0;for(;l.length>0;){const i=l.pop(),a=l.pop();let r=0;const o=t[a],c=t[a+1],f=t[i],d=t[i+1];for(let e=a+s;e<i;e+=s){const i=ws(t[e],t[e+1],o,c,f,d);i>r&&(u=e,r=i)}r>n&&(h[(u-e)/s]=1,a+s<u&&l.push(a,u),u+s<i&&l.push(u,i))}for(let i=0;i<o;++i)h[i]&&(a[r++]=t[e+i*s],a[r++]=t[e+i*s+1]);return r}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Rs(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ps(this.flatCoordinates,0,t,this.stride),this.changed()}}const Gs=Rs;class qs extends xs{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new qs(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,s){const n=this.flatCoordinates,a=ks(t,e,n[0],n[1]);if(a<s){const t=this.stride;for(let e=0;e<t;++e)i[e]=n[e];return i.length=t,a}return s}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return function(t,e){const i=t[0],s=t[1];return ds(i,s,i,s,e)}(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return function(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,i,s){for(let s=0,n=i.length;s<n;++s)t[e++]=i[s];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}const Fs=qs;function zs(t,e,i,s,n){const a=function(t,e){let i;return i=e(function(t){return[t[0],t[1]]}(t)),i||(i=e(function(t){return[t[2],t[1]]}(t)),i||(i=e(function(t){return[t[2],t[3]]}(t)),i||(i=e(function(t){return[t[0],t[3]]}(t)),i||!1)))}(n,(function(n){return!Ds(t,e,i,s,n[0],n[1])}));return!a}function Ds(t,e,i,s,n,a){let r=0,o=t[i-s],h=t[i-s+1];for(;e<i;e+=s){const i=t[e],s=t[e+1];h<=a?s>a&&(i-o)*(a-h)-(n-o)*(s-h)>0&&r++:s<=a&&(i-o)*(a-h)-(n-o)*(s-h)<0&&r--,o=i,h=s}return 0!==r}function Bs(t,e,i,s,n,a){if(0===i.length)return!1;if(!Ds(t,e,i[0],s,n,a))return!1;for(let e=1,r=i.length;e<r;++e)if(Ds(t,i[e-1],i[e],s,n,a))return!1;return!0}function Us(t,e,i,s,n){const a=ys([1/0,1/0,-1/0,-1/0],t,e,i,s);return!!function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}(n,a)&&(o=a,(r=n)[0]<=o[0]&&o[2]<=r[2]&&r[1]<=o[1]&&o[3]<=r[3]||a[0]>=n[0]&&a[2]<=n[2]||a[1]>=n[1]&&a[3]<=n[3]||function(t,e,i,s,a){let r;for(e+=s;e<i;e+=s)if(o=t.slice(e-s,e),h=t.slice(e,e+s),r=function(t,e,i){let s=!1;const n=fs(t,e),a=fs(t,i);if(n===us.INTERSECTING||a===us.INTERSECTING)s=!0;else{const r=t[0],o=t[1],h=t[2],l=t[3],u=e[0],c=e[1],f=i[0],d=i[1],p=(d-c)/(f-u);let y,m;a&us.ABOVE&&!(n&us.ABOVE)&&(y=f-(d-l)/p,s=y>=r&&y<=h),s||!(a&us.RIGHT)||n&us.RIGHT||(m=d-(f-h)*p,s=m>=o&&m<=l),s||!(a&us.BELOW)||n&us.BELOW||(y=f-(d-o)/p,s=y>=r&&y<=h),s||!(a&us.LEFT)||n&us.LEFT||(m=d-(f-r)*p,s=m>=o&&m<=l)}return s}(n,o,h),r)return r;var o,h;return!1}(t,e,i,s));var r,o}function Ws(t,e,i,s){for(;e<i-s;){for(let n=0;n<s;++n){const a=t[e+n];t[e+n]=t[i-s+n],t[i-s+n]=a}e+=s,i-=s}}function Ks(t,e,i,s){let n=0,a=t[i-s],r=t[i-s+1];for(;e<i;e+=s){const i=t[e],s=t[e+1];n+=(i-a)*(s+r),a=i,r=s}return 0===n?void 0:n>0}function Hs(t,e,i,s,n){n=void 0!==n&&n;for(let a=0,r=i.length;a<r;++a){const r=i[a],o=Ks(t,e,r,s);(0===a?n&&o||!n&&!o:n&&!o||!n&&o)&&Ws(t,e,r,s),e=r}return e}function Xs(t,e,i,s){s=s||6371008.8;const n=Os(t[1]),a=Os(t[0]),r=e/s,o=Math.asin(Math.sin(n)*Math.cos(r)+Math.cos(n)*Math.sin(r)*Math.cos(i));return[Es(a+Math.atan2(Math.sin(i)*Math.sin(r)*Math.cos(n),Math.cos(r)-Math.sin(n)*Math.sin(o))),Es(o)]}class Ys extends xs{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Ji(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Ys(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,s){return s<cs(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,s,n){for(let a=0,r=i.length;a<r;++a){const r=i[a];n=js(t,e,r,s,n),e=r}return n}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,s,n,a,r,o,h,l,u){u=u||[NaN,NaN];for(let c=0,f=i.length;c<f;++c){const f=i[c];l=Is(t,e,f,s,n,a,r,o,h,l,u),e=f}return l}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,s))}containsXY(t,e){return Bs(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return function(t,e,i,s){let n=0;for(let a=0,r=i.length;a<r;++a){const r=i[a];n+=Ls(t,e,r,s),e=r}return n}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Hs(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,function(t,e,i,s,n){n=void 0!==n?n:[];let a=0;for(let r=0,o=i.length;r<o;++r){const o=i[r];n[a++]=Ts(t,e,o,s,n[a]),e=o}return n.length=a,n}(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=gs(this.getExtent());this.flatInteriorPoint_=function(t,e,i,s,n,a,r){let o,h,l,u,c,f,d;const p=n[a+1],y=[];for(let n=0,a=i.length;n<a;++n){const a=i[n];for(u=t[a-s],f=t[a-s+1],o=e;o<a;o+=s)c=t[o],d=t[o+1],(p<=f&&d<=p||f<=p&&p<=d)&&(l=(p-f)/(d-f)*(c-u)+u,y.push(l)),u=c,f=d}let m=NaN,g=-1/0;for(y.sort(Vi),u=y[0],o=1,h=y.length;o<h;++o){c=y[o];const n=Math.abs(c-u);n>g&&(l=(u+c)/2,Bs(t,e,i,s,l,p)&&(m=l,g=n)),u=c}return isNaN(m)&&(m=n[a]),r?(r.push(m,p,g),r):[m,p,g]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Fs(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Gs(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,s=[];let n=0;for(let a=0,r=i.length;a<r;++a){const r=i[a],o=new Gs(e.slice(n,r),t);s.push(o),n=r}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,i,s,n){n=void 0!==n&&n;for(let a=0,r=i.length;a<r;++a){const r=i[a],o=Ks(t,e,r,s);if(0===a){if(n&&o||!n&&!o)return!1}else if(n&&!o||!n&&o)return!1;e=r}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Hs(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(t,e,i,s,n,a,r,o){for(let h=0,l=i.length;h<l;++h){const l=i[h];r=As(t,e,l,s,n,a,r),o.push(r),e=l}return r}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Ys(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return function(t,e,i,s,n){if(!function(t,e,i,s,n){return!!(Us(t,e,i,s,n)||Ds(t,e,i,s,n[0],n[1])||Ds(t,e,i,s,n[0],n[3])||Ds(t,e,i,s,n[2],n[1])||Ds(t,e,i,s,n[2],n[3]))}(t,e,i[0],s,n))return!1;if(1===i.length)return!0;for(let e=1,a=i.length;e<a;++e)if(zs(t,i[e-1],i[e],s,n)&&!Us(t,i[e-1],i[e],s,n))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=function(t,e,i,s,n){n=n||[];let a=0;for(let r=0,o=i.length;r<o;++r){const o=Ps(t,e,i[r],s);n[a++]=o,e=o}return n.length=a,n}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const Qs="accuracy",Vs="accuracyGeometry",Js="altitude",Zs="altitudeAccuracy",$s="heading",tn="position",en="projection",sn="speed",nn="tracking",an="trackingOptions";class rn extends Yi{constructor(t){super("error"),this.code=t.code,this.message=t.message}}const on=class extends ls{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=Fi,this.watchId_=void 0,this.addChangeListener(en,this.handleProjectionChanged_),this.addChangeListener(nn,this.handleTrackingChanged_),void 0!==t.projection&&this.setProjection(t.projection),void 0!==t.trackingOptions&&this.setTrackingOptions(t.trackingOptions),this.setTracking(void 0!==t.tracking&&t.tracking)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const t=this.getProjection();t&&(this.transform_=Ui(Di("EPSG:4326"),t),this.position_&&this.set(tn,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){const e=t.coords;this.set(Qs,e.accuracy),this.set(Js,null===e.altitude?void 0:e.altitude),this.set(Zs,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set($s,null===e.heading?void 0:Os(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const i=this.transform_(this.position_);this.set(tn,i.slice()),this.set(sn,null===e.speed?void 0:e.speed);const s=function(t,e,i,s){i=i||32;const n=[];for(let s=0;s<i;++s)Ji(n,Xs(t,e,2*Math.PI*s/i,undefined));return n.push(n[0],n[1]),new Ys(n,"XY",[n.length])}(this.position_,e.accuracy);s.applyTransform(this.transform_),this.set(Vs,s),this.changed()}positionError_(t){this.dispatchEvent(new rn(t))}getAccuracy(){return this.get(Qs)}getAccuracyGeometry(){return this.get(Vs)||null}getAltitude(){return this.get(Js)}getAltitudeAccuracy(){return this.get(Zs)}getHeading(){return this.get($s)}getPosition(){return this.get(tn)}getProjection(){return this.get(en)}getSpeed(){return this.get(sn)}getTracking(){return this.get(nn)}getTrackingOptions(){return this.get(an)}setProjection(t){this.set(en,Di(t))}setTracking(t){this.set(nn,t)}setTrackingOptions(t){this.set(an,t)}};var hn,ln,un,cn,fn,dn,pn,yn,mn,gn,vn,Mn,bn,_n,xn,wn,kn,En,On,Sn,Cn,jn,In,Pn;(_n=hn||(hn={})).FI="fi",_n.SV="sv",function(t){t.Maanmittauslaitos="Maanmittauslaitos",t.GTK="GTK",t.Museovirasto="Museovirasto",t.Ahvenanmaa="Ahvenanmaa",t.Helsinki="Helsinki",t.Models="Models",t.MaisemanMuisti="MaisemanMuisti"}(ln||(ln={})),(bn=un||(un={})).Maastokartta="maastokartta",bn.Taustakartta="taustakartta",bn.Ortokuva="ortokuva",(Mn=cn||(cn={})).Muinaisjaannokset_piste="Muinaisjaannokset_piste",Mn.Muinaisjaannokset_alue="Muinaisjaannokset_alue",Mn.Suojellut_rakennukset_piste="Suojellut_rakennukset_piste",Mn.Suojellut_rakennukset_alue="Suojellut_rakennukset_alue",Mn.RKY_alue="RKY_alue",Mn.RKY_piste="RKY_piste",Mn.RKY_viiva="RKY_viiva",Mn.Maailmanperinto_piste="Maailmanperinto_piste",Mn.Maailmanperinto_alue="Maailmanperinto_alue",(vn=fn||(fn={})).Fornminnen="Fornminnen",vn.MaritimtKulturarv="Maritimt kulturarv; Vrak",(dn||(dn={})).ModelLayer="ModelLayer",(pn||(pn={})).MaisemanMuisti="MaisemanMuisti",(yn||(yn={})).muinaisrannat="muinaisrannat",(gn=mn||(mn={})).Maalinnoitus_yksikot="Maalinnoitus_yksikot",gn.Maalinnoitus_kohteet="Maalinnoitus_kohteet",gn.Maalinnoitus_rajaukset="Maalinnoitus_rajaukset",gn.Maalinnoitus_karttatekstit="Maalinnoitus_karttatekstit",cn.Muinaisjaannokset_piste,cn.Muinaisjaannokset_alue,cn.Suojellut_rakennukset_piste,cn.Suojellut_rakennukset_alue,cn.RKY_alue,cn.RKY_piste,cn.RKY_viiva,cn.Maailmanperinto_piste,cn.Maailmanperinto_alue,(Pn=xn||(xn={}))["eiMääritelty"]="ei määritelty",Pn.alustenHylyt="alusten hylyt",Pn.asuinpaikat="asuinpaikat",Pn.hautapaikat="hautapaikat",Pn.kirkkorakenteet="kirkkorakenteet",Pn.kivirakenteet="kivirakenteet",Pn["kulkuväylät"]="kulkuväylät",Pn.kulttiJaTarinapaikat="kultti- ja tarinapaikat",Pn.luonnonmuodostumat="luonnonmuodostumat",Pn["löytöpaikat"]="löytöpaikat",Pn.maarakenteet="maarakenteet",Pn["muinaisjäännösryhmät"]="muinaisjäännösryhmät",Pn.puolustusvarustukset="puolustusvarustukset",Pn.puurakenteet="puurakenteet",Pn.raakaAineenHankintapaikat="raaka-aineen hankintapaikat",Pn.tapahtumapaikat="tapahtumapaikat",Pn.teollisuuskohteet="teollisuuskohteet",Pn.taideMuistomerkit="taide, muistomerkit",Pn["työJaValmistuspaikat"]="työ- ja valmistuspaikat",(In=wn||(wn={})).moniperiodinen="moniperiodinen",In.esihistoriallinen="esihistoriallinen",In.kivikautinen="kivikautinen",In.varhaismetallikautinen="varhaismetallikautinen",In.pronssikautinen="pronssikautinen",In.rautakautinen="rautakautinen",In.rautakautinenJaTaiKeskiaikainen="rautakautinen ja/tai keskiaikainen",In.keskiaikainen="keskiaikainen",In.historiallinen="historiallinen",In.moderni="moderni",In.ajoittamaton="ajoittamaton",In["eiMääritelty"]="ei määritelty",function(t){t.Asema="asema",t.Tykkipatteri="tykkipatteri",t.Tykkitie="tykkitie",t.Muu="muu"}(kn||(kn={})),function(t){t["Tulipesäke"]="tulipesäke",t.Suojahuone="suojahuone",t.Kuoppa="kuoppa",t.Tykkiasema="tykkiasema",t.Rakenne="rakenne",t.Juoksuhauta="hauta",t.Luola="luola",t.Jalusta="jalusta",t.Suojavalli="suojavalli"}(En||(En={})),(jn=On||(On={})).Asema="asema (hauta,suojahuone, tulipesäke)",jn.Luola="luola",jn.Tykkitie="tykkitie",jn.Tykkipatteri="tykkipatteri",(Cn=Sn||(Sn={})).Tukikohta="tukikohta",Cn.Puolustusasema="laji";const Nn="FETCH_DATA_LATESTS_UPDATE_DATES_COMPLETE",An="SEARCH_FEATURES",Tn="SEARCH_FEATURES_COMPLETE",Ln="SELECT_VISIBLE_MAANMITTAUSLAITOS_LAYER",Rn="SELECT_VISIBLE_GTK_LAYERS",Gn="CHANGE_LAYER_OPACITY",qn="SELECT_VISIBLE_MUSEOVIRASTO_LAYERS",Fn="SELECT_VISIBLE_AHVENANMAA_LAYERS",zn="SELECT_VISIBLE_MODELS_LAYERS",Dn="SELECT_VISIBLE_HELSINKI_LAYERS",Bn="SELECT_VISIBLE_MAISEMAN_MUISTI_LAYERS",Un="SELECT_VISIBLE_MUINAISJÄÄNNÖS_TYPE",Wn="SELECT_VISIBLE_MUINAISJÄÄNNÖS_DATING",Kn="CHANGE_LANGUAGE",Hn="SHOW_LOADING_ANIMATION";let Xn,Yn,Qn,Vn,Jn,Zn,$n,ta;const ea=t=>{undefined.dispatch((t=>({type:Hn,show:t}))(t))},ia=()=>{const t=null==Yn?void 0:Yn.getPosition();t&&undefined.addCurrentPositionMarker(t)},sa=t=>{const e=Xn.getZoom();e&&Xn.animate({zoom:e+t,duration:250})},na=t=>{switch(t){case ln.GTK:$n.selectedGTKLayersChanged();break;case ln.Museovirasto:Qn.selectedFeatureLayersChanged();break;case ln.Ahvenanmaa:Vn.selectedFeatureLayersChanged();break;case ln.Helsinki:ta.selectedFeatureLayersChanged();break;case ln.Models:Jn.selectedFeatureLayersChanged();break;case ln.MaisemanMuisti:Zn.selectedFeatureLayersChanged()}},aa=()=>{if(Yn&&Yn.getPosition()){const t=Yn.getPosition();Xn.setCenter(t)}else Yn=new on({projection:Xn.getProjection(),tracking:!0,trackingOptions:{enableHighAccuracy:!0}}),Yn.once("change:position",aa),Yn.on("change:position",ia)};var ra=i(563);const oa=()=>{const t=window.location.hash.replace(";","&");return(0,ra.parse)(t,{parseNumbers:!0,arrayFormat:"comma"})};var ha;!function(t){t.Search="searchPage",t.Info="infoPage",t.Settings="settingsPage",t.Details="detailsPage"}(ha||(ha={}));const la=(t,e)=>Object.assign(Object.assign({},t),{language:e}),ua=(t,e)=>Object.assign(Object.assign({},t),{maanmittauslaitos:Object.assign(Object.assign({},t.maanmittauslaitos),{selectedLayer:e})}),ca=(t,e)=>Object.assign(Object.assign({},t),{gtk:Object.assign(Object.assign({},t.gtk),{selectedLayers:e})}),fa=(t,e)=>Object.assign(Object.assign({},t),{gtk:Object.assign(Object.assign({},t.gtk),{opacity:e})}),da=(t,e)=>Object.assign(Object.assign({},t),{helsinki:Object.assign(Object.assign({},t.helsinki),{selectedLayers:e})}),pa=(t,e)=>Object.assign(Object.assign({},t),{helsinki:Object.assign(Object.assign({},t.helsinki),{opacity:e})}),ya=(t,e)=>Object.assign(Object.assign({},t),{museovirasto:Object.assign(Object.assign({},t.museovirasto),{selectedLayers:e})}),ma=(t,e)=>Object.assign(Object.assign({},t),{museovirasto:Object.assign(Object.assign({},t.museovirasto),{opacity:e})}),ga=(t,e)=>Object.assign(Object.assign({},t),{ahvenanmaa:Object.assign(Object.assign({},t.ahvenanmaa),{selectedLayers:e})}),va=(t,e)=>Object.assign(Object.assign({},t),{ahvenanmaa:Object.assign(Object.assign({},t.ahvenanmaa),{opacity:e})}),Ma=(t,e)=>Object.assign(Object.assign({},t),{models:Object.assign(Object.assign({},t.models),{selectedLayers:e})}),ba=(t,e)=>Object.assign(Object.assign({},t),{maisemanMuisti:Object.assign(Object.assign({},t.maisemanMuisti),{selectedLayers:e})}),_a=(t,e)=>Object.assign(Object.assign({},t),{museovirasto:Object.assign(Object.assign({},t.museovirasto),{selectedMuinaisjaannosTypes:e})}),xa=(t,e)=>Object.assign(Object.assign({},t),{museovirasto:Object.assign(Object.assign({},t.museovirasto),{selectedMuinaisjaannosDatings:e})}),wa="none",ka=(t,e)=>Object.values(t).some((t=>t===e)),Ea=(t,e,i,s)=>i===wa?s(t,[]):ka(e,i)?s(t,[i]):Array.isArray(i)&&((t,e)=>e.every((e=>ka(t,e))))(e,i)?s(t,i):t,Oa=(t,e,i,s)=>0===e.length&&0===i.length||e.length>0&&e.every((t=>i.includes(t)))?Object.assign(Object.assign({},t),{old:Object.assign(Object.assign({},t.old),{[s]:void 0})}):Object.assign(Object.assign({},t),{next:Object.assign(Object.assign({},t.next),{[s]:i.length>0?i:[wa]})}),Sa=(t,e,i,s)=>e===i?Object.assign(Object.assign({},t),{old:Object.assign(Object.assign({},t.old),{[s]:void 0})}):Object.assign(Object.assign({},t),{next:Object.assign(Object.assign({},t.next),{[s]:i})});function Ca(t){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ca(t)}function ja(t){var e=function(t,e){if("object"!==Ca(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!==Ca(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ca(e)?e:String(e)}function Ia(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Pa(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Ia(Object(i),!0).forEach((function(e){var s,n,a;s=t,n=e,a=i[e],(n=ja(n))in s?Object.defineProperty(s,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[n]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ia(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Na(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Aa="function"==typeof Symbol&&Symbol.observable||"@@observable",Ta=function(){return Math.random().toString(36).substring(7).split("").join(".")},La={INIT:"@@redux/INIT"+Ta(),REPLACE:"@@redux/REPLACE"+Ta(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ta()}};function Ra(t,e,i){var s;if("function"==typeof e&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(Na(0));if("function"==typeof e&&void 0===i&&(i=e,e=void 0),void 0!==i){if("function"!=typeof i)throw new Error(Na(1));return i(Ra)(t,e)}if("function"!=typeof t)throw new Error(Na(2));var n=t,a=e,r=[],o=r,h=!1;function l(){o===r&&(o=r.slice())}function u(){if(h)throw new Error(Na(3));return a}function c(t){if("function"!=typeof t)throw new Error(Na(4));if(h)throw new Error(Na(5));var e=!0;return l(),o.push(t),function(){if(e){if(h)throw new Error(Na(6));e=!1,l();var i=o.indexOf(t);o.splice(i,1),r=null}}}function f(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error(Na(7));if(void 0===t.type)throw new Error(Na(8));if(h)throw new Error(Na(9));try{h=!0,a=n(a,t)}finally{h=!1}for(var e=r=o,i=0;i<e.length;i++)(0,e[i])();return t}return f({type:La.INIT}),(s={dispatch:f,subscribe:c,getState:u,replaceReducer:function(t){if("function"!=typeof t)throw new Error(Na(10));n=t,f({type:La.REPLACE})}})[Aa]=function(){var t,e=c;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(Na(11));function i(){t.next&&t.next(u())}return i(),{unsubscribe:e(i)}}})[Aa]=function(){return this},t},s}function Ga(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function qa(t){return"function"==typeof t}function Fa(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var za=Fa((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function Da(t,e){if(t){var i=t.indexOf(e);0<=i&&t.splice(i,1)}}var Ba=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,i,s,n;if(!this.closed){this.closed=!0;var h=this._parentage;if(h)if(this._parentage=null,Array.isArray(h))try{for(var l=a(h),u=l.next();!u.done;u=l.next())u.value.remove(this)}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=l.return)&&e.call(l)}finally{if(t)throw t.error}}else h.remove(this);var c=this.initialTeardown;if(qa(c))try{c()}catch(t){n=t instanceof za?t.errors:[t]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=a(f),p=d.next();!p.done;p=d.next()){var y=p.value;try{Ka(y)}catch(t){n=null!=n?n:[],t instanceof za?n=o(o([],r(n)),r(t.errors)):n.push(t)}}}catch(t){i={error:t}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}if(n)throw new za(n)}},t.prototype.add=function(e){var i;if(e&&e!==this)if(this.closed)Ka(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Da(e,t)},t.prototype.remove=function(e){var i=this._finalizers;i&&Da(i,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t;var e}(),Ua=Ba.EMPTY;function Wa(t){return t instanceof Ba||t&&"closed"in t&&qa(t.remove)&&qa(t.add)&&qa(t.unsubscribe)}function Ka(t){qa(t)?t():t.unsubscribe()}var Ha=function(t){function i(e,i){return t.call(this)||this}return e(i,t),i.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},i}(Ba),Xa={setInterval:function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var n=Xa.delegate;return(null==n?void 0:n.setInterval)?n.setInterval.apply(n,o([t,e],r(i))):setInterval.apply(void 0,o([t,e],r(i)))},clearInterval:function(t){var e=Xa.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},Ya=function(t){function i(e,i){var s=t.call(this,e,i)||this;return s.scheduler=e,s.work=i,s}return e(i,t),i.prototype.schedule=function(e,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,e,i):(this.delay=i,this.state=e,this.scheduler.flush(this),this)},i.prototype.execute=function(e,i){return i>0||this.closed?t.prototype.execute.call(this,e,i):this._execute(e,i)},i.prototype.requestAsyncId=function(e,i,s){return void 0===s&&(s=0),null!=s&&s>0||null==s&&this.delay>0?t.prototype.requestAsyncId.call(this,e,i,s):(e.flush(this),0)},i}(function(t){function i(e,i){var s=t.call(this,e,i)||this;return s.scheduler=e,s.work=i,s.pending=!1,s}return e(i,t),i.prototype.schedule=function(t,e){var i;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var s=this.id,n=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(n,s,e)),this.pending=!0,this.delay=e,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(n,this.id,e),this},i.prototype.requestAsyncId=function(t,e,i){return void 0===i&&(i=0),Xa.setInterval(t.flush.bind(t,this),i)},i.prototype.recycleAsyncId=function(t,e,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return e;null!=e&&Xa.clearInterval(e)},i.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(t,e){var i,s=!1;try{this.work(t)}catch(t){s=!0,i=t||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i},i.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,i=this.scheduler,s=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Da(s,this),null!=e&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},i}(Ha)),Qa={now:function(){return(Qa.delegate||Date).now()},delegate:void 0},Va=function(){function t(e,i){void 0===i&&(i=t.now),this.schedulerActionCtor=e,this.now=i}return t.prototype.schedule=function(t,e,i){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(i,e)},t.now=Qa.now,t}(),Ja=new(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i}(function(t){function i(e,i){void 0===i&&(i=Va.now);var s=t.call(this,e,i)||this;return s.actions=[],s._active=!1,s}return e(i,t),i.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}},i}(Va)))(Ya),Za={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},$a={setTimeout:function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var n=$a.delegate;return(null==n?void 0:n.setTimeout)?n.setTimeout.apply(n,o([t,e],r(i))):setTimeout.apply(void 0,o([t,e],r(i)))},clearTimeout:function(t){var e=$a.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function tr(t){$a.setTimeout((function(){var e=Za.onUnhandledError;if(!e)throw t;e(t)}))}function er(){}var ir=sr("C",void 0,void 0);function sr(t,e,i){return{kind:t,value:e,error:i}}var nr=null;function ar(t){if(Za.useDeprecatedSynchronousErrorHandling){var e=!nr;if(e&&(nr={errorThrown:!1,error:null}),t(),e){var i=nr,s=i.errorThrown,n=i.error;if(nr=null,s)throw n}}else t()}var rr=function(t){function i(e){var i=t.call(this)||this;return i.isStopped=!1,e?(i.destination=e,Wa(e)&&e.add(i)):i.destination=dr,i}return e(i,t),i.create=function(t,e,i){return new ur(t,e,i)},i.prototype.next=function(t){this.isStopped?fr(function(t){return sr("N",t,void 0)}(t),this):this._next(t)},i.prototype.error=function(t){this.isStopped?fr(sr("E",void 0,t),this):(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped?fr(ir,this):(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},i.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(Ba),or=Function.prototype.bind;function hr(t,e){return or.call(t,e)}var lr=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){cr(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){cr(t)}else cr(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){cr(t)}},t}(),ur=function(t){function i(e,i,s){var n,a,r=t.call(this)||this;return qa(e)||!e?n={next:null!=e?e:void 0,error:null!=i?i:void 0,complete:null!=s?s:void 0}:r&&Za.useDeprecatedNextContext?((a=Object.create(e)).unsubscribe=function(){return r.unsubscribe()},n={next:e.next&&hr(e.next,a),error:e.error&&hr(e.error,a),complete:e.complete&&hr(e.complete,a)}):n=e,r.destination=new lr(n),r}return e(i,t),i}(rr);function cr(t){var e;Za.useDeprecatedSynchronousErrorHandling?(e=t,Za.useDeprecatedSynchronousErrorHandling&&nr&&(nr.errorThrown=!0,nr.error=e)):tr(t)}function fr(t,e){var i=Za.onStoppedNotification;i&&$a.setTimeout((function(){return i(t,e)}))}var dr={closed:!0,next:er,error:function(t){throw t},complete:er},pr="function"==typeof Symbol&&Symbol.observable||"@@observable";function yr(t){return t}var mr=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var i=new t;return i.source=this,i.operator=e,i},t.prototype.subscribe=function(t,e,i){var s,n=this,a=(s=t)&&s instanceof rr||function(t){return t&&qa(t.next)&&qa(t.error)&&qa(t.complete)}(s)&&Wa(s)?t:new ur(t,e,i);return ar((function(){var t=n,e=t.operator,i=t.source;a.add(e?e.call(a,i):i?n._subscribe(a):n._trySubscribe(a))})),a},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var i=this;return new(e=gr(e))((function(e,s){var n=new ur({next:function(e){try{t(e)}catch(t){s(t),n.unsubscribe()}},error:s,complete:e});i.subscribe(n)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[pr]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0===(i=t).length?yr:1===i.length?i[0]:function(t){return i.reduce((function(t,e){return e(t)}),t)})(this);var i},t.prototype.toPromise=function(t){var e=this;return new(t=gr(t))((function(t,i){var s;e.subscribe((function(t){return s=t}),(function(t){return i(t)}),(function(){return t(s)}))}))},t.create=function(e){return new t(e)},t}();function gr(t){var e;return null!==(e=null!=t?t:Za.Promise)&&void 0!==e?e:Promise}var vr=Fa((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),Mr=function(t){function i(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return e(i,t),i.prototype.lift=function(t){var e=new br(this,this);return e.operator=t,e},i.prototype._throwIfClosed=function(){if(this.closed)throw new vr},i.prototype.next=function(t){var e=this;ar((function(){var i,s;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var n=a(e.currentObservers),r=n.next();!r.done;r=n.next())r.value.next(t)}catch(t){i={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}}}))},i.prototype.error=function(t){var e=this;ar((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var i=e.observers;i.length;)i.shift().error(t)}}))},i.prototype.complete=function(){var t=this;ar((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),i.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},i.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},i.prototype._innerSubscribe=function(t){var e=this,i=this,s=i.hasError,n=i.isStopped,a=i.observers;return s||n?Ua:(this.currentObservers=null,a.push(t),new Ba((function(){e.currentObservers=null,Da(a,t)})))},i.prototype._checkFinalizedStatuses=function(t){var e=this,i=e.hasError,s=e.thrownError,n=e.isStopped;i?t.error(s):n&&t.complete()},i.prototype.asObservable=function(){var t=new mr;return t.source=this,t},i.create=function(t,e){return new br(t,e)},i}(mr),br=function(t){function i(e,i){var s=t.call(this)||this;return s.destination=e,s.source=i,s}return e(i,t),i.prototype.next=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===i||i.call(e,t)},i.prototype.error=function(t){var e,i;null===(i=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===i||i.call(e,t)},i.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},i.prototype._subscribe=function(t){var e,i;return null!==(i=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==i?i:Ua},i}(Mr),_r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function xr(t){return qa(null==t?void 0:t.then)}function wr(t){return qa(t[pr])}function kr(t){return Symbol.asyncIterator&&qa(null==t?void 0:t[Symbol.asyncIterator])}function Er(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Or="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Sr(t){return qa(null==t?void 0:t[Or])}function Cr(t){return function(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=i.apply(t,e||[]),a=[];return s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(t){n[t]&&(s[t]=function(e){return new Promise((function(i,s){a.push([t,e,i,s])>1||o(t,e)}))})}function o(t,e){try{(i=n[t](e)).value instanceof h?Promise.resolve(i.value.v).then(l,u):c(a[0][2],i)}catch(t){c(a[0][3],t)}var i}function l(t){o("next",t)}function u(t){o("throw",t)}function c(t,e){t(e),a.shift(),a.length&&o(a[0][0],a[0][1])}}(this,arguments,(function(){var e,i,s;return n(this,(function(n){switch(n.label){case 0:e=t.getReader(),n.label=1;case 1:n.trys.push([1,,9,10]),n.label=2;case 2:return[4,h(e.read())];case 3:return i=n.sent(),s=i.value,i.done?[4,h(void 0)]:[3,5];case 4:return[2,n.sent()];case 5:return[4,h(s)];case 6:return[4,n.sent()];case 7:return n.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function jr(t){return qa(null==t?void 0:t.getReader)}function Ir(t){if(t instanceof mr)return t;if(null!=t){if(wr(t))return n=t,new mr((function(t){var e=n[pr]();if(qa(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(_r(t))return s=t,new mr((function(t){for(var e=0;e<s.length&&!t.closed;e++)t.next(s[e]);t.complete()}));if(xr(t))return i=t,new mr((function(t){i.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,tr)}));if(kr(t))return Pr(t);if(Sr(t))return e=t,new mr((function(t){var i,s;try{for(var n=a(e),r=n.next();!r.done;r=n.next()){var o=r.value;if(t.next(o),t.closed)return}}catch(t){i={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}t.complete()}));if(jr(t))return Pr(Cr(t))}var e,i,s,n;throw Er(t)}function Pr(t){return new mr((function(e){(function(t,e){var i,r,o,h;return s(this,void 0,void 0,(function(){var s,l;return n(this,(function(n){switch(n.label){case 0:n.trys.push([0,5,6,11]),i=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,i=t[Symbol.asyncIterator];return i?i.call(t):(t=a(t),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(i){e[i]=t[i]&&function(e){return new Promise((function(s,n){!function(t,e,i,s){Promise.resolve(s).then((function(e){t({value:e,done:i})}),e)}(s,n,(e=t[i](e)).done,e.value)}))}}}(t),n.label=1;case 1:return[4,i.next()];case 2:if((r=n.sent()).done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];n.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=n.sent(),o={error:l},[3,11];case 6:return n.trys.push([6,,9,10]),r&&!r.done&&(h=i.return)?[4,h.call(i)]:[3,8];case 7:n.sent(),n.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}function Nr(t,e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=!1);var a=e.schedule((function(){i(),n?t.add(this.schedule(null,s)):this.unsubscribe()}),s);if(t.add(a),!n)return a}function Ar(t){return function(e){if(function(t){return qa(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Tr(t,e,i,s,n){return new Lr(t,e,i,s,n)}var Lr=function(t){function i(e,i,s,n,a,r){var o=t.call(this,e)||this;return o.onFinalize=a,o.shouldUnsubscribe=r,o._next=i?function(t){try{i(t)}catch(t){e.error(t)}}:t.prototype._next,o._error=n?function(t){try{n(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,o._complete=s?function(){try{s()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,o}return e(i,t),i.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},i}(rr);function Rr(t,e){return void 0===e&&(e=0),Ar((function(i,s){i.subscribe(Tr(s,(function(i){return Nr(s,t,(function(){return s.next(i)}),e)}),(function(){return Nr(s,t,(function(){return s.complete()}),e)}),(function(i){return Nr(s,t,(function(){return s.error(i)}),e)})))}))}function Gr(t,e){return void 0===e&&(e=0),Ar((function(i,s){s.add(t.schedule((function(){return i.subscribe(s)}),e))}))}function qr(t,e){if(!t)throw new Error("Iterable cannot be null");return new mr((function(i){Nr(i,e,(function(){var s=t[Symbol.asyncIterator]();Nr(i,e,(function(){s.next().then((function(t){t.done?i.complete():i.next(t.value)}))}),0,!0)}))}))}function Fr(t,e){return e?function(t,e){if(null!=t){if(wr(t))return function(t,e){return Ir(t).pipe(Gr(e),Rr(e))}(t,e);if(_r(t))return function(t,e){return new mr((function(i){var s=0;return e.schedule((function(){s===t.length?i.complete():(i.next(t[s++]),i.closed||this.schedule())}))}))}(t,e);if(xr(t))return function(t,e){return Ir(t).pipe(Gr(e),Rr(e))}(t,e);if(kr(t))return qr(t,e);if(Sr(t))return function(t,e){return new mr((function(i){var s;return Nr(i,e,(function(){s=t[Or](),Nr(i,e,(function(){var t,e,n;try{e=(t=s.next()).value,n=t.done}catch(t){return void i.error(t)}n?i.complete():i.next(e)}),0,!0)})),function(){return qa(null==s?void 0:s.return)&&s.return()}}))}(t,e);if(jr(t))return function(t,e){return qr(Cr(t),e)}(t,e)}throw Er(t)}(t,e):Ir(t)}function zr(t,e){return Ar((function(i,s){var n=0;i.subscribe(Tr(s,(function(i){s.next(t.call(e,i,n++))})))}))}function Dr(t,e,i){return void 0===i&&(i=1/0),qa(e)?Dr((function(i,s){return zr((function(t,n){return e(i,t,s,n)}))(Ir(t(i,s)))}),i):("number"==typeof e&&(i=e),Ar((function(e,s){return function(t,e,i,s,n,a,r,o){var h=[],l=0,u=0,c=!1,f=function(){!c||h.length||l||e.complete()},d=function(t){return l<s?p(t):h.push(t)},p=function(t){l++;var n=!1;Ir(i(t,u++)).subscribe(Tr(e,(function(t){e.next(t)}),(function(){n=!0}),void 0,(function(){if(n)try{l--;for(;h.length&&l<s;)t=void 0,t=h.shift(),p(t);f()}catch(t){e.error(t)}var t})))};return t.subscribe(Tr(e,d,(function(){c=!0,f()}))),function(){}}(e,s,t,i)})))}var Br=function(t,e){return Br=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},Br(t,e)};Object.create,Object.create;var Ur=function(t){function e(e,i){var s=t.call(this,(function(t){var e=s.__notifier.subscribe(t);return e&&!e.closed&&t.next(s.value),e}))||this;return s.__notifier=new Mr,s.value=i,e.subscribe((function(t){t!==s.value&&(s.value=t,s.__notifier.next(t))})),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}Br(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(mr);var Wr=new mr((function(t){return t.complete()}));function Kr(t){return t[t.length-1]}function Hr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=function(t){return(e=Kr(t))&&qa(e.schedule)?t.pop():void 0;var e}(t),s=function(t,e){return"number"==typeof Kr(t)?t.pop():1/0}(t),n=t;return n.length?1===n.length?Ir(n[0]):function(t){return void 0===t&&(t=1/0),Dr(yr,t)}(s)(Fr(n,i)):Wr}function Xr(t,e){return Ar((function(i,s){var n=0;i.subscribe(Tr(s,(function(i){return t.call(e,i,n++)&&s.next(i)})))}))}var Yr=function(t,e){return t===e||"function"==typeof e&&t===e.toString()};function Qr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.length;return Xr(1===i?function(e){return Yr(e.type,t[0])}:function(e){for(var s=0;s<i;s++)if(Yr(e.type,t[s]))return!0;return!1})}function Vr(t,e,i){var s=qa(t)||e||i?{next:t,error:e,complete:i}:t;return s?Ar((function(t,e){var i;null===(i=s.subscribe)||void 0===i||i.call(s);var n=!0;t.subscribe(Tr(e,(function(t){var i;null===(i=s.next)||void 0===i||i.call(s,t),e.next(t)}),(function(){var t;n=!1,null===(t=s.complete)||void 0===t||t.call(s),e.complete()}),(function(t){var i;n=!1,null===(i=s.error)||void 0===i||i.call(s,t),e.error(t)}),(function(){var t,e;n&&(null===(t=s.unsubscribe)||void 0===t||t.call(s)),null===(e=s.finalize)||void 0===e||e.call(s)})))})):yr}function Jr(){return Ar((function(t,e){t.subscribe(Tr(e,er))}))}const Zr={showLoadingAnimation:!1,visiblePage:void 0,selectedFeaturesOnMap:{features:[],models:[],maisemanMuistiFeatures:[],maalinnoitusFeatures:[]},search:{searchResults:void 0},dataLatestUpdateDates:void 0,initialMapZoom:8,language:(()=>{var t;const e=null===(t=navigator.language)||void 0===t?void 0:t.substr(0,2);return Object.values(hn).some((t=>t===e))?e:hn.FI})(),maanmittauslaitos:{selectedLayer:un.Taustakartta,url:{WMTSCapabilities:"https://avoin-karttakuva.maanmittauslaitos.fi/avoin/wmts/1.0.0/WMTSCapabilities.xml"},apiKey:"0593cc3c-e12f-489c-b8d6-c9a6965b4bfe"},museovirasto:{selectedLayers:Object.values(cn),selectedMuinaisjaannosTypes:Object.values(xn),selectedMuinaisjaannosDatings:Object.values(wn),url:{export:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer",identify:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer/identify",find:"https://kartta.nba.fi/arcgis/rest/services/WMS/MV_KulttuuriymparistoSuojellut/MapServer/find",updateDate:"https://dkfgv6jxivsxz.cloudfront.net/MV_inspire_atom.xml"},opacity:.7},ahvenanmaa:{selectedLayers:Object.values(fn),url:{export:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer",identify:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/identify",find:"https://kartor.regeringen.ax/arcgis/rest/services/Kulturarv/Fornminnen/MapServer/find",typeAndDating:"https://opendata.arcgis.com/datasets/4fa828b46a0740b18960cf3e91d35431_2.geojson",forminnenUpdateDate:"https://opendata.arcgis.com/api/v3/datasets?filter%5Bslug%5D=aland%3A%3Afornminnen-1",maritimtKulturarvUpdateDate:"https://opendata.arcgis.com/api/v3/datasets?filter%5Bslug%5D=aland%3A%3Amaritimt-kulturarv-vrak-1"},opacity:.7},models:{selectedLayers:Object.values(dn),url:{geojson:"./3d/3d.json"}},maisemanMuisti:{selectedLayers:Object.values(pn),url:{geojson:"./maisemanmuisti/maisemanmuisti.json"}},gtk:{selectedLayers:[],url:{export:"https://gtkdata.gtk.fi/arcgis/rest/services/Rajapinnat/GTK_Maapera_WMS/MapServer"},opacity:.7},helsinki:{selectedLayers:Object.values([mn.Maalinnoitus_karttatekstit,mn.Maalinnoitus_kohteet,mn.Maalinnoitus_yksikot]),url:{wms:"https://kartta.hel.fi/ws/geoserver/avoindata/wms"},opacity:.8}},$r=[Ln,Rn,Gn,qn,Fn,Dn,zn,Bn,Un,Wn,Kn],to=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return Hr.apply(void 0,t.map((function(t){var i=t.apply(void 0,e);if(!i)throw new TypeError('combineEpics: one of the provided Epics "'+(t.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return i})))};try{Object.defineProperty(i,"name",{value:"combineEpics("+t.map((function(t){return t.name||"<anonymous>"})).join(", ")+")"})}catch(t){}return i}((t=>t.pipe(Qr("ZOOM_IN"),Vr((()=>{sa(1)})),Jr())),(t=>t.pipe(Qr("ZOOM_OUT"),Vr((()=>{sa(-1)})),Jr())),(t=>t.pipe(Qr("CENTER_MAP_TO_CURRENT_POSITION"),Vr((()=>aa())),Jr())),(t=>t.pipe(Qr("FETCH_DATA_LATESTS_UPDATE_DATES"),Dr((()=>s(void 0,void 0,void 0,(function*(){const t=yield s(void 0,void 0,void 0,(function*(){const t=Qn.getDataLatestUpdateDate(),e=Vn.getForminnenDataLatestUpdateDate(),i=Vn.getMaritimtKulturarvDataLatestUpdateDate(),s=Jn.getDataLatestUpdateDate();return{museovirasto:yield t,ahvenanmaaForminnen:yield e,ahvenanmaaMaritimtKulturarv:yield i,models:yield s}}));return{type:Nn,payload:t}})))))),(t=>t.pipe(Xr((t=>t.type===An)),Dr((t=>s(void 0,void 0,void 0,(function*(){const e=yield(i=t.searchText,s(void 0,void 0,void 0,(function*(){ea(!0);const t=Vn.findFeatures(i),e=Qn.findFeatures(i),[s,n]=yield Promise.all([t,e]);return ea(!1),s.results.concat(n.results).map((t=>Jn.addFeaturesForArgisFeature(t))).map((t=>Zn.addFeaturesForArgisFeature(t)))})));var i;return{type:Tn,searchResultFeatures:e}})))))),(t=>t.pipe(Qr(Ln),Vr((()=>{undefined.selectedMaanmittauslaitosLayerChanged()})),Jr())),(t=>t.pipe(Qr(Rn),Vr((()=>na(ln.GTK))),Jr())),(t=>t.pipe(Xr((t=>t.type===Gn)),Vr((t=>(t=>{switch(t){case ln.GTK:$n.opacityChanged();break;case ln.Museovirasto:Qn.opacityChanged();break;case ln.Ahvenanmaa:Vn.opacityChanged();break;case ln.Helsinki:ta.opacityChanged()}})(t.layerGroup))),Jr())),(t=>t.pipe(Qr(qn),Vr((()=>na(ln.Museovirasto))),Jr())),(t=>t.pipe(Qr(Fn),Vr((()=>na(ln.Ahvenanmaa))),Jr())),(t=>t.pipe(Qr(zn),Vr((()=>na(ln.Models))),Jr())),(t=>t.pipe(Qr(Bn),Vr((()=>na(ln.MaisemanMuisti))),Jr())),(t=>t.pipe(Qr(Un),Vr((()=>{Qn.selectedMuinaisjaannosTypesChanged()})),Jr())),(t=>t.pipe(Qr(Wn),Vr((()=>{Qn.selectedMuinaisjaannosDatingsChanged()})),Jr())),((t,e)=>t.pipe(Xr((t=>$r.includes(t.type))),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i,s=qa(Kr(i=t))?i.pop():void 0;return Ar((function(e,i){for(var n=t.length,a=new Array(n),h=t.map((function(){return!1})),l=!1,u=function(e){Ir(t[e]).subscribe(Tr(i,(function(t){a[e]=t,l||h[e]||(h[e]=!0,(l=h.every(yr))&&(h=null))}),er))},c=0;c<n;c++)u(c);e.subscribe(Tr(i,(function(t){if(l){var e=o([t],r(a));i.next(s?s.apply(void 0,o([],r(e))):e)}})))}))}(e),Vr((([t,e])=>((t,e)=>{let i={next:{},old:oa()};i=Sa(i,t.language,e.language,"lang"),i=Sa(i,t.maanmittauslaitos.selectedLayer,e.maanmittauslaitos.selectedLayer,"mmlLayer"),i=Oa(i,t.gtk.selectedLayers,e.gtk.selectedLayers,"gtkLayer"),i=Sa(i,t.gtk.opacity,e.gtk.opacity,"gtkOpacity"),i=Oa(i,t.museovirasto.selectedLayers,e.museovirasto.selectedLayers,"museovirastoLayer"),i=Sa(i,t.museovirasto.opacity,e.museovirasto.opacity,"museovirastoOpacity"),i=Oa(i,t.museovirasto.selectedMuinaisjaannosTypes,e.museovirasto.selectedMuinaisjaannosTypes,"muinaisjaannosTypes"),i=Oa(i,t.museovirasto.selectedMuinaisjaannosDatings,e.museovirasto.selectedMuinaisjaannosDatings,"muinaisjaannosDatings"),i=Oa(i,t.ahvenanmaa.selectedLayers,e.ahvenanmaa.selectedLayers,"ahvenanmaaLayer"),i=Sa(i,t.ahvenanmaa.opacity,e.ahvenanmaa.opacity,"ahvenanmaaOpacity"),i=Oa(i,t.helsinki.selectedLayers,e.helsinki.selectedLayers,"helsinkiLayer"),i=Sa(i,t.helsinki.opacity,e.helsinki.opacity,"helsinkiOpacity"),i=Oa(i,t.models.selectedLayers,e.models.selectedLayers,"modelsLayer"),i=Oa(i,t.maisemanMuisti.selectedLayers,e.maisemanMuisti.selectedLayers,"maisemanMuistiLayer"),window.location.hash=(t=>`#${(0,ra.stringify)(t,{arrayFormat:"comma"})}`)(Object.assign(Object.assign({},i.old),i.next))})(Zr,e))),Jr())),(t=>t.pipe(Qr(Dn),Vr((()=>na(ln.Helsinki))),Jr()))),eo=(t=>{let e=t;const{zoom:i,lang:s,mmlLayer:n,gtkLayer:a,gtkOpacity:r,museovirastoLayer:o,museovirastoOpacity:h,muinaisjaannosTypes:l,muinaisjaannosDatings:u,ahvenanmaaLayer:c,ahvenanmaaOpacity:f,helsinkiLayer:d,helsinkiOpacity:p,modelsLayer:y,maisemanMuistiLayer:m}=oa();return void 0!==i&&(e=Object.assign(Object.assign({},e),{initialMapZoom:i})),void 0!==s&&ka(hn,s)&&(e=la(e,s)),n&&ka(un,n)&&(e=ua(e,n)),a&&(e=Ea(e,yn,a,ca)),void 0!==r&&(e=fa(e,r)),o&&(e=Ea(e,cn,o,ya)),void 0!==h&&(e=ma(e,h)),l&&(e=Ea(e,xn,l,_a)),u&&(e=Ea(e,wn,u,xa)),c&&(e=Ea(e,fn,c,ga)),void 0!==f&&(e=va(e,f)),d&&(e=Ea(e,mn,d,da)),void 0!==p&&(e=pa(e,p)),y&&(e=Ea(e,dn,y,Ma)),m&&(e=Ea(e,pn,m,ba)),e})(Zr);((t,e)=>{const i=function(t){void 0===t&&(t={});var e,i=new(0,Ja.constructor)(Ja.schedulerActionCtor),s=new Mr,n=function(n){e=n;var a=new Mr,r=new Mr,o=a.asObservable().pipe(Rr(i)),h=new Ur(r.pipe(Rr(i)),e.getState());return s.pipe(zr((function(e){var i=e(o,h,t.dependencies);if(!i)throw new TypeError('Your root Epic "'+(e.name||"<anonymous>")+"\" does not return a stream. Double check you're not missing a return statement!");return i})),Dr((function(t){return Fr(t).pipe(Gr(i),Rr(i))}))).subscribe(e.dispatch),function(t){return function(i){var s=t(i);return r.next(e.getState()),a.next(i),s}}};return n.run=function(t){s.next(t)},n}();Ra(((t,e)=>{if(null==t)throw new Error("State must be defined");if("CLICKED_MAP_FEATURE_IDENTIFICATION_COMPLETE"===e.type){const i=e.payload;return 0===i.features.length&&0===i.maisemanMuistiFeatures.length&&0===i.maalinnoitusFeatures.length?t:Object.assign(Object.assign({},t),{visiblePage:ha.Details,selectedFeaturesOnMap:i})}if(e.type===Nn)return Object.assign(Object.assign({},t),{dataLatestUpdateDates:e.payload});if(e.type===An)return Object.assign(Object.assign({},t),{search:Object.assign(Object.assign({},t.search),{searchResults:void 0})});if(e.type===Tn)return Object.assign(Object.assign({},t),{search:Object.assign(Object.assign({},t.search),{searchResults:e.searchResultFeatures})});if(e.type===Ln)return ua(t,e.layer);if(e.type===Rn)return ca(t,e.layers);if(e.type===Gn)switch(e.layerGroup){case ln.GTK:return fa(t,e.opacity);case ln.Museovirasto:return ma(t,e.opacity);case ln.Ahvenanmaa:return va(t,e.opacity);case ln.Helsinki:return pa(t,e.opacity)}else{if(e.type===Dn)return da(t,e.layers);if(e.type===qn)return ya(t,e.layers);if(e.type===Fn)return ga(t,e.layers);if(e.type===zn)return Ma(t,e.layers);if(e.type===Bn)return ba(t,e.layers);if(e.type===Un)return _a(t,e.types);if(e.type===Wn)return xa(t,e.datings);if(e.type===Kn)return la(t,e.language);if(e.type===Hn)return Object.assign(Object.assign({},t),{showLoadingAnimation:e.show});if("SHOW_PAGE"===e.type)return Object.assign(Object.assign({},t),{visiblePage:e.pageId})}return t}),t,function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(0!==e.length)return"object"==typeof e[0]?Ga:Ga(...e)}(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return function(){var i=t.apply(void 0,arguments),s=function(){throw new Error(Na(15))},n={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map((function(t){return t(n)}));return s=Ga.apply(void 0,a)(i.dispatch),Pa(Pa({},i),{},{dispatch:s})}}}(i)));i.run(to)})(eo)})()})();